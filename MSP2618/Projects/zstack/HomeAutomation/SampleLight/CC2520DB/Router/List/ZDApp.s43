///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V5.52.1.50724/W32 for MSP430      10/Jun/2013  16:27:26 /
// Copyright 1996-2013 IAR Systems AB.                                        /
//                                                                            /
//    __rt_version  =  3                                                      /
//    __double_size =  32                                                     /
//    __reg_r4      =  free                                                   /
//    __reg_r5      =  free                                                   /
//    __pic         =  no                                                     /
//    __core        =  430X                                                   /
//    __data_model  =  small                                                  /
//    Source file   =  C:\Texas Instruments\ZStack-MSP2618-2.5.1\Components\s /
//                     tack\zdo\ZDApp.c                                       /
//    Command line  =  -f "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects /
//                     \zstack\HomeAutomation\SampleLight\CC2520DB\..\..\..\T /
//                     ools\MSP2618\f8wConfig.cfg" (-DZIGBEEPRO -DSECURE=0    /
//                     -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                      /
//                     -DDEFAULT_CHANLIST=0x00000800                          /
//                     -DZDAPP_CONFIG_PAN_ID=0xFFFF -DNWK_START_DELAY=100     /
//                     -DEXTENDED_JOINING_RANDOM_MASK=0x007F                  /
//                     -DBEACON_REQUEST_DELAY=100                             /
//                     -DBEACON_REQ_DELAY_MASK=0x00FF                         /
//                     -DLINK_STATUS_JITTER_MASK=0x007F                       /
//                     -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_POLLED /
//                     =3000 -DNWK_INDIRECT_MSG_TIMEOUT=7                     /
//                     -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3        /
//                     -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2  /
//                     -DMAX_BCAST=9 -DAPS_MAX_GROUPS=16                      /
//                     -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4       /
//                     -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,      /
//                     0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00, 0x02,  /
//                     0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"                   /
//                     -DMAC_MAX_FRAME_SIZE=116 -DZDNWKMGR_MIN_TRANSMISSIONS= /
//                     20 -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000         /
//                     -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100        /
//                     -DREJOIN_POLL_RATE=440) -f "C:\Texas                   /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\Tools\MSP2618\ /
//                     f8wRouter.cfg" (-DCPU6MHZ -DMAC_CFG_APP_PENDING_QUEUE= /
//                     TRUE -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8        /
//                     -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f "C:\Texas             /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\Tools\MSP2618\ /
//                     f8wZCL.cfg" (-DZCL_READ -DZCL_WRITE -DZCL_BASIC        /
//                     -DZCL_IDENTIFY -DZCL_ON_OFF -DZCL_KEY_ESTABLISH        /
//                     -DZCL_KEY_ESTABLISHMENT_KEY_GENERATE_TIMEOUT=4         /
//                     -DZCL_KEY_ESTABLISHMENT_MAC_GENERATE_TIMEOUT=10        /
//                     -DZCL_KEY_ESTABLISHMENT_EKEY_GENERATE_TIMEOUT=10       /
//                     -DZCL_LOAD_CONTROL -DZCL_SIMPLE_METERING               /
//                     -DZCL_PRICING -DZCL_MESSAGE -DZCL_TUNNELING            /
//                     -DZCL_TOU) -DZCL_DEVICE_MGMT "C:\Texas                 /
//                     Instruments\ZStack-MSP2618-2.5.1\Components\stack\zdo\ /
//                     ZDApp.c" -D MSP430F2618 -D ZTOOL_P1 -D MT_TASK -D      /
//                     MT_SYS_FUNC -D MT_ZDO_FUNC -D LCD_SUPPORTED -lC        /
//                     "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\zs /
//                     tack\HomeAutomation\SampleLight\CC2520DB\Router\List\" /
//                      -lA "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projec /
//                     ts\zstack\HomeAutomation\SampleLight\CC2520DB\Router\L /
//                     ist\" --remarks --diag_suppress                        /
//                     Pe001,Pe193,Pe236,Pe826 -o "C:\Texas                   /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\Router\Obj\" --debug    /
//                     -D__MSP430F2618__ -e --double=32 --clib -I "C:\Texas   /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\" -I "C:\Texas          /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\Source\" -I          /
//                     "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\zs /
//                     tack\HomeAutomation\SampleLight\CC2520DB\..\..\Source\ /
//                     " -I "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projec /
//                     ts\zstack\HomeAutomation\SampleLight\CC2520DB\..\..\.. /
//                     \ZMain\MSP2618\" -I "C:\Texas                          /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\hal\include\" -I "C:\Texas                          /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\hal\target\MSP2618CC2520\" -I "C:\Texas             /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\mac\include\" -I "C:\Texas                          /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\mac\high_level\" -I "C:\Texas                       /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\mac\low_level\srf04\" -I "C:\Texas                  /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\mac\low_level\srf04\dual_chip\" -I "C:\Texas        /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\mt\" -I "C:\Texas Instruments\ZStack-MSP2618-2.5.1\ /
//                     Projects\zstack\HomeAutomation\SampleLight\CC2520DB\.. /
//                     \..\..\..\..\Components\osal\include\" -I "C:\Texas    /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\osal\mcu\msp430\" -I "C:\Texas                      /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\services\saddr\" -I "C:\Texas                       /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\services\sdata\" -I "C:\Texas                       /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\stack\af\" -I "C:\Texas                             /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\stack\nwk\" -I "C:\Texas                            /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\stack\sec\" -I "C:\Texas                            /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\stack\sapi\" -I "C:\Texas                           /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\stack\sys\" -I "C:\Texas                            /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\stack\zcl\" -I "C:\Texas                            /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\stack\zdo\" -I "C:\Texas                            /
//                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeA /
//                     utomation\SampleLight\CC2520DB\..\..\..\..\..\Componen /
//                     ts\zmac\" -I "C:\Texas Instruments\ZStack-MSP2618-2.5. /
//                     1\Projects\zstack\HomeAutomation\SampleLight\CC2520DB\ /
//                     ..\..\..\..\..\Components\zmac\f8w\" --core=430X       /
//                     --data_model=small -Ohz --multiplier=16s               /
//                     --require_prototypes                                   /
//    List file     =  C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\zst /
//                     ack\HomeAutomation\SampleLight\CC2520DB\Router\List\ZD /
//                     App.s43                                                /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME ZDApp

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__core", "430X"
        RTMODEL "__data_model", "small"
        RTMODEL "__double_size", "32"
        RTMODEL "__pic", "no"
        RTMODEL "__reg_r4", "free"
        RTMODEL "__reg_r5", "free"
        RTMODEL "__rt_version", "3"

        RSEG CSTACK:DATA:SORT:NOROOT(0)

        EXTERN ?cstart_init_copy
        EXTERN ?cstart_init_zero
        EXTERN ?longjmp_r4
        EXTERN ?longjmp_r5
        EXTERN ?setjmp_r4
        EXTERN ?setjmp_r5

        PUBWEAK ?setjmp_save_r4
        PUBWEAK ?setjmp_save_r5
        PUBLIC AddrMgrWriteNVRequest
        FUNCTION AddrMgrWriteNVRequest,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC MatchRsps
        PUBLIC ZDAppCheckForHoldKey
        FUNCTION ZDAppCheckForHoldKey,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDAppDetermineDeviceType
        FUNCTION ZDAppDetermineDeviceType,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDAppNwkAddr
        PUBLIC ZDAppTaskID
        PUBLIC ZDApp_AnnounceNewAddress
        FUNCTION ZDApp_AnnounceNewAddress,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        PUBLIC ZDApp_AutoFindMode_epDesc
        PUBLIC ZDApp_ChangeMatchDescRespPermission
        FUNCTION ZDApp_ChangeMatchDescRespPermission,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_CoordStartPANIDConflictCB
        FUNCTION ZDApp_CoordStartPANIDConflictCB,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_DeviceAuthEvt
        FUNCTION ZDApp_DeviceAuthEvt,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_DeviceConfigured
        FUNCTION ZDApp_DeviceConfigured,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        PUBLIC ZDApp_InMsgCB
        FUNCTION ZDApp_InMsgCB,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 8, STACK
        PUBLIC ZDApp_Init
        FUNCTION ZDApp_Init,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_InitUserDesc
        FUNCTION ZDApp_InitUserDesc,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 24, STACK
        PUBLIC ZDApp_InitZdoCBFunc
        FUNCTION ZDApp_InitZdoCBFunc,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_JoinReq
        FUNCTION ZDApp_JoinReq,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 20, STACK
        PUBLIC ZDApp_LeaveCtrl
        PUBLIC ZDApp_LeaveCtrlBypass
        FUNCTION ZDApp_LeaveCtrlBypass,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_LeaveCtrlInit
        FUNCTION ZDApp_LeaveCtrlInit,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_LeaveCtrlReset
        FUNCTION ZDApp_LeaveCtrlReset,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_LeaveCtrlSet
        FUNCTION ZDApp_LeaveCtrlSet,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_LeaveCtrlStartup
        FUNCTION ZDApp_LeaveCtrlStartup,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_LeaveReset
        FUNCTION ZDApp_LeaveReset,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_LeaveUpdate
        FUNCTION ZDApp_LeaveUpdate,061203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 22, STACK
        PUBLIC ZDApp_NVUpdate
        FUNCTION ZDApp_NVUpdate,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_NetworkDiscoveryReq
        FUNCTION ZDApp_NetworkDiscoveryReq,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_NetworkInit
        FUNCTION ZDApp_NetworkInit,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_NetworkStartEvt
        FUNCTION ZDApp_NetworkStartEvt,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_NodeProfileSync
        FUNCTION ZDApp_NodeProfileSync,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_NwkDescListProcessing
        FUNCTION ZDApp_NwkDescListProcessing,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 16, STACK
        PUBLIC ZDApp_NwkStateUpdateCB
        FUNCTION ZDApp_NwkStateUpdateCB,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_ProcessMsgCBs
        FUNCTION ZDApp_ProcessMsgCBs,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 30, STACK
        PUBLIC ZDApp_ProcessNetworkJoin
        FUNCTION ZDApp_ProcessNetworkJoin,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 14, STACK
        PUBLIC ZDApp_ProcessOSALMsg
        FUNCTION ZDApp_ProcessOSALMsg,061203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 12, STACK
        PUBLIC ZDApp_ProcessSecEvent
        FUNCTION ZDApp_ProcessSecEvent,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        PUBLIC ZDApp_ProcessSecMsg
        FUNCTION ZDApp_ProcessSecMsg,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_ReadNetworkRestoreState
        FUNCTION ZDApp_ReadNetworkRestoreState,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        PUBLIC ZDApp_RegisterCBs
        FUNCTION ZDApp_RegisterCBs,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        PUBLIC ZDApp_ResetNwkKey
        FUNCTION ZDApp_ResetNwkKey,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 26, STACK
        PUBLIC ZDApp_ResetTimerCancel
        FUNCTION ZDApp_ResetTimerCancel,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_ResetTimerStart
        FUNCTION ZDApp_ResetTimerStart,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_RestoreNetworkState
        FUNCTION ZDApp_RestoreNetworkState,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        PUBLIC ZDApp_RestoreNwkKey
        FUNCTION ZDApp_RestoreNwkKey,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 28, STACK
        PUBLIC ZDApp_SaveNetworkStateEvt
        FUNCTION ZDApp_SaveNetworkStateEvt,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_SaveNwkKey
        FUNCTION ZDApp_SaveNwkKey,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 28, STACK
        PUBLIC ZDApp_SavedPollRate
        PUBLIC ZDApp_SecInit
        FUNCTION ZDApp_SecInit,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_SendEventMsg
        FUNCTION ZDApp_SendEventMsg,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_SendMsg
        FUNCTION ZDApp_SendMsg,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 16, STACK
        PUBLIC ZDApp_StartJoiningCycle
        FUNCTION ZDApp_StartJoiningCycle,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_StopJoiningCycle
        FUNCTION ZDApp_StopJoiningCycle,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDApp_epDesc
        PUBLIC ZDApp_event_loop
        FUNCTION ZDApp_event_loop,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 8, STACK
        PUBLIC ZDOInitDevice
        FUNCTION ZDOInitDevice,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 8, STACK
        PUBLIC ZDO_AddrChangeIndicationCB
        FUNCTION ZDO_AddrChangeIndicationCB,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 8, STACK
        PUBLIC ZDO_ConcentratorIndicationCB
        FUNCTION ZDO_ConcentratorIndicationCB,041203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 10, STACK
        PUBLIC ZDO_DeregisterForZdoCB
        FUNCTION ZDO_DeregisterForZdoCB,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDO_JoinConfirmCB
        FUNCTION ZDO_JoinConfirmCB,061203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 12, STACK
        PUBLIC ZDO_JoinIndicationCB
        FUNCTION ZDO_JoinIndicationCB,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDO_LeaveCnf
        FUNCTION ZDO_LeaveCnf,061203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 6, STACK
        PUBLIC ZDO_LeaveInd
        FUNCTION ZDO_LeaveInd,061203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 8, STACK
        PUBLIC ZDO_ManytoOneFailureIndicationCB
        FUNCTION ZDO_ManytoOneFailureIndicationCB,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDO_NetworkDiscoveryConfirmCB
        FUNCTION ZDO_NetworkDiscoveryConfirmCB,061203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 8, STACK
        PUBLIC ZDO_NetworkFormationConfirmCB
        FUNCTION ZDO_NetworkFormationConfirmCB,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDO_PollConfirmCB
        FUNCTION ZDO_PollConfirmCB,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDO_RegisterForZdoCB
        FUNCTION ZDO_RegisterForZdoCB,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDO_SrcRtgIndCB
        FUNCTION ZDO_SrcRtgIndCB,041203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 10, STACK
        PUBLIC ZDO_StartRouterConfirmCB
        FUNCTION ZDO_StartRouterConfirmCB,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDO_SyncIndicationCB
        FUNCTION ZDO_SyncIndicationCB,021203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDO_UpdateDeviceIndication
        FUNCTION ZDO_UpdateDeviceIndication,0203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 4, STACK
        PUBLIC ZDO_UseExtendedPANID
        PUBLIC ZDO_beaconNotifyIndCB
        FUNCTION ZDO_beaconNotifyIndCB,061203H
        ARGFRAME CSTACK, 0, STACK
        LOCFRAME CSTACK, 12, STACK
        PUBLIC _tmpRejoinState
        PUBLIC continueJoining
        PUBLIC devStartMode
        PUBLIC devState
        PUBLIC nwkFrameCounterChanges
        PUBLIC nwkStatus
        PUBLIC retryCnt
        PUBLIC zdappMgmtNwkDiscReqInProgress
        PUBLIC zdappMgmtNwkDiscRspAddr
        PUBLIC zdappMgmtNwkDiscRspTransSeq
        PUBLIC zdappMgmtNwkDiscStartIndex
        PUBLIC zdappMgmtSavedNwkState
        PUBLIC zdoCBFunc
        PUBLIC zdoDiscCounter
        
          CFI Names cfiNames0
          CFI StackFrame CFA SP DATA
          CFI Resource PC:20, SP:20, SR:16, R4L:16, R4H:4, R4:20, R5L:16, R5H:4
          CFI Resource R5:20, R6L:16, R6H:4, R6:20, R7L:16, R7H:4, R7:20, R8L:16
          CFI Resource R8H:4, R8:20, R9L:16, R9H:4, R9:20, R10L:16, R10H:4
          CFI Resource R10:20, R11L:16, R11H:4, R11:20, R12L:16, R12H:4, R12:20
          CFI Resource R13L:16, R13H:4, R13:20, R14L:16, R14H:4, R14:20, R15L:16
          CFI Resource R15H:4, R15:20
          CFI ResourceParts R4 R4H, R4L
          CFI ResourceParts R5 R5H, R5L
          CFI ResourceParts R6 R6H, R6L
          CFI ResourceParts R7 R7H, R7L
          CFI ResourceParts R8 R8H, R8L
          CFI ResourceParts R9 R9H, R9L
          CFI ResourceParts R10 R10H, R10L
          CFI ResourceParts R11 R11H, R11L
          CFI ResourceParts R12 R12H, R12L
          CFI ResourceParts R13 R13H, R13L
          CFI ResourceParts R14 R14H, R14L
          CFI ResourceParts R15 R15H, R15L
          CFI EndNames cfiNames0
        
          CFI Common cfiCommon0 Using cfiNames0
          CFI CodeAlign 2
          CFI DataAlign 2
          CFI ReturnAddress PC CODE
          CFI CFA SP+4
          CFI PC Frame(CFA, -4)
          CFI SR Undefined
          CFI R4L SameValue
          CFI R4H 0
          CFI R4 Concat
          CFI R5L SameValue
          CFI R5H 0
          CFI R5 Concat
          CFI R6L SameValue
          CFI R6H 0
          CFI R6 Concat
          CFI R7L SameValue
          CFI R7H 0
          CFI R7 Concat
          CFI R8L SameValue
          CFI R8H 0
          CFI R8 Concat
          CFI R9L SameValue
          CFI R9H 0
          CFI R9 Concat
          CFI R10L SameValue
          CFI R10H 0
          CFI R10 Concat
          CFI R11L SameValue
          CFI R11H 0
          CFI R11 Concat
          CFI R12L Undefined
          CFI R12H Undefined
          CFI R12 Undefined
          CFI R13L Undefined
          CFI R13H Undefined
          CFI R13 Undefined
          CFI R14L Undefined
          CFI R14H Undefined
          CFI R14 Undefined
          CFI R15L Undefined
          CFI R15H Undefined
          CFI R15 Undefined
          CFI EndCommon cfiCommon0
        
        
          CFI Common cfiCommon1 Using cfiNames0
          CFI CodeAlign 2
          CFI DataAlign 2
          CFI ReturnAddress PC CODE
          CFI CFA SP+4
          CFI PC Frame(CFA, -4)
          CFI SR Undefined
          CFI R4L SameValue
          CFI R4H 0
          CFI R4 Concat
          CFI R5L SameValue
          CFI R5H 0
          CFI R5 Concat
          CFI R6L SameValue
          CFI R6H 0
          CFI R6 Concat
          CFI R7L SameValue
          CFI R7H 0
          CFI R7 Concat
          CFI R8L SameValue
          CFI R8H 0
          CFI R8 Concat
          CFI R9L SameValue
          CFI R9H 0
          CFI R9 Concat
          CFI R10L SameValue
          CFI R10H 0
          CFI R10 Concat
          CFI R11L SameValue
          CFI R11H 0
          CFI R11 Concat
          CFI R12L SameValue
          CFI R12H 0
          CFI R12 Concat
          CFI R13L SameValue
          CFI R13H 0
          CFI R13 Concat
          CFI R14L SameValue
          CFI R14H 0
          CFI R14 Concat
          CFI R15L SameValue
          CFI R15H 0
          CFI R15 Concat
          CFI EndCommon cfiCommon1
        
        EXTERN APSME_HoldDataRequests
        FUNCTION APSME_HoldDataRequests,0202H
        EXTERN NLME_GetExtAddr
        FUNCTION NLME_GetExtAddr,0202H
        EXTERN NLME_GetShortAddr
        FUNCTION NLME_GetShortAddr,0202H
        EXTERN ZDO_Config_Node_Descriptor
        EXTERN ZDP_DeviceAnnce
        FUNCTION ZDP_DeviceAnnce,0202H
        EXTERN zgStackProfile
        EXTERN NLME_SetBroadcastFilter
        FUNCTION NLME_SetBroadcastFilter,0202H
        EXTERN osal_get_timeoutEx
        FUNCTION osal_get_timeoutEx,0202H
        EXTERN osal_start_timerEx
        FUNCTION osal_start_timerEx,0202H
        EXTERN osal_set_event
        FUNCTION osal_set_event,0202H
        EXTERN afSetMatch
        FUNCTION afSetMatch,0202H
        EXTERN ZDP_GenericRsp
        FUNCTION ZDP_GenericRsp,0202H
        EXTERN RTG_MTORouteReq
        FUNCTION RTG_MTORouteReq,0202H
        EXTERN _NIB
        EXTERN nwkNeighborInitTable
        FUNCTION nwkNeighborInitTable,0202H
        EXTERN NLME_LeaveRsp
        FUNCTION NLME_LeaveRsp,0202H
        EXTERN NLME_GetCoordShortAddr
        FUNCTION NLME_GetCoordShortAddr,0202H
        EXTERN sAddrExtCmp
        FUNCTION sAddrExtCmp,0202H
        EXTERN epList
        EXTERN osal_msg_allocate
        FUNCTION osal_msg_allocate,0202H
        EXTERN osal_msg_send
        FUNCTION osal_msg_send,0202H
        EXTERN HalLedSet
        FUNCTION HalLedSet,0202H
        EXTERN NwkDescList
        EXTERN osal_mem_alloc
        FUNCTION osal_mem_alloc,0202H
        EXTERN osal_memset
        FUNCTION osal_memset,0202H
        EXTERN sAddrExtCpy
        FUNCTION sAddrExtCpy,0202H
        EXTERN gMIN_TREE_LINK_COST
        EXTERN nwk_getNwkDescList
        FUNCTION nwk_getNwkDescList,0202H
        EXTERN zgConfigPANID
        EXTERN nwk_ExtPANIDValid
        FUNCTION nwk_ExtPANIDValid,0202H
        EXTERN osal_memcpy
        FUNCTION osal_memcpy,0202H
        EXTERN osal_nv_read
        FUNCTION osal_nv_read,0202H
        EXTERN NLME_JoinRequest
        FUNCTION NLME_JoinRequest,0202H
        EXTERN NLME_NetworkDiscoveryRequest
        FUNCTION NLME_NetworkDiscoveryRequest,0202H
        EXTERN ZDSecMgrDeviceRemoveByExtAddr
        FUNCTION ZDSecMgrDeviceRemoveByExtAddr,0202H
        EXTERN ZDSecMgrAddrClear
        FUNCTION ZDSecMgrAddrClear,0202H
        EXTERN pbindRemoveDev
        EXTERN NLME_RemoveChild
        FUNCTION NLME_RemoveChild,0202H
        EXTERN RTG_RemoveRtgEntry
        FUNCTION RTG_RemoveRtgEntry,0202H
        EXTERN nwkNeighborRemove
        FUNCTION nwkNeighborRemove,0202H
        EXTERN osal_nv_write
        FUNCTION osal_nv_write,0202H
        EXTERN osal_nv_item_init
        FUNCTION osal_nv_item_init,0202H
        EXTERN osal_stop_timerEx
        FUNCTION osal_stop_timerEx,0202H
        EXTERN nwkFrameCounter
        EXTERN SSP_ReadNwkActiveKey
        FUNCTION SSP_ReadNwkActiveKey,0202H
        EXTERN NLME_StartRouterRequest
        FUNCTION NLME_StartRouterRequest,0202H
        EXTERN ZMacSetReq
        FUNCTION ZMacSetReq,0202H
        EXTERN NLME_NwkDiscTerm
        FUNCTION NLME_NwkDiscTerm,0202H
        EXTERN osal_rand
        FUNCTION osal_rand,0202H
        EXTERN NLME_SetPollRate
        FUNCTION NLME_SetPollRate,0202H
        EXTERN NLME_SetQueuedPollRate
        FUNCTION NLME_SetQueuedPollRate,0202H
        EXTERN NLME_SetResponseRate
        FUNCTION NLME_SetResponseRate,0202H
        EXTERN AIB_apsUseInsecureJoin
        EXTERN zgDeviceLogicalType
        EXTERN ZDSecMgrTransportKeyInd
        FUNCTION ZDSecMgrTransportKeyInd,0202H
        EXTERN ZDSecMgrRemoveDeviceInd
        FUNCTION ZDSecMgrRemoveDeviceInd,0202H
        EXTERN ZDSecMgrSwitchKeyInd
        FUNCTION ZDSecMgrSwitchKeyInd,0202H
        EXTERN ZDO_RegisterForZDOMsg
        FUNCTION ZDO_RegisterForZDOMsg,0202H
        EXTERN ZDO_ParseAddrRsp
        FUNCTION ZDO_ParseAddrRsp,0202H
        EXTERN ZDO_UpdateAddrManager
        FUNCTION ZDO_UpdateAddrManager,0202H
        EXTERN osal_mem_free
        FUNCTION osal_mem_free,0202H
        EXTERN ZDO_ParseBindUnbindReq
        FUNCTION ZDO_ParseBindUnbindReq,0202H
        EXTERN ZDO_ProcessBindUnbindReq
        FUNCTION ZDO_ProcessBindUnbindReq,0202H
        EXTERN ZDP_IncomingData
        FUNCTION ZDP_IncomingData,0202H
        EXTERN pZDNwkMgr_ProcessDataConfirm
        EXTERN NLME_ReJoinRequest
        FUNCTION NLME_ReJoinRequest,0202H
        EXTERN zgDefaultStartingScanDuration
        EXTERN HalKeyRead
        FUNCTION HalKeyRead,0202H
        EXTERN NLME_InitNV
        FUNCTION NLME_InitNV,0202H
        EXTERN NLME_RestoreFromNV
        FUNCTION NLME_RestoreFromNV,0202H
        EXTERN osal_pwrmgr_device
        FUNCTION osal_pwrmgr_device,0202H
        EXTERN NLME_GetEnergyThreshold
        FUNCTION NLME_GetEnergyThreshold,0202H
        EXTERN NLME_SetEnergyThreshold
        FUNCTION NLME_SetEnergyThreshold,0202H
        EXTERN AIB_apsUseExtendedPANID
        EXTERN zgReadStartupOptions
        FUNCTION zgReadStartupOptions,0202H
        EXTERN zgInitItems
        FUNCTION zgInitItems,0202H
        EXTERN ZDConfig_InitDescriptors
        FUNCTION ZDConfig_InitDescriptors,0202H
        EXTERN ZDSecMgrInit
        FUNCTION ZDSecMgrInit,0202H
        EXTERN zgWriteStartupOptions
        FUNCTION zgWriteStartupOptions,0202H
        EXTERN ZDSecMgrNewDeviceEvent
        FUNCTION ZDSecMgrNewDeviceEvent,0202H
        EXTERN ZDSecMgrSaveTCLinkKey
        FUNCTION ZDSecMgrSaveTCLinkKey,0202H
        EXTERN ZDO_StartDevice
        FUNCTION ZDO_StartDevice,0202H
        EXTERN osal_msg_deallocate
        FUNCTION osal_msg_deallocate,0202H
        EXTERN osal_msg_receive
        FUNCTION osal_msg_receive,0202H
        EXTERN ZDO_UpdateNwkStatus
        FUNCTION ZDO_UpdateNwkStatus,0202H
        EXTERN zgConcentratorEnable
        EXTERN NWK_TaskID
        EXTERN Onboard_soft_reset
        FUNCTION Onboard_soft_reset,0202H
        EXTERN ZDO_Init
        FUNCTION ZDO_Init,0202H
        EXTERN afRegister
        FUNCTION afRegister,0202H
        EXTERN HalLedBlink
        FUNCTION HalLedBlink,0202H

// C:\Texas Instruments\ZStack-MSP2618-2.5.1\Components\stack\zdo\ZDApp.c
//    1 /**************************************************************************************************
//    2   Filename:       ZDApp.c
//    3   Revised:        $Date: 2012-02-16 16:04:32 -0800 (Thu, 16 Feb 2012) $
//    4   Revision:       $Revision: 29348 $
//    5 
//    6   Description:    This file contains the interface to the Zigbee Device Application. This is the
//    7                   Application part that the user can change. This also contains the Task functions.
//    8 
//    9 
//   10   Copyright 2004-2012 Texas Instruments Incorporated. All rights reserved.
//   11 
//   12   IMPORTANT: Your use of this Software is limited to those specific rights
//   13   granted under the terms of a software license agreement between the user
//   14   who downloaded the software, his/her employer (which must be your employer)
//   15   and Texas Instruments Incorporated (the "License").  You may not use this
//   16   Software unless you agree to abide by the terms of the License. The License
//   17   limits your use, and you acknowledge, that the Software may not be modified,
//   18   copied or distributed unless embedded on a Texas Instruments microcontroller
//   19   or used solely and exclusively in conjunction with a Texas Instruments radio
//   20   frequency transceiver, which is integrated into your product.  Other than for
//   21   the foregoing purpose, you may not use, reproduce, copy, prepare derivative
//   22   works of, modify, distribute, perform, display or sell this Software and/or
//   23   its documentation for any purpose.
//   24 
//   25   YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
//   26   PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
//   27   INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
//   28   NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
//   29   TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
//   30   NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
//   31   LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
//   32   INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
//   33   OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
//   34   OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
//   35   (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
//   36 
//   37   Should you have any questions regarding your right to use this Software,
//   38   contact Texas Instruments Incorporated at www.TI.com.
//   39 **************************************************************************************************/
//   40 
//   41 /*********************************************************************
//   42  * INCLUDES
//   43  */
//   44 
//   45 #include "ZComDef.h"
//   46 #include "ZMac.h"
//   47 #include "OSAL.h"
//   48 #include "OSAL_Tasks.h"
//   49 #include "OSAL_PwrMgr.h"
//   50 #include "OSAL_Nv.h"
//   51 #include "AF.h"
//   52 #include "APSMEDE.h"
//   53 #include "NLMEDE.h"
//   54 #include "AddrMgr.h"
//   55 #include "ZDProfile.h"
//   56 #include "ZDObject.h"
//   57 #include "ZDConfig.h"
//   58 #include "ZDSecMgr.h"
//   59 #include "ZDApp.h"
//   60 #include "DebugTrace.h"
//   61 #include "nwk_util.h"
//   62 #include "OnBoard.h"
//   63 #include "ZGlobals.h"
//   64 #include "ZDNwkMgr.h"
//   65 #include "rtg.h"
//   66 
//   67 #include "ssp.h"
//   68 
//   69 /* HAL */
//   70 #include "hal_led.h"
//   71 #include "hal_lcd.h"
//   72 #include "hal_key.h"
//   73 
//   74 #if defined( MT_MAC_FUNC ) || defined( MT_MAC_CB_FUNC )
//   75   #error "ERROR! MT_MAC functionalities should be disabled on ZDO devices"
//   76 #endif
//   77 
//   78 /*********************************************************************
//   79  * CONSTANTS
//   80  */
//   81 
//   82 #if !defined( NWK_START_DELAY )
//   83   #define NWK_START_DELAY             100   // in milliseconds
//   84 #endif
//   85 
//   86 #if !defined( LEAVE_RESET_DELAY )
//   87   #define LEAVE_RESET_DELAY           5000  // in milliseconds
//   88 #endif
//   89 
//   90 // Init ZDO, but hold and wait for application to start the joining or
//   91 // forming network
//   92 #define ZDO_INIT_HOLD_NWK_START       0xFFFF
//   93 
//   94 #if !defined( EXTENDED_JOINING_RANDOM_MASK )
//   95   #define EXTENDED_JOINING_RANDOM_MASK 0x007F
//   96 #endif
//   97 
//   98 #if !defined( BEACON_REQUEST_DELAY )
//   99   #define BEACON_REQUEST_DELAY        100   // in milliseconds
//  100 #endif
//  101 
//  102 #if !defined( BEACON_REQ_DELAY_MASK )
//  103   #define BEACON_REQ_DELAY_MASK       0x007F
//  104 #endif
//  105 
//  106 #define MAX_RESUME_RETRY            3
//  107 
//  108 #define MAX_DEVICE_UNAUTH_TIMEOUT   5000  // 5 seconds
//  109 
//  110 // Beacon Order Settings (see NLMEDE.h)
//  111 #define DEFAULT_BEACON_ORDER        BEACON_ORDER_NO_BEACONS
//  112 #define DEFAULT_SUPERFRAME_ORDER    DEFAULT_BEACON_ORDER
//  113 
//  114 #if !defined( MAX_NWK_FRAMECOUNTER_CHANGES )
//  115   // The number of times the frame counter can change before
//  116   // saving to NV
//  117   #define MAX_NWK_FRAMECOUNTER_CHANGES    1000
//  118 #endif
//  119 
//  120 // Leave control bits
//  121 #define ZDAPP_LEAVE_CTRL_INIT 0
//  122 #define ZDAPP_LEAVE_CTRL_SET  1
//  123 #define ZDAPP_LEAVE_CTRL_RA   2
//  124 
//  125 // Address Manager Stub Implementation
//  126 #define ZDApp_NwkWriteNVRequest AddrMgrWriteNVRequest
//  127 
//  128 
//  129 #if !defined ZDO_NV_SAVE_RFDs
//  130 #define ZDO_NV_SAVE_RFDs  TRUE
//  131 #endif
//  132 
//  133 // Delay time before updating NWK NV data to force fewer writes during high activity.
//  134 #if ZDO_NV_SAVE_RFDs
//  135 #define ZDAPP_UPDATE_NWK_NV_TIME 700
//  136 #else
//  137 #define ZDAPP_UPDATE_NWK_NV_TIME 65000
//  138 #endif
//  139 
//  140 /*********************************************************************
//  141  * GLOBAL VARIABLES
//  142  */
//  143 
//  144 #if defined( LCD_SUPPORTED )

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  145   uint8 MatchRsps = 0;
MatchRsps:
        DS8 1
//  146 #endif
//  147 

        RSEG DATA16_I:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_copy
//  148 uint8 zdoDiscCounter = 1;
zdoDiscCounter:
        DS8 1
        REQUIRE `?<Initializer for zdoDiscCounter>`
//  149 

        RSEG DATA16_Z:DATA:SORT:NOROOT(1)
        REQUIRE ?cstart_init_zero
//  150 zAddrType_t ZDAppNwkAddr;
ZDAppNwkAddr:
        DS8 10
//  151 

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  152 uint8 zdappMgmtNwkDiscRspTransSeq;
zdappMgmtNwkDiscRspTransSeq:
        DS8 1

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  153 uint8 zdappMgmtNwkDiscReqInProgress = FALSE;
zdappMgmtNwkDiscReqInProgress:
        DS8 1

        RSEG DATA16_Z:DATA:SORT:NOROOT(1)
        REQUIRE ?cstart_init_zero
//  154 zAddrType_t zdappMgmtNwkDiscRspAddr;
zdappMgmtNwkDiscRspAddr:
        DS8 10

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  155 uint8 zdappMgmtNwkDiscStartIndex;
zdappMgmtNwkDiscStartIndex:
        DS8 1

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  156 uint8 zdappMgmtSavedNwkState;
zdappMgmtSavedNwkState:
        DS8 1
//  157 

        RSEG DATA16_Z:DATA:SORT:NOROOT(1)
        REQUIRE ?cstart_init_zero
//  158 uint16 nwkFrameCounterChanges = 0;
nwkFrameCounterChanges:
        DS8 2

        RSEG DATA16_I:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_copy
//  159 uint8 continueJoining = TRUE;
continueJoining:
        DS8 1
        REQUIRE `?<Initializer for continueJoining>`
//  160 

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  161 uint8  _tmpRejoinState;
_tmpRejoinState:
        DS8 1
//  162 
//  163 // The extended PanID used in ZDO layer for rejoin.

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  164 uint8 ZDO_UseExtendedPANID[Z_EXTADDR_LEN];
ZDO_UseExtendedPANID:
        DS8 8
//  165 

        RSEG DATA16_Z:DATA:SORT:NOROOT(1)
        REQUIRE ?cstart_init_zero
//  166 pfnZdoCb zdoCBFunc[MAX_ZDO_CB_FUNC];
zdoCBFunc:
        DS8 28
//  167 
//  168 /*********************************************************************
//  169  * EXTERNAL VARIABLES
//  170  */
//  171 
//  172 /*********************************************************************
//  173  * EXTERNAL FUNCTIONS
//  174  */
//  175 
//  176 /*********************************************************************
//  177  * LOCAL FUNCTIONS
//  178  */
//  179 
//  180 void ZDApp_NetworkStartEvt( void );
//  181 void ZDApp_DeviceAuthEvt( void );
//  182 void ZDApp_SaveNetworkStateEvt( void );
//  183 
//  184 uint8 ZDApp_ReadNetworkRestoreState( void );
//  185 uint8 ZDApp_RestoreNetworkState( void );
//  186 void ZDAppDetermineDeviceType( void );
//  187 void ZDApp_InitUserDesc( void );
//  188 void ZDAppCheckForHoldKey( void );
//  189 void ZDApp_ProcessOSALMsg( osal_event_hdr_t *msgPtr );
//  190 void ZDApp_ProcessNetworkJoin( void );
//  191 void ZDApp_SetCoordAddress( uint8 endPoint, uint8 dstEP );
//  192 uint8 ZDApp_RestoreNwkKey( void );
//  193 networkDesc_t* ZDApp_NwkDescListProcessing(void);
//  194 
//  195 void ZDApp_SecInit( uint8 state );
//  196 UINT16 ZDApp_ProcessSecEvent( uint8 task_id, UINT16 events );
//  197 void ZDApp_ProcessSecMsg( osal_event_hdr_t *msgPtr );
//  198 
//  199 void ZDApp_SendMsg( uint8 taskID, uint8 cmd, uint8 len, uint8 *buf );
//  200 
//  201 void ZDApp_ResetTimerStart( uint16 delay );
//  202 void ZDApp_ResetTimerCancel( void );
//  203 void ZDApp_LeaveCtrlInit( void );
//  204 void ZDApp_LeaveCtrlSet( uint8 ra );
//  205 uint8 ZDApp_LeaveCtrlBypass( void );
//  206 void ZDApp_LeaveCtrlStartup( devStates_t* state, uint16* startDelay );
//  207 void ZDApp_LeaveUpdate( uint16 nwkAddr, uint8* extAddr,
//  208                         uint8 removeChildren );
//  209 void ZDApp_NodeProfileSync( uint8 stackProfile );
//  210 void ZDApp_ProcessMsgCBs( zdoIncomingMsg_t *inMsg );
//  211 void ZDApp_RegisterCBs( void );
//  212 void ZDApp_InitZdoCBFunc(void);
//  213 
//  214 /*********************************************************************
//  215  * LOCAL VARIABLES
//  216  */
//  217 

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  218 uint8 ZDAppTaskID;
ZDAppTaskID:
        DS8 1

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  219 uint8 nwkStatus;
nwkStatus:
        DS8 1

        RSEG DATA16_Z:DATA:SORT:NOROOT(1)
        REQUIRE ?cstart_init_zero
//  220 endPointDesc_t *ZDApp_AutoFindMode_epDesc = (endPointDesc_t *)NULL;
ZDApp_AutoFindMode_epDesc:
        DS8 2

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  221 uint8 ZDApp_LeaveCtrl;
ZDApp_LeaveCtrl:
        DS8 1
//  222 
//  223 #if defined( HOLD_AUTO_START )
//  224   devStates_t devState = DEV_HOLD;
//  225 #else

        RSEG DATA16_I:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_copy
//  226   devStates_t devState = DEV_INIT;
devState:
        DS8 1
        REQUIRE `?<Initializer for devState>`
//  227 #endif
//  228 
//  229 #if ( ZG_BUILD_RTRONLY_TYPE ) || ( ZG_BUILD_ENDDEVICE_TYPE )

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  230   devStartModes_t devStartMode = MODE_JOIN;     // Assume joining
devStartMode:
        DS8 1
//  231   //devStartModes_t devStartMode = MODE_RESUME; // if already "directly joined"
//  232                         // to parent. Set to make the device do an Orphan scan.
//  233 #else
//  234   // Set the default to coodinator
//  235   devStartModes_t devStartMode = MODE_HARD;
//  236 #endif
//  237 

        RSEG DATA16_Z:DATA:SORT:NOROOT(0)
        REQUIRE ?cstart_init_zero
//  238 uint8 retryCnt;
retryCnt:
        DS8 1
//  239 

        RSEG DATA16_I:DATA:SORT:NOROOT(1)
        REQUIRE ?cstart_init_copy
//  240 endPointDesc_t ZDApp_epDesc =
ZDApp_epDesc:
        DS8 8
        REQUIRE `?<Initializer for ZDApp_epDesc>`
//  241 {
//  242   ZDO_EP,
//  243   &ZDAppTaskID,
//  244   (SimpleDescriptionFormat_t *)NULL,  // No Simple description for ZDO
//  245   (afNetworkLatencyReq_t)0            // No Network Latency req
//  246 };
//  247 

        RSEG DATA16_I:DATA:SORT:NOROOT(1)
        REQUIRE ?cstart_init_copy
//  248 uint16 ZDApp_SavedPollRate = POLL_RATE;
ZDApp_SavedPollRate:
        DS8 2
        REQUIRE `?<Initializer for ZDApp_SavedPollRate>`
//  249 
//  250 /*********************************************************************
//  251  * @fn      ZDApp_Init
//  252  *
//  253  * @brief   ZDApp Initialization function.
//  254  *
//  255  * @param   task_id - ZDApp Task ID
//  256  *
//  257  * @return  None
//  258  */

        RSEG CODE:CODE:REORDER:NOROOT(1)
//  259 void ZDApp_Init( uint8 task_id )
ZDApp_Init:
          CFI Block cfiBlock0 Using cfiCommon0
          CFI Function ZDApp_Init
//  260 {
//  261   // Save the task ID
//  262   ZDAppTaskID = task_id;
        FUNCALL ZDApp_Init, NLME_GetExtAddr
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_Init, ZDAppCheckForHoldKey
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_Init, ZDO_Init
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_Init, afRegister
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_Init, ZDApp_InitUserDesc
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_Init, ZDOInitDevice
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_Init, ZDOInitDevice
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_Init, HalLedBlink
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_Init, ZDApp_InitZdoCBFunc
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_Init, ZDApp_RegisterCBs
        LOCFRAME CSTACK, 4, STACK
        MOV.B   R12, &ZDAppTaskID
//  263 
//  264   // Initialize the ZDO global device short address storage
//  265   ZDAppNwkAddr.addrMode = Addr16Bit;
        MOV.B   #0x2, &ZDAppNwkAddr + 8
//  266   ZDAppNwkAddr.addr.shortAddr = INVALID_NODE_ADDR;
        MOV.W   #0xfffe, &ZDAppNwkAddr
//  267   (void)NLME_GetExtAddr();  // Load the saveExtAddr pointer.
        CALLA   #NLME_GetExtAddr
//  268 
//  269   // Check for manual "Hold Auto Start"
//  270   ZDAppCheckForHoldKey();
        CALLA   #ZDAppCheckForHoldKey
//  271 
//  272   // Initialize ZDO items and setup the device - type of device to create.
//  273   ZDO_Init();
        CALLA   #ZDO_Init
//  274 
//  275   // Register the endpoint description with the AF
//  276   // This task doesn't have a Simple description, but we still need
//  277   // to register the endpoint.
//  278   afRegister( (endPointDesc_t *)&ZDApp_epDesc );
        MOV.W   #ZDApp_epDesc, R12
        CALLA   #afRegister
//  279 
//  280 #if defined( ZDO_USERDESC_RESPONSE )
//  281   ZDApp_InitUserDesc();
        CALLA   #ZDApp_InitUserDesc
//  282 #endif // ZDO_USERDESC_RESPONSE
//  283 
//  284   // Start the device?
//  285   if ( devState != DEV_HOLD )
        CMP.B   #0x0, &devState
        JEQ     ??ZDApp_Init_0
//  286   {
//  287     ZDOInitDevice( 0 );
        MOV.W   #0x0, R12
        CALLA   #ZDOInitDevice
        JMP     ??ZDApp_Init_1
//  288   }
//  289   else
//  290   {
//  291     ZDOInitDevice( ZDO_INIT_HOLD_NWK_START );
??ZDApp_Init_0:
        MOV.W   #0xffff, R12
        CALLA   #ZDOInitDevice
//  292     // Blink LED to indicate HOLD_START
//  293     HalLedBlink ( HAL_LED_4, 0, 50, 500 );
        MOV.W   #0x1f4, R15
        MOV.B   #0x32, R14
        MOV.B   #0x0, R13
        MOV.B   #0x8, R12
        CALLA   #HalLedBlink
//  294   }
//  295 
//  296   // Initialize the ZDO callback function pointers zdoCBFunc[]
//  297   ZDApp_InitZdoCBFunc();
??ZDApp_Init_1:
        CALLA   #ZDApp_InitZdoCBFunc
//  298 
//  299   ZDApp_RegisterCBs();
        BRA     #ZDApp_RegisterCBs
          CFI EndBlock cfiBlock0
//  300 } /* ZDApp_Init() */
//  301 
//  302 /*********************************************************************
//  303  * @fn          ZDApp_SecInit
//  304  *
//  305  * @brief       ZDApp initialize security.
//  306  *
//  307  * @param       state - device initialization state
//  308  *
//  309  * @return      none
//  310  */

        RSEG CODE:CODE:REORDER:NOROOT(1)
//  311 void ZDApp_SecInit( uint8 state )
ZDApp_SecInit:
          CFI Block cfiBlock1 Using cfiCommon0
          CFI Function ZDApp_SecInit
//  312 {
//  313   uint8 zgPreConfigKey[SEC_KEY_LEN];
//  314 
//  315   if ( ZG_SECURE_ENABLED && ZG_BUILD_COORDINATOR_TYPE && ZG_DEVICE_COORDINATOR_TYPE )
//  316   {
//  317     // Set the Trust Center bit
//  318     ZDO_Config_Node_Descriptor.ServerMask |= PRIM_TRUST_CENTER;
//  319   }
//  320 
//  321   if ( ZG_CHECK_SECURITY_MODE == ZG_SECURITY_PRO_HIGH )
//  322   {
//  323     ZDO_Config_Node_Descriptor.CapabilityFlags |= CAPINFO_SECURITY_CAPABLE;
//  324   }
//  325 
//  326   // Initialize ZigBee Device Security Manager
//  327   ZDSecMgrInit(state);
        FUNCALL ZDApp_SecInit, ZDSecMgrInit
        LOCFRAME CSTACK, 4, STACK
        BRA     #ZDSecMgrInit
          CFI EndBlock cfiBlock1
//  328 
//  329   if ( ZG_SECURE_ENABLED )
//  330   {
//  331     if ( state != ZDO_INITDEV_RESTORED_NETWORK_STATE )
//  332     {
//  333       nwkFrameCounter = 0;
//  334 
//  335       if( _NIB.nwkKeyLoaded == FALSE )
//  336       {
//  337         if ( ( ZG_BUILD_COORDINATOR_TYPE && ZG_DEVICE_COORDINATOR_TYPE          ) ||
//  338              ( ( zgSecurityMode == ZG_SECURITY_RESIDENTIAL ) && zgPreConfigKeys )    )
//  339         {
//  340             ZDSecMgrReadKeyFromNv(ZCD_NV_PRECFGKEY, zgPreConfigKey);
//  341             SSP_UpdateNwkKey( zgPreConfigKey, 0);
//  342             SSP_SwitchNwkKey( 0 );
//  343 
//  344             // clear local copy of key
//  345             osal_memset(zgPreConfigKey, 0x00, SEC_KEY_LEN);
//  346         }
//  347       }
//  348     }
//  349   }
//  350 }

        RSEG CODE:CODE:NOROOT(1)
?Subroutine9:
          CFI Block cfiCond2 Using cfiCommon0
          CFI Function ZDApp_ProcessNetworkJoin
          CFI Conditional ??CrossCallReturnLabel_25
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+18
          CFI Block cfiCond3 Using cfiCommon0
          CFI (cfiCond3) Function ZDApp_DeviceAuthEvt
          CFI (cfiCond3) Conditional ??CrossCallReturnLabel_24
          CFI (cfiCond3) CFA SP+8
          CFI Block cfiPicker4 Using cfiCommon1
          CFI (cfiPicker4) NoFunction
          CFI (cfiPicker4) Picker
        MOV.B   #0x6, &devState
          CFI EndBlock cfiCond2
          CFI EndBlock cfiCond3
          CFI EndBlock cfiPicker4
        REQUIRE ??Subroutine9_0
        // Fall through to label ??Subroutine9_0
//  351 
//  352 /*********************************************************************
//  353  * @fn      ZDApp_event_loop()
//  354  *
//  355  * @brief   Main event loop for Zigbee device objects task. This function
//  356  *          should be called at periodic intervals.
//  357  *
//  358  * @param   task_id - Task ID
//  359  * @param   events  - Bitmap of events
//  360  *
//  361  * @return  none
//  362  */

        RSEG CODE:CODE:REORDER:NOROOT(1)
??Subroutine9_0:
          CFI Block cfiCond5 Using cfiCommon0
          CFI Function ZDO_AddrChangeIndicationCB
          CFI Conditional ??CrossCallReturnLabel_23
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+12
          CFI Block cfiCond6 Using cfiCommon0
          CFI (cfiCond6) Function ZDApp_ProcessNetworkJoin
          CFI (cfiCond6) Conditional ??CrossCallReturnLabel_22
          CFI (cfiCond6) R8L Frame(CFA, -12)
          CFI (cfiCond6) R9L Frame(CFA, -10)
          CFI (cfiCond6) R10L Frame(CFA, -8)
          CFI (cfiCond6) R11L Frame(CFA, -6)
          CFI (cfiCond6) CFA SP+18
          CFI Block cfiCond7 Using cfiCommon0
          CFI (cfiCond7) Function ZDApp_ProcessNetworkJoin
          CFI (cfiCond7) Conditional ??ZDApp_ProcessNetworkJoin_6
          CFI (cfiCond7) R8L Frame(CFA, -12)
          CFI (cfiCond7) R9L Frame(CFA, -10)
          CFI (cfiCond7) R10L Frame(CFA, -8)
          CFI (cfiCond7) R11L Frame(CFA, -6)
          CFI (cfiCond7) CFA SP+18
          CFI Block cfiCond8 Using cfiCommon0
          CFI (cfiCond8) Function ZDOInitDevice
          CFI (cfiCond8) Conditional ??CrossCallReturnLabel_21
          CFI (cfiCond8) R10L Frame(CFA, -6)
          CFI (cfiCond8) CFA SP+12
          CFI Block cfiCond9 Using cfiCommon0
          CFI (cfiCond9) Function ZDApp_event_loop
          CFI (cfiCond9) Conditional ??CrossCallReturnLabel_20
          CFI (cfiCond9) R10L Frame(CFA, -8)
          CFI (cfiCond9) R11L Frame(CFA, -6)
          CFI (cfiCond9) CFA SP+12
          CFI Block cfiCond10 Using cfiCommon0
          CFI (cfiCond10) Function ZDApp_event_loop
          CFI (cfiCond10) Conditional ??CrossCallReturnLabel_19
          CFI (cfiCond10) R10L Frame(CFA, -8)
          CFI (cfiCond10) R11L Frame(CFA, -6)
          CFI (cfiCond10) CFA SP+12
          CFI Block cfiCond11 Using cfiCommon0
          CFI (cfiCond11) Function ZDApp_ProcessNetworkJoin
          CFI (cfiCond11) Conditional ??CrossCallReturnLabel_25
          CFI (cfiCond11) R8L Frame(CFA, -12)
          CFI (cfiCond11) R9L Frame(CFA, -10)
          CFI (cfiCond11) R10L Frame(CFA, -8)
          CFI (cfiCond11) R11L Frame(CFA, -6)
          CFI (cfiCond11) CFA SP+18
          CFI Block cfiCond12 Using cfiCommon0
          CFI (cfiCond12) Function ZDApp_DeviceAuthEvt
          CFI (cfiCond12) Conditional ??CrossCallReturnLabel_24
          CFI (cfiCond12) CFA SP+8
          CFI Block cfiPicker13 Using cfiCommon1
          CFI (cfiPicker13) NoFunction
          CFI (cfiPicker13) Picker
        MOV.W   #0x10, R13
        MOV.B   &ZDAppTaskID, R12
        BRA     #osal_set_event
          CFI EndBlock cfiCond5
          CFI EndBlock cfiCond6
          CFI EndBlock cfiCond7
          CFI EndBlock cfiCond8
          CFI EndBlock cfiCond9
          CFI EndBlock cfiCond10
          CFI EndBlock cfiCond11
          CFI EndBlock cfiCond12
          CFI EndBlock cfiPicker13

        RSEG CODE:CODE:REORDER:NOROOT(1)
//  363 UINT16 ZDApp_event_loop( uint8 task_id, UINT16 events )
ZDApp_event_loop:
          CFI Block cfiBlock14 Using cfiCommon0
          CFI Function ZDApp_event_loop
//  364 {
        FUNCALL ZDApp_event_loop, osal_set_event
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, ZDO_StartDevice
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, ZDApp_ProcessOSALMsg
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, osal_msg_deallocate
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, osal_msg_receive
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, ZDApp_NetworkStartEvt
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, osal_pwrmgr_device
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, osal_set_event
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, ZDO_UpdateNwkStatus
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, osal_start_timerEx
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, zgWriteStartupOptions
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_event_loop, Onboard_soft_reset
        LOCFRAME CSTACK, 8, STACK
        PUSHM.W #0x2, R11
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+8
        MOV.W   R13, R10
//  365   uint8 *msg_ptr;
//  366 
//  367   if ( events & SYS_EVENT_MSG )
        CMP.W   #0x0, R13
        JL      ??ZDApp_event_loop_2
//  368   {
//  369     while ( (msg_ptr = osal_msg_receive( ZDAppTaskID )) )
//  370     {
//  371       ZDApp_ProcessOSALMsg( (osal_event_hdr_t *)msg_ptr );
//  372 
//  373       // Release the memory
//  374       osal_msg_deallocate( msg_ptr );
//  375     }
//  376 
//  377     // Return unprocessed events
//  378     return (events ^ SYS_EVENT_MSG);
//  379   }
//  380 
//  381   if ( events & ZDO_NETWORK_INIT )
        BIT.W   #0x1, R13
        JNC     ??ZDApp_event_loop_3
//  382   {
//  383     // Initialize apps and start the network
//  384     devState = DEV_INIT;
        MOV.B   #0x1, &devState
//  385     osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
        CALLA   #??Subroutine9_0
//  386 
//  387     ZDO_StartDevice( (uint8)ZDO_Config_Node_Descriptor.LogicalType, devStartMode,
//  388                      DEFAULT_BEACON_ORDER, DEFAULT_SUPERFRAME_ORDER );
??CrossCallReturnLabel_20:
        MOV.B   #0xf, R15
        MOV.B   R15, R14
        MOV.B   &devStartMode, R13
        MOV.B   &ZDO_Config_Node_Descriptor, R12
        AND.B   #0x7, R12
        CALLA   #ZDO_StartDevice
//  389 
//  390     // Return unprocessed events
//  391     return (events ^ ZDO_NETWORK_INIT);
        XOR.W   #0x1, R10
        JMP     ??ZDApp_event_loop_1
//  392   }
??ZDApp_event_loop_0:
        CALLA   #ZDApp_ProcessOSALMsg
        MOV.W   R11, R12
        CALLA   #osal_msg_deallocate
??ZDApp_event_loop_2:
        MOV.B   &ZDAppTaskID, R12
        CALLA   #osal_msg_receive
        MOV.W   R12, R11
        CMP.W   #0x0, R12
        JNE     ??ZDApp_event_loop_0
        XOR.W   #0x8000, R10
        JMP     ??ZDApp_event_loop_1
//  393 
//  394   if ( ZSTACK_ROUTER_BUILD )
//  395   {
//  396     if ( events & ZDO_NETWORK_START )
??ZDApp_event_loop_3:
        BIT.W   #0x2, R13
        JNC     ??ZDApp_event_loop_4
//  397     {
//  398       ZDApp_NetworkStartEvt();
        CALLA   #ZDApp_NetworkStartEvt
//  399 
//  400       // Return unprocessed events
//  401       return (events ^ ZDO_NETWORK_START);
        XOR.W   #0x2, R10
        JMP     ??ZDApp_event_loop_1
//  402     }
//  403 
//  404     if ( events & ZDO_ROUTER_START )
??ZDApp_event_loop_4:
        BIT.W   #0x20, R13
        JNC     ??ZDApp_event_loop_5
//  405     {
//  406       if ( nwkStatus == ZSuccess )
        CMP.B   #0x0, &nwkStatus
        JNE     ??ZDApp_event_loop_6
//  407       {
//  408         if ( devState == DEV_END_DEVICE )
        CMP.B   #0x6, &devState
        JNE     ??ZDApp_event_loop_7
//  409           devState = DEV_ROUTER;
        MOV.B   #0x7, &devState
//  410 
//  411         osal_pwrmgr_device( PWRMGR_ALWAYS_ON );
??ZDApp_event_loop_7:
        MOV.B   #0x0, R12
        CALLA   #osal_pwrmgr_device
//  412       }
//  413       else
//  414       {
//  415         // remain as end device!!
//  416       }
//  417       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
??ZDApp_event_loop_6:
        CALLA   #??Subroutine9_0
//  418 
//  419       // Return unprocessed events
//  420       return (events ^ ZDO_ROUTER_START);
??CrossCallReturnLabel_19:
        XOR.W   #0x20, R10
        JMP     ??ZDApp_event_loop_1
//  421     }
//  422   }
//  423 
//  424   if ( events & ZDO_STATE_CHANGE_EVT )
??ZDApp_event_loop_5:
        BIT.W   #0x10, R13
        JNC     ??ZDApp_event_loop_8
//  425   {
//  426     ZDO_UpdateNwkStatus( devState );
        MOV.B   &devState, R12
        CALLA   #ZDO_UpdateNwkStatus
//  427 
//  428     // At start up, do one MTO route discovery if the device is a concentrator
//  429     if ( zgConcentratorEnable == TRUE )
        CMP.B   #0x1, &zgConcentratorEnable
        JNE     ??ZDApp_event_loop_9
//  430     {
//  431       // Start next event
//  432       osal_start_timerEx( NWK_TaskID, NWK_MTO_RTG_REQ_EVT, 100 );
        MOV.W   #0x64, R14
        MOV.W   #0x800, R13
        MOV.B   &NWK_TaskID, R12
        CALLA   #osal_start_timerEx
//  433     }
//  434 
//  435     // Return unprocessed events
//  436     return (events ^ ZDO_STATE_CHANGE_EVT);
??ZDApp_event_loop_9:
        XOR.W   #0x10, R10
        JMP     ??ZDApp_event_loop_1
//  437   }
//  438 
//  439   if ( events & ZDO_COMMAND_CNF )
??ZDApp_event_loop_8:
        BIT.W   #0x8, R13
        JNC     ??ZDApp_event_loop_10
//  440   {
//  441     // User defined logic
//  442 
//  443     // Return unprocessed events
//  444     return (events ^ ZDO_COMMAND_CNF);
        XOR.W   #0x8, R10
        JMP     ??ZDApp_event_loop_1
//  445   }
//  446 
//  447   if ( events & ZDO_NWK_UPDATE_NV )
??ZDApp_event_loop_10:
        BIT.W   #0x200, R13
        JNC     ??ZDApp_event_loop_11
//  448   {
//  449     ZDApp_SaveNetworkStateEvt();
//  450 
//  451     // Return unprocessed events
//  452     return (events ^ ZDO_NWK_UPDATE_NV);
        XOR.W   #0x200, R10
??ZDApp_event_loop_1:
        MOV.W   R10, R12
        JMP     ??ZDApp_event_loop_12
//  453   }
//  454 
//  455   if ( events & ZDO_DEVICE_RESET )
??ZDApp_event_loop_11:
        BIT.W   #0x4, R13
        JNC     ??ZDApp_event_loop_13
//  456   {
//  457 #ifdef ZBA_FALLBACK_NWKKEY
//  458     if ( devState == DEV_END_DEVICE_UNAUTH )
//  459     {
//  460       ZDSecMgrFallbackNwkKey();
//  461     }
//  462     else
//  463 #endif
//  464     {
//  465       // Set the NV startup option to force a "new" join.
//  466       zgWriteStartupOptions( ZG_STARTUP_SET, ZCD_STARTOPT_DEFAULT_NETWORK_STATE );
        MOV.B   #0x2, R13
        MOV.B   #0xff, R12
        CALLA   #zgWriteStartupOptions
//  467 
//  468       // The device has been in the UNAUTH state, so reset
//  469       // Note: there will be no return from this call
//  470       SystemResetSoft();
        CALLA   #Onboard_soft_reset
//  471     }
//  472   }
//  473 
//  474   if ( ZG_SECURE_ENABLED )
//  475   {
//  476     return ( ZDApp_ProcessSecEvent( task_id, events ) );
//  477   }
//  478   else
//  479   {
//  480     // Discard or make more handlers
//  481     return 0;
??ZDApp_event_loop_13:
        MOV.W   #0x0, R12
??ZDApp_event_loop_12:
        POPM.W  #0x2, R11
          CFI R10L SameValue
          CFI R11L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock14
//  482   }
//  483 }
//  484 
//  485 /*********************************************************************
//  486  * @fn      ZDApp_ProcessSecEvent()
//  487  *
//  488  * @brief   Process incoming security events.
//  489  *
//  490  * @param   task_id - Task ID
//  491  * @param   events  - Bitmap of events
//  492  *
//  493  * @return  none
//  494  */

        RSEG CODE:CODE:REORDER:NOROOT(1)
//  495 UINT16 ZDApp_ProcessSecEvent( uint8 task_id, UINT16 events )
ZDApp_ProcessSecEvent:
          CFI Block cfiBlock15 Using cfiCommon0
          CFI Function ZDApp_ProcessSecEvent
//  496 {
        FUNCALL ZDApp_ProcessSecEvent, ZDSecMgrNewDeviceEvent
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_ProcessSecEvent, osal_start_timerEx
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_ProcessSecEvent, ZDApp_DeviceAuthEvt
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_ProcessSecEvent, ZDApp_SaveNwkKey
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_ProcessSecEvent, ZDSecMgrSaveTCLinkKey
        LOCFRAME CSTACK, 6, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        MOV.W   R13, R10
//  497   (void)task_id;  // Intentionally unreferenced parameter
//  498 
//  499   if ( ZSTACK_ROUTER_BUILD )
//  500   {
//  501     if ( events & ZDO_NEW_DEVICE )
        BIT.W   #0x40, R13
        JNC     ??ZDApp_ProcessSecEvent_1
//  502     {
//  503       // process the new device event
//  504       if ( ZDSecMgrNewDeviceEvent() == TRUE )
        CALLA   #ZDSecMgrNewDeviceEvent
        CMP.B   #0x1, R12
        JNE     ??ZDApp_ProcessSecEvent_2
//  505       {
//  506         osal_start_timerEx( ZDAppTaskID, ZDO_NEW_DEVICE, 1000 );
        MOV.W   #0x3e8, R14
        MOV.W   #0x40, R13
        MOV.B   &ZDAppTaskID, R12
        CALLA   #osal_start_timerEx
//  507       }
//  508 
//  509       // Return unprocessed events
//  510       return (events ^ ZDO_NEW_DEVICE);
??ZDApp_ProcessSecEvent_2:
        XOR.W   #0x40, R10
        JMP     ??ZDApp_ProcessSecEvent_0
//  511     }
//  512   }
//  513 
//  514   if ( (ZG_CHECK_SECURITY_MODE == ZG_SECURITY_PRO_HIGH)
//  515       || (ZG_CHECK_SECURITY_MODE == ZG_SECURITY_SE_STANDARD) )
//  516   {
//  517     if ( ZG_BUILD_COORDINATOR_TYPE && ZG_DEVICE_COORDINATOR_TYPE )
//  518     {
//  519       if ( events & ZDO_SECMGR_EVENT )
//  520       {
//  521         ZDSecMgrEvent();
//  522 
//  523         // Return unprocessed events
//  524         return (events ^ ZDO_SECMGR_EVENT);
//  525       }
//  526     }
//  527   }
//  528 
//  529   if ( events & ZDO_DEVICE_AUTH )
??ZDApp_ProcessSecEvent_1:
        CMP.B   #0x0, R13
        JGE     ??ZDApp_ProcessSecEvent_3
//  530   {
//  531     ZDApp_DeviceAuthEvt();
        CALLA   #ZDApp_DeviceAuthEvt
//  532 
//  533     // Return unprocessed events
//  534     return (events ^ ZDO_DEVICE_AUTH);
        XOR.W   #0x80, R10
        JMP     ??ZDApp_ProcessSecEvent_0
//  535   }
//  536 
//  537   if ( events & ZDO_FRAMECOUNTER_CHANGE )
??ZDApp_ProcessSecEvent_3:
        BIT.W   #0x400, R13
        JNC     ??ZDApp_ProcessSecEvent_4
//  538   {
//  539     if ( nwkFrameCounterChanges++ > MAX_NWK_FRAMECOUNTER_CHANGES )
        MOV.W   &nwkFrameCounterChanges, R15
        MOV.W   R15, R14
        ADD.W   #0x1, R14
        MOV.W   R14, &nwkFrameCounterChanges
        CMP.W   #0x3e9, R15
        JNC     ??ZDApp_ProcessSecEvent_5
//  540     {
//  541       ZDApp_SaveNwkKey();
        CALLA   #ZDApp_SaveNwkKey
//  542     }
//  543 
//  544     // Return unprocessed events
//  545     return (events ^ ZDO_FRAMECOUNTER_CHANGE);
??ZDApp_ProcessSecEvent_5:
        XOR.W   #0x400, R10
        JMP     ??ZDApp_ProcessSecEvent_0
//  546   }
//  547 
//  548   if ( events & ZDO_APS_FRAMECOUNTER_CHANGE )
??ZDApp_ProcessSecEvent_4:
        BIT.W   #0x1000, R13
        JNC     ??ZDApp_ProcessSecEvent_6
//  549   {
//  550 #if defined (NV_RESTORE)
//  551     ZDSecMgrSaveApsLinkKey();
//  552 #endif // (NV_RESTORE)
//  553 
//  554     // Return unprocessed events
//  555     return (events ^ ZDO_APS_FRAMECOUNTER_CHANGE);
        XOR.W   #0x1000, R10
        JMP     ??ZDApp_ProcessSecEvent_0
//  556   }
//  557 
//  558   if ( events & ZDO_TCLK_FRAMECOUNTER_CHANGE )
??ZDApp_ProcessSecEvent_6:
        BIT.W   #0x800, R13
        JNC     ??ZDApp_ProcessSecEvent_7
//  559   {
//  560     ZDSecMgrSaveTCLinkKey();
        CALLA   #ZDSecMgrSaveTCLinkKey
//  561 
//  562     // Return unprocessed events
//  563     return (events ^ ZDO_TCLK_FRAMECOUNTER_CHANGE);
        XOR.W   #0x800, R10
??ZDApp_ProcessSecEvent_0:
        MOV.W   R10, R12
        JMP     ??ZDApp_ProcessSecEvent_8
//  564   }
//  565 
//  566   // Discard or make more handlers
//  567   return 0;
??ZDApp_ProcessSecEvent_7:
        MOV.W   #0x0, R12
??ZDApp_ProcessSecEvent_8:
        POP.W   R10
          CFI R10L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock15
//  568 }

        RSEG CODE:CODE:NOROOT(1)
ZDO_SrcRtgIndCB:
          CFI Block cfiBlock16 Using cfiCommon0
          CFI Function ZDO_SrcRtgIndCB
        FUNCALL ZDO_SrcRtgIndCB
        LOCFRAME CSTACK, 10, STACK
        SUB.W   #0x6, SP
          CFI CFA SP+10
        MOV.W   R12, 0(SP)
        MOV.B   R13, 0x2(SP)
        MOV.W   R14, 0x4(SP)
        MOV.W   &zdoCBFunc, R15
        BIS.W   &zdoCBFunc + 2, R15
        CMP.W   #0x0, R15
        JEQ     ??ZDO_SrcRtgIndCB_0
        MOV.W   SP, R12
        ADD.W   #0x0, R12
        CALLA   &zdoCBFunc
          CFI EndBlock cfiBlock16
??ZDO_SrcRtgIndCB_0:
        REQUIRE ?Subroutine2
        // Fall through to label ?Subroutine2
//  569 
//  570 /*********************************************************************
//  571  * Application Functions
//  572  */
//  573 
//  574 /*********************************************************************
//  575  * @fn      ZDOInitDevice
//  576  *
//  577  * @brief   Start the device in the network.  This function will read
//  578  *   ZCD_NV_STARTUP_OPTION (NV item) to determine whether or not to
//  579  *   restore the network state of the device.
//  580  *
//  581  * @param   startDelay - timeDelay to start device (in milliseconds).
//  582  *                       There is a jitter added to this delay:
//  583  *                       ((NWK_START_DELAY + startDelay)
//  584  *                       + (osal_rand() & EXTENDED_JOINING_RANDOM_MASK))
//  585  *                       When startDelay is set to ZDO_INIT_HOLD_NWK_START
//  586  *                       this function will hold the network init. Application
//  587  *                       can start the device.
//  588  *
//  589  * NOTE:    If the application would like to force a "new" join, the
//  590  *          application should set the ZCD_STARTOPT_DEFAULT_NETWORK_STATE
//  591  *          bit in the ZCD_NV_STARTUP_OPTION NV item before calling
//  592  *          this function. "new" join means to not restore the network
//  593  *          state of the device. Use zgWriteStartupOptions() to set these
//  594  *          options.
//  595  *
//  596  * @return
//  597  *    ZDO_INITDEV_RESTORED_NETWORK_STATE  - The device's network state was
//  598  *          restored.
//  599  *    ZDO_INITDEV_NEW_NETWORK_STATE - The network state was initialized.
//  600  *          This could mean that ZCD_NV_STARTUP_OPTION said to not restore, or
//  601  *          it could mean that there was no network state to restore.
//  602  *    ZDO_INITDEV_LEAVE_NOT_STARTED - Before the reset, a network leave was issued
//  603  *          with the rejoin option set to TRUE.  So, the device was not
//  604  *          started in the network (one time only).  The next time this
//  605  *          function is called it will start.
//  606  */
//  607 uint8 ZDOInitDevice( uint16 startDelay )
//  608 {
//  609   uint8 networkStateNV = ZDO_INITDEV_NEW_NETWORK_STATE;
//  610   uint16 extendedDelay = 0;
//  611 
//  612   if ( devState == DEV_HOLD )
//  613   {
//  614     // Initialize the RAM items table, in case an NV item has been updated.
//  615     zgInitItems( FALSE );
//  616   }
//  617 
//  618   ZDConfig_InitDescriptors();
//  619   //devtag.071807.todo - fix this temporary solution
//  620   _NIB.CapabilityFlags = ZDO_Config_Node_Descriptor.CapabilityFlags;
//  621 
//  622 #if defined ( NV_RESTORE )
//  623   // Get Keypad directly to see if a reset nv is needed.
//  624   // Hold down the SW_BYPASS_NV key (defined in OnBoard.h)
//  625   // while booting to skip past NV Restore.
//  626   if ( HalKeyRead() == SW_BYPASS_NV )
//  627     networkStateNV = ZDO_INITDEV_NEW_NETWORK_STATE;
//  628   else
//  629   {
//  630     // Determine if NV should be restored
//  631     networkStateNV = ZDApp_ReadNetworkRestoreState();
//  632   }
//  633 
//  634   if ( networkStateNV == ZDO_INITDEV_RESTORED_NETWORK_STATE )
//  635   {
//  636     networkStateNV = ZDApp_RestoreNetworkState();
//  637   }
//  638   else
//  639   {
//  640     // Wipe out the network state in NV
//  641     NLME_InitNV();
//  642     NLME_SetDefaultNV();
//  643     // clear NWK key values
//  644     ZDSecMgrClearNVKeyValues();
//  645   }
//  646 #endif
//  647 
//  648   if ( networkStateNV == ZDO_INITDEV_NEW_NETWORK_STATE )
//  649   {
//  650     ZDAppDetermineDeviceType();
//  651 
//  652     // Only delay if joining network - not restoring network state
//  653     extendedDelay = (uint16)((NWK_START_DELAY + startDelay)
//  654               + (osal_rand() & EXTENDED_JOINING_RANDOM_MASK));
//  655   }
//  656 
//  657   // Initialize the security for type of device
//  658   ZDApp_SecInit( networkStateNV );
//  659 
//  660   if( ZDO_INIT_HOLD_NWK_START != startDelay )
//  661   {
//  662     devState = DEV_INIT;    // Remove the Hold state
//  663 
//  664     // Initialize leave control logic
//  665     ZDApp_LeaveCtrlInit();
//  666 
//  667     // Check leave control reset settings
//  668     ZDApp_LeaveCtrlStartup( &devState, &startDelay );
//  669 
//  670     // Leave may make the hold state come back
//  671     if ( devState == DEV_HOLD )
//  672     {
//  673       // Set the NV startup option to force a "new" join.
//  674       zgWriteStartupOptions( ZG_STARTUP_SET, ZCD_STARTOPT_DEFAULT_NETWORK_STATE );
//  675 
//  676       // Notify the applications
//  677       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
//  678 
//  679       return ( ZDO_INITDEV_LEAVE_NOT_STARTED );   // Don't join - (one time).
//  680     }
//  681 
//  682     // Trigger the network start
//  683     ZDApp_NetworkInit( extendedDelay );
//  684   }
//  685 
//  686   // set broadcast address mask to support broadcast filtering
//  687   NLME_SetBroadcastFilter( ZDO_Config_Node_Descriptor.CapabilityFlags );
//  688 
//  689   return ( networkStateNV );
//  690 }
//  691 
//  692 /*********************************************************************
//  693  * @fn      ZDApp_ReadNetworkRestoreState
//  694  *
//  695  * @brief   Read the ZCD_NV_STARTUP_OPTION NV Item to state whether
//  696  *          or not to restore the network state.
//  697  *          If the read value has the ZCD_STARTOPT_DEFAULT_NETWORK_STATE
//  698  *          bit set return the ZDO_INITDEV_NEW_NETWORK_STATE.
//  699  *
//  700  * @param   none
//  701  *
//  702  * @return  ZDO_INITDEV_NEW_NETWORK_STATE
//  703  *          or ZDO_INITDEV_RESTORED_NETWORK_STATE based on whether or
//  704  *          not ZCD_STARTOPT_DEFAULT_NETWORK_STATE bit is set in
//  705  *          ZCD_NV_STARTUP_OPTION
//  706  */
//  707 uint8 ZDApp_ReadNetworkRestoreState( void )
//  708 {
//  709   uint8 networkStateNV = ZDO_INITDEV_RESTORED_NETWORK_STATE;
//  710 
//  711   // Look for the New Network State option.
//  712   if ( zgReadStartupOptions() & ZCD_STARTOPT_DEFAULT_NETWORK_STATE )
//  713   {
//  714     networkStateNV = ZDO_INITDEV_NEW_NETWORK_STATE;
//  715   }
//  716 
//  717   return ( networkStateNV );
//  718 }
//  719 
//  720 /*********************************************************************
//  721  * @fn      ZDAppDetermineDeviceType()
//  722  *
//  723  * @brief   Determines the type of device to start.
//  724  *
//  725  *          Looks at zgDeviceLogicalType and determines what type of
//  726  *          device to start.  The types are:
//  727  *            ZG_DEVICETYPE_COORDINATOR
//  728  *            ZG_DEVICETYPE_ROUTER
//  729  *            ZG_DEVICETYPE_ENDDEVICE
//  730  *
//  731  * @param   none
//  732  *
//  733  * @return  none
//  734  */
//  735 void ZDAppDetermineDeviceType( void )
//  736 {
//  737   if ( zgDeviceLogicalType == ZG_DEVICETYPE_COORDINATOR )
//  738   {
//  739     devStartMode = MODE_HARD;     // Start as a coordinator
//  740     ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_COORDINATOR;
//  741   }
//  742   else
//  743   {
//  744     if ( zgDeviceLogicalType == ZG_DEVICETYPE_ROUTER  )
//  745       ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_ROUTER;
//  746     else if ( zgDeviceLogicalType == ZG_DEVICETYPE_ENDDEVICE )
//  747       ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_DEVICE;
//  748 
//  749     // If AIB_apsUseExtendedPANID is set to a non-zero value by commissioning
//  750     // The device shall do rejoin the network. Otherwise, do normal join
//  751     if ( nwk_ExtPANIDValid( AIB_apsUseExtendedPANID ) == false )
//  752     {
//  753       devStartMode = MODE_JOIN;     // Assume joining
//  754     }
//  755     else
//  756     {
//  757       devStartMode = MODE_REJOIN;
//  758     }
//  759   }
//  760 }
//  761 
//  762 /*********************************************************************
//  763  * @fn      ZDApp_NetworkStartEvt()
//  764  *
//  765  * @brief   Process the Network Start Event
//  766  *
//  767  * @param   none
//  768  *
//  769  * @return  none
//  770  */
//  771 void ZDApp_NetworkStartEvt( void )
//  772 {
//  773   if ( nwkStatus == ZSuccess )
//  774   {
//  775     // Successfully started a ZigBee network
//  776     if ( devState == DEV_COORD_STARTING )
//  777     {
//  778       devState = DEV_ZB_COORD;
//  779     }
//  780 
//  781     osal_pwrmgr_device( PWRMGR_ALWAYS_ON );
//  782     osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
//  783   }
//  784   else
//  785   {
//  786     // Try again with a higher energy threshold !!
//  787     if ( ( NLME_GetEnergyThreshold() + ENERGY_SCAN_INCREMENT ) < 0xff )
//  788     {
//  789       NLME_SetEnergyThreshold( (uint8)(NLME_GetEnergyThreshold() + ENERGY_SCAN_INCREMENT) );
//  790       osal_set_event( ZDAppTaskID, ZDO_NETWORK_INIT );
//  791     }
//  792     else
//  793     {
//  794       // Failed to start network. Enter a dormant state (until user intervenes)
//  795       devState = DEV_INIT;
//  796       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
//  797     }
//  798   }
//  799 }
//  800 
//  801 /*********************************************************************
//  802  * @fn      ZDApp_DeviceAuthEvt()
//  803  *
//  804  * @brief   Process the Device Authentic Event
//  805  *
//  806  * @param   none
//  807  *
//  808  * @return  none
//  809  */
//  810 void ZDApp_DeviceAuthEvt( void )
//  811 {
//  812   // received authentication from trust center
//  813   if ( devState == DEV_END_DEVICE_UNAUTH )
//  814   {
//  815     // Stop the reset timer so it doesn't reset
//  816     ZDApp_ResetTimerCancel();
//  817 
//  818     devState = DEV_END_DEVICE;
//  819     osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
//  820 
//  821     // Set the Power Manager Device
//  822 #if defined ( POWER_SAVING )
//  823     osal_pwrmgr_device( PWRMGR_BATTERY );
//  824 #endif
//  825 
//  826     if ( ZSTACK_ROUTER_BUILD )
//  827     {
//  828       if ( ZDO_Config_Node_Descriptor.LogicalType != NODETYPE_DEVICE )
//  829       {
//  830         // NOTE: first two parameters are not used, see NLMEDE.h for details
//  831         NLME_StartRouterRequest( 0, 0, false );
//  832       }
//  833     }
//  834 
//  835     // Notify to save info into NV
//  836     ZDApp_NVUpdate();
//  837 
//  838     // Save off the security
//  839     ZDApp_SaveNwkKey();
//  840 
//  841     ZDApp_AnnounceNewAddress();
//  842 
//  843     if ( (ZDO_Config_Node_Descriptor.CapabilityFlags & CAPINFO_RCVR_ON_IDLE) == 0 )
//  844     {
//  845       NLME_SetPollRate( ZDApp_SavedPollRate );
//  846     }
//  847   }
//  848   else
//  849   {
//  850     ZDApp_NVUpdate();
//  851   }
//  852 }
//  853 
//  854 /*********************************************************************
//  855  * @fn      ZDApp_SaveNetworkStateEvt()
//  856  *
//  857  * @brief   Process the Save the Network State Event
//  858  *
//  859  * @param   none
//  860  *
//  861  * @return  none
//  862  */
//  863 void ZDApp_SaveNetworkStateEvt( void )
//  864 {
//  865 #if defined ( NV_RESTORE )
//  866  #if defined ( NV_TURN_OFF_RADIO )
//  867   // Turn off the radio's receiver during an NV update
//  868   uint8 RxOnIdle;
//  869   uint8 x = false;
//  870   ZMacGetReq( ZMacRxOnIdle, &RxOnIdle );
//  871   ZMacSetReq( ZMacRxOnIdle, &x );
//  872  #endif
//  873 
//  874   // Update the Network State in NV
//  875   NLME_UpdateNV( NWK_NV_NIB_ENABLE        |
//  876                  NWK_NV_DEVICELIST_ENABLE |
//  877                  NWK_NV_BINDING_ENABLE    |
//  878                  NWK_NV_ADDRMGR_ENABLE );
//  879 
//  880   // Reset the NV startup option to resume from NV by
//  881   // clearing the "New" join option.
//  882   zgWriteStartupOptions( FALSE, ZCD_STARTOPT_DEFAULT_NETWORK_STATE );
//  883 
//  884  #if defined ( NV_TURN_OFF_RADIO )
//  885   ZMacSetReq( ZMacRxOnIdle, &RxOnIdle );
//  886  #endif
//  887 #endif  // NV_RESTORE
//  888 }
//  889 
//  890 /*********************************************************************
//  891  * @fn      ZDApp_RestoreNetworkState()
//  892  *
//  893  * @brief   This function will restore the network state of the
//  894  *          device if the network state is stored in NV.
//  895  *
//  896  * @param   none
//  897  *
//  898  * @return
//  899  *    ZDO_INITDEV_RESTORED_NETWORK_STATE  - The device's network state was
//  900  *          restored.
//  901  *    ZDO_INITDEV_NEW_NETWORK_STATE - The network state was not used.
//  902  *          This could mean that zgStartupOption said to not restore, or
//  903  *          it could mean that there was no network state to restore.
//  904  *
//  905  */
//  906 uint8 ZDApp_RestoreNetworkState( void )
//  907 {
//  908   uint8 nvStat;
//  909 
//  910   // Initialize NWK NV items
//  911   nvStat = NLME_InitNV();
//  912 
//  913   if ( nvStat != NV_OPER_FAILED )
//  914   {
//  915     if ( NLME_RestoreFromNV() )
//  916     {
//  917       // Are we a coordinator
//  918       ZDAppNwkAddr.addr.shortAddr = NLME_GetShortAddr();
//  919       if ( ZDAppNwkAddr.addr.shortAddr == 0 )
//  920         ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_COORDINATOR;
//  921       devStartMode = MODE_RESUME;
//  922       osal_cpyExtAddr( ZDO_UseExtendedPANID, _NIB.extendedPANID );
//  923     }
//  924     else
//  925       nvStat = NV_ITEM_UNINIT;
//  926 
//  927     if ( ZG_SECURE_ENABLED )
//  928     {
//  929       nwkFrameCounterChanges = 0;
//  930 
//  931       if ( ZG_BUILD_COORDINATOR_TYPE && ZG_DEVICE_COORDINATOR_TYPE )
//  932       {
//  933         ZDApp_RestoreNwkKey();
//  934       }
//  935     }
//  936 
//  937     // The default for RxOnWhenIdle is true for Routers and false for end devices
//  938     // [setup in the NLME_RestoreFromNV()].  Change it here if you want something
//  939     // other than default.
//  940   }
//  941 
//  942   if ( nvStat == ZSUCCESS )
//  943     return ( ZDO_INITDEV_RESTORED_NETWORK_STATE );
//  944   else
//  945     return ( ZDO_INITDEV_NEW_NETWORK_STATE );
//  946 }
//  947 
//  948 /*********************************************************************
//  949  * @fn      ZDApp_InitUserDesc()
//  950  *
//  951  * @brief   Initialize the User Descriptor, the descriptor is read from NV
//  952  *          when needed.  If you want to initialize the User descriptor to
//  953  *          something other than all zero, do it here.
//  954  *
//  955  * @param   none
//  956  *
//  957  * @return  none
//  958  */
//  959 void ZDApp_InitUserDesc( void )
//  960 {
//  961   UserDescriptorFormat_t ZDO_DefaultUserDescriptor;
//  962 
//  963   // Initialize the User Descriptor, the descriptor is read from NV
//  964   // when needed.  If you want to initialize the User descriptor to something
//  965   // other than all zero, do it here.
//  966   osal_memset( &ZDO_DefaultUserDescriptor, 0, sizeof( UserDescriptorFormat_t ) );
//  967   if ( ZSUCCESS == osal_nv_item_init( ZCD_NV_USERDESC,
//  968          sizeof(UserDescriptorFormat_t), (void*)&ZDO_DefaultUserDescriptor ) )
//  969   {
//  970     if ( ZSUCCESS == osal_nv_read( ZCD_NV_USERDESC, 0,
//  971          sizeof(UserDescriptorFormat_t), (void*)&ZDO_DefaultUserDescriptor ) )
//  972     {
//  973       if ( ZDO_DefaultUserDescriptor.len != 0 )
//  974       {
//  975         ZDO_Config_Node_Descriptor.UserDescAvail = TRUE;
//  976       }
//  977     }
//  978   }
//  979 }
//  980 
//  981 /*********************************************************************
//  982  * @fn      ZDAppCheckForHoldKey()
//  983  *
//  984  * @brief   Check for key to set the device into Hold Auto Start
//  985  *
//  986  * @param   none
//  987  *
//  988  * @return  none
//  989  */
//  990 void ZDAppCheckForHoldKey( void )
//  991 {
//  992 #if (defined HAL_KEY) && (HAL_KEY == TRUE)
//  993   // Get Keypad directly to see if a HOLD_START is needed.
//  994   // Hold down the SW_BYPASS_START key (see OnBoard.h)
//  995   // while booting to avoid starting up the device.
//  996   if ( HalKeyRead () == SW_BYPASS_START)
//  997   {
//  998     // Change the device state to HOLD on start up
//  999     devState = DEV_HOLD;
// 1000   }
// 1001 #endif // HAL_KEY
// 1002 }
// 1003 
// 1004 /*********************************************************************
// 1005  * @fn      ZDApp_ProcessOSALMsg()
// 1006  *
// 1007  * @brief   Process the incoming task message.
// 1008  *
// 1009  * @param   msgPtr - message to process
// 1010  *
// 1011  * @return  none
// 1012  */
// 1013 void ZDApp_ProcessOSALMsg( osal_event_hdr_t *msgPtr )
// 1014 {
// 1015   // Data Confirmation message fields
// 1016   uint8 sentEP;       // This should always be 0
// 1017   uint8 sentStatus;
// 1018   afDataConfirm_t *afDataConfirm;
// 1019   uint8 tmp;
// 1020 
// 1021   switch ( msgPtr->event )
// 1022   {
// 1023     // Incoming ZDO Message
// 1024     case AF_INCOMING_MSG_CMD:
// 1025       ZDP_IncomingData( (afIncomingMSGPacket_t *)msgPtr );
// 1026       break;
// 1027 
// 1028     case ZDO_CB_MSG:
// 1029       ZDApp_ProcessMsgCBs( (zdoIncomingMsg_t *)msgPtr );
// 1030       break;
// 1031 
// 1032     case AF_DATA_CONFIRM_CMD:
// 1033       // This message is received as a confirmation of a data packet sent.
// 1034       // The status is of ZStatus_t type [defined in NLMEDE.h]
// 1035       // The message fields are defined in AF.h
// 1036       afDataConfirm = (afDataConfirm_t *)msgPtr;
// 1037       sentEP = afDataConfirm->endpoint;
// 1038       sentStatus = afDataConfirm->hdr.status;
// 1039 
// 1040       // Action taken when confirmation is received.
// 1041 #if defined ( ZIGBEE_FREQ_AGILITY )
// 1042       if ( pZDNwkMgr_ProcessDataConfirm )
// 1043         pZDNwkMgr_ProcessDataConfirm( afDataConfirm );
// 1044 #endif
// 1045       (void)sentEP;
// 1046       (void)sentStatus;
// 1047       break;
// 1048 
// 1049     case ZDO_NWK_DISC_CNF:
// 1050       if (devState != DEV_NWK_DISC)
// 1051         break;
// 1052 
// 1053       if ( ZG_BUILD_JOINING_TYPE && ZG_DEVICE_JOINING_TYPE )
// 1054       {
// 1055         // Process the network discovery scan results and choose a parent
// 1056         // device to join/rejoin itself
// 1057         networkDesc_t *pChosenNwk;
// 1058         if ( ( (pChosenNwk = ZDApp_NwkDescListProcessing()) != NULL ) && (zdoDiscCounter > NUM_DISC_ATTEMPTS) )
// 1059         {
// 1060           if ( devStartMode == MODE_JOIN )
// 1061           {
// 1062             devState = DEV_NWK_JOINING;
// 1063 
// 1064             ZDApp_NodeProfileSync( pChosenNwk->stackProfile);
// 1065 
// 1066             if ( NLME_JoinRequest( pChosenNwk->extendedPANID, pChosenNwk->panId,
// 1067                                   pChosenNwk->logicalChannel,
// 1068                                   ZDO_Config_Node_Descriptor.CapabilityFlags,
// 1069                                   pChosenNwk->chosenRouter, pChosenNwk->chosenRouterDepth ) != ZSuccess )
// 1070             {
// 1071               ZDApp_NetworkInit( (uint16)(NWK_START_DELAY
// 1072                                           + ((uint16)(osal_rand()& EXTENDED_JOINING_RANDOM_MASK))) );
// 1073             }
// 1074           } // if ( devStartMode == MODE_JOIN )
// 1075           else if ( devStartMode == MODE_REJOIN )
// 1076           {
// 1077             devState = DEV_NWK_REJOIN;
// 1078 
// 1079             // Before trying to do rejoin, check if the device has a valid short address
// 1080             // If not, generate a random short address for itself
// 1081             if ( _NIB.nwkDevAddress == INVALID_NODE_ADDR )
// 1082             {
// 1083               _NIB.nwkDevAddress = osal_rand();
// 1084               ZMacSetReq( ZMacShortAddress, (byte*)&_NIB.nwkDevAddress );
// 1085             }
// 1086 
// 1087             if ( ZG_SECURE_ENABLED )
// 1088             {
// 1089               ZDApp_RestoreNwkKey();
// 1090             }
// 1091 
// 1092             // Check if the device has a valid PanID, if not, set it to the discovered Pan
// 1093             if ( _NIB.nwkPanId == INVALID_PAN_ID )
// 1094             {
// 1095               _NIB.nwkPanId = pChosenNwk->panId;
// 1096               ZMacSetReq( ZMacPanId, (byte*)&(_NIB.nwkPanId) );
// 1097             }
// 1098 
// 1099             tmp = true;
// 1100             ZMacSetReq( ZMacRxOnIdle, &tmp ); // Set receiver always on during rejoin
// 1101             if ( NLME_ReJoinRequest( ZDO_UseExtendedPANID, pChosenNwk->logicalChannel) != ZSuccess )
// 1102             {
// 1103               ZDApp_NetworkInit( (uint16)(NWK_START_DELAY
// 1104                                           + ((uint16)(osal_rand()& EXTENDED_JOINING_RANDOM_MASK))) );
// 1105             }
// 1106           } // else if ( devStartMode == MODE_REJOIN )
// 1107 
// 1108           if ( ZDO_Config_Node_Descriptor.CapabilityFlags & CAPINFO_RCVR_ON_IDLE )
// 1109           {
// 1110             // The receiver is on, turn network layer polling off.
// 1111             NLME_SetPollRate( 0 );
// 1112             NLME_SetQueuedPollRate( 0 );
// 1113             NLME_SetResponseRate( 0 );
// 1114           }
// 1115           else
// 1116           {
// 1117             if ( (ZG_SECURE_ENABLED) && (devStartMode == MODE_JOIN) )
// 1118             {
// 1119               ZDApp_SavedPollRate = zgPollRate;
// 1120               NLME_SetPollRate( zgRejoinPollRate );
// 1121             }
// 1122           }
// 1123         }
// 1124         else
// 1125         {
// 1126           if ( continueJoining )
// 1127           {
// 1128     #if defined ( MANAGED_SCAN )
// 1129             ZDApp_NetworkInit( MANAGEDSCAN_DELAY_BETWEEN_SCANS );
// 1130     #else
// 1131             zdoDiscCounter++;
// 1132             ZDApp_NetworkInit( (uint16)(BEACON_REQUEST_DELAY
// 1133                   + ((uint16)(osal_rand()& BEACON_REQ_DELAY_MASK))) );
// 1134     #endif
// 1135           }
// 1136         }
// 1137       }
// 1138       break;
// 1139 
// 1140     case ZDO_NWK_JOIN_IND:
// 1141       if ( ZG_BUILD_JOINING_TYPE && ZG_DEVICE_JOINING_TYPE )
// 1142       {
// 1143         ZDApp_ProcessNetworkJoin();
// 1144       }
// 1145       break;
// 1146 
// 1147     case ZDO_NWK_JOIN_REQ:
// 1148       if ( ZG_BUILD_JOINING_TYPE && ZG_DEVICE_JOINING_TYPE )
// 1149       {
// 1150         retryCnt = 0;
// 1151         devStartMode = MODE_RESUME;
// 1152         _tmpRejoinState = true;
// 1153         osal_cpyExtAddr( ZDO_UseExtendedPANID, _NIB.extendedPANID );
// 1154         zgDefaultStartingScanDuration = BEACON_ORDER_60_MSEC;
// 1155         ZDApp_NetworkInit( 0 );
// 1156       }
// 1157       break;
// 1158 
// 1159     default:
// 1160       if ( ZG_SECURE_ENABLED )
// 1161         ZDApp_ProcessSecMsg( msgPtr );
// 1162       break;
// 1163   }
// 1164 
// 1165 }
// 1166 
// 1167 /*********************************************************************
// 1168  * @fn      ZDApp_ProcessMsgCBs()
// 1169  *
// 1170  * @brief   Process response messages
// 1171  *
// 1172  * @param   none
// 1173  *
// 1174  * @return  none
// 1175  */
// 1176 void ZDApp_ProcessMsgCBs( zdoIncomingMsg_t *inMsg )
// 1177 {
// 1178   switch ( inMsg->clusterID )
// 1179   {
// 1180 #if defined ( ZDO_NWKADDR_REQUEST ) || defined ( ZDO_IEEEADDR_REQUEST ) || defined ( REFLECTOR )
// 1181     case NWK_addr_rsp:
// 1182     case IEEE_addr_rsp:
// 1183       {
// 1184         ZDO_NwkIEEEAddrResp_t *pAddrRsp;
// 1185         pAddrRsp = ZDO_ParseAddrRsp( inMsg );
// 1186         if ( pAddrRsp )
// 1187         {
// 1188           if ( pAddrRsp->status == ZSuccess )
// 1189           {
// 1190             ZDO_UpdateAddrManager( pAddrRsp->nwkAddr, pAddrRsp->extAddr );
// 1191           }
// 1192           osal_mem_free( pAddrRsp );
// 1193         }
// 1194       }
// 1195       break;
// 1196 #endif
// 1197 
// 1198 #if defined ( REFLECTOR )
// 1199     case Bind_req:
// 1200     case Unbind_req:
// 1201       {
// 1202         ZDO_BindUnbindReq_t bindReq;
// 1203         ZDO_ParseBindUnbindReq( inMsg, &bindReq );
// 1204         ZDO_ProcessBindUnbindReq( inMsg, &bindReq );
// 1205       }
// 1206       break;
// 1207 #endif
// 1208 
// 1209 #if ( ZG_BUILD_COORDINATOR_TYPE )
// 1210     case Bind_rsp:
// 1211     case Unbind_rsp:
// 1212       if (ZG_DEVICE_COORDINATOR_TYPE && matchED)
// 1213       {
// 1214         ZDMatchSendState(
// 1215              (uint8)((inMsg->clusterID == Bind_rsp) ? ZDMATCH_REASON_BIND_RSP : ZDMATCH_REASON_UNBIND_RSP),
// 1216              ZDO_ParseBindRsp(inMsg), inMsg->TransSeq );
// 1217       }
// 1218       break;
// 1219 
// 1220     case End_Device_Bind_req:
// 1221       if (ZG_DEVICE_COORDINATOR_TYPE)
// 1222       {
// 1223         ZDEndDeviceBind_t bindReq;
// 1224         ZDO_ParseEndDeviceBindReq( inMsg, &bindReq );
// 1225         ZDO_MatchEndDeviceBind( &bindReq );
// 1226 
// 1227         // Freeing the cluster lists - if allocated.
// 1228         if ( bindReq.numInClusters )
// 1229           osal_mem_free( bindReq.inClusters );
// 1230         if ( bindReq.numOutClusters )
// 1231           osal_mem_free( bindReq.outClusters );
// 1232       }
// 1233       break;
// 1234 #endif
// 1235   }
// 1236 }
// 1237 
// 1238 /*********************************************************************
// 1239  * @fn      ZDApp_RegisterCBs()
// 1240  *
// 1241  * @brief   Process response messages
// 1242  *
// 1243  * @param   none
// 1244  *
// 1245  * @return  none
// 1246  */
// 1247 void ZDApp_RegisterCBs( void )
// 1248 {
// 1249 #if defined ( ZDO_IEEEADDR_REQUEST ) || defined ( REFLECTOR )
// 1250   ZDO_RegisterForZDOMsg( ZDAppTaskID, IEEE_addr_rsp );
// 1251 #endif
// 1252 #if defined ( ZDO_NWKADDR_REQUEST ) || defined ( REFLECTOR )
// 1253   ZDO_RegisterForZDOMsg( ZDAppTaskID, NWK_addr_rsp );
// 1254 #endif
// 1255 #if ZG_BUILD_COORDINATOR_TYPE
// 1256   ZDO_RegisterForZDOMsg( ZDAppTaskID, Bind_rsp );
// 1257   ZDO_RegisterForZDOMsg( ZDAppTaskID, Unbind_rsp );
// 1258   ZDO_RegisterForZDOMsg( ZDAppTaskID, End_Device_Bind_req );
// 1259 #endif
// 1260 #if defined ( REFLECTOR )
// 1261   ZDO_RegisterForZDOMsg( ZDAppTaskID, Bind_req );
// 1262   ZDO_RegisterForZDOMsg( ZDAppTaskID, Unbind_req );
// 1263 #endif
// 1264 }
// 1265 
// 1266 /*********************************************************************
// 1267  * @fn      ZDApp_ProcessSecMsg()
// 1268  *
// 1269  * @brief   Process the incoming security message.
// 1270  *
// 1271  * @param   msgPtr - message to process
// 1272  *
// 1273  * @return  none
// 1274  */
// 1275 void ZDApp_ProcessSecMsg( osal_event_hdr_t *msgPtr )
// 1276 {
// 1277   switch ( msgPtr->event )
// 1278   {
// 1279     case ZDO_ESTABLISH_KEY_CFM:
// 1280       if ( ZG_CHECK_SECURITY_MODE == ZG_SECURITY_PRO_HIGH )
// 1281       {
// 1282         ZDSecMgrEstablishKeyCfm( (ZDO_EstablishKeyCfm_t*)msgPtr );
// 1283       }
// 1284       break;
// 1285 
// 1286     case ZDO_ESTABLISH_KEY_IND:
// 1287       if ( ZG_CHECK_SECURITY_MODE == ZG_SECURITY_PRO_HIGH )
// 1288       {
// 1289         if ( ZG_BUILD_JOINING_TYPE && ZG_DEVICE_JOINING_TYPE )
// 1290         {
// 1291           ZDSecMgrEstablishKeyInd( (ZDO_EstablishKeyInd_t*)msgPtr );
// 1292         }
// 1293       }
// 1294       break;
// 1295 
// 1296     case ZDO_TRANSPORT_KEY_IND:
// 1297       if ( ZG_BUILD_JOINING_TYPE && ZG_DEVICE_JOINING_TYPE )
// 1298       {
// 1299         ZDSecMgrTransportKeyInd( (ZDO_TransportKeyInd_t*)msgPtr );
// 1300       }
// 1301       break;
// 1302 
// 1303     case ZDO_UPDATE_DEVICE_IND:
// 1304       if ( ZG_BUILD_COORDINATOR_TYPE && ZG_DEVICE_COORDINATOR_TYPE )
// 1305       {
// 1306         ZDSecMgrUpdateDeviceInd( (ZDO_UpdateDeviceInd_t*)msgPtr );
// 1307       }
// 1308       break;
// 1309 
// 1310     case ZDO_REMOVE_DEVICE_IND:
// 1311       if ( ZG_BUILD_RTRONLY_TYPE && ( zgDeviceLogicalType == ZG_DEVICETYPE_ROUTER ) )
// 1312       {
// 1313         ZDSecMgrRemoveDeviceInd( (ZDO_RemoveDeviceInd_t*)msgPtr );
// 1314       }
// 1315       break;
// 1316 
// 1317     case ZDO_REQUEST_KEY_IND:
// 1318       if (( ZG_CHECK_SECURITY_MODE == ZG_SECURITY_PRO_HIGH ) ||
// 1319           ( ZG_CHECK_SECURITY_MODE == ZG_SECURITY_SE_STANDARD ))
// 1320       {
// 1321         if ( ZG_BUILD_COORDINATOR_TYPE && ZG_DEVICE_COORDINATOR_TYPE )
// 1322         {
// 1323           ZDSecMgrRequestKeyInd( (ZDO_RequestKeyInd_t*)msgPtr );
// 1324         }
// 1325       }
// 1326       break;
// 1327 
// 1328     case ZDO_SWITCH_KEY_IND:
// 1329       if ( ZG_BUILD_JOINING_TYPE && ZG_DEVICE_JOINING_TYPE )
// 1330       {
// 1331         ZDSecMgrSwitchKeyInd( (ZDO_SwitchKeyInd_t*)msgPtr );
// 1332       }
// 1333       break;
// 1334 
// 1335     case ZDO_AUTHENTICATE_IND:
// 1336       if ( ZG_CHECK_SECURITY_MODE == ZG_SECURITY_PRO_HIGH )
// 1337       {
// 1338         ZDSecMgrAuthenticateInd( (ZDO_AuthenticateInd_t*)msgPtr );
// 1339       }
// 1340       break;
// 1341 
// 1342     case ZDO_AUTHENTICATE_CFM:
// 1343       if ( ZG_CHECK_SECURITY_MODE == ZG_SECURITY_PRO_HIGH )
// 1344       {
// 1345         ZDSecMgrAuthenticateCfm( (ZDO_AuthenticateCfm_t*)msgPtr );
// 1346       }
// 1347       break;
// 1348 
// 1349     default:
// 1350       // Unsupported messages
// 1351       break;
// 1352   }
// 1353 }
// 1354 
// 1355 /*********************************************************************
// 1356  * @fn      ZDApp_ProcessNetworkJoin()
// 1357  *
// 1358  * @brief
// 1359  *
// 1360  *   Save off the Network key information.
// 1361  *
// 1362  * @param   none
// 1363  *
// 1364  * @return  none
// 1365  */
// 1366 void ZDApp_ProcessNetworkJoin( void )
// 1367 {
// 1368   if ( (devState == DEV_NWK_JOINING) ||
// 1369       ((devState == DEV_NWK_ORPHAN)  &&
// 1370        (ZDO_Config_Node_Descriptor.LogicalType == NODETYPE_ROUTER)) )
// 1371   {
// 1372     // Result of a Join attempt by this device.
// 1373     if ( nwkStatus == ZSuccess )
// 1374     {
// 1375       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
// 1376 
// 1377 #if defined ( POWER_SAVING )
// 1378       osal_pwrmgr_device( PWRMGR_BATTERY );
// 1379 #endif
// 1380 
// 1381       if ( ZG_SECURE_ENABLED && ( ZDApp_RestoreNwkKey() == false ) )
// 1382       {
// 1383         // wait for auth from trust center!!
// 1384         devState = DEV_END_DEVICE_UNAUTH;
// 1385 
// 1386         // Start the reset timer for MAX UNAUTH time
// 1387         ZDApp_ResetTimerStart( 10000 );//MAX_DEVICE_UNAUTH_TIMEOUT );
// 1388       }
// 1389       else
// 1390       {
// 1391         if ( ZSTACK_ROUTER_BUILD )
// 1392         {
// 1393           if ( devState == DEV_NWK_ORPHAN
// 1394             && ZDO_Config_Node_Descriptor.LogicalType != NODETYPE_DEVICE )
// 1395           {
// 1396             // Change NIB state to router for restore
// 1397             _NIB.nwkState = NWK_ROUTER;
// 1398           }
// 1399         }
// 1400 
// 1401         if ( devState == DEV_NWK_JOINING )
// 1402         {
// 1403           ZDApp_AnnounceNewAddress();
// 1404         }
// 1405 
// 1406         devState = DEV_END_DEVICE;
// 1407         if ( ZSTACK_ROUTER_BUILD )
// 1408         {
// 1409           // NOTE: first two parameters are not used, see NLMEDE.h for details
// 1410           if ( ZDO_Config_Node_Descriptor.LogicalType != NODETYPE_DEVICE )
// 1411           {
// 1412             NLME_StartRouterRequest( 0, 0, false );
// 1413           }
// 1414         }
// 1415       }
// 1416     }
// 1417     else
// 1418     {
// 1419       if ( (devStartMode == MODE_RESUME) && (++retryCnt >= MAX_RESUME_RETRY) )
// 1420       {
// 1421         if ( _NIB.nwkPanId == 0xFFFF || _NIB.nwkPanId == INVALID_PAN_ID )
// 1422           devStartMode = MODE_JOIN;
// 1423         else
// 1424         {
// 1425           devStartMode = MODE_REJOIN;
// 1426           _tmpRejoinState = true;
// 1427         }
// 1428       }
// 1429 
// 1430       if ( (NLME_GetShortAddr() != INVALID_NODE_ADDR) ||
// 1431            (_NIB.nwkDevAddress != INVALID_NODE_ADDR) )
// 1432       {
// 1433         uint16 addr = INVALID_NODE_ADDR;
// 1434         // Invalidate nwk addr so end device does not use in its data reqs.
// 1435         _NIB.nwkDevAddress = INVALID_NODE_ADDR;
// 1436         ZMacSetReq( ZMacShortAddress, (uint8 *)&addr );
// 1437       }
// 1438 
// 1439       // Clear the neighbor Table and network discovery tables.
// 1440       nwkNeighborInitTable();
// 1441       NLME_NwkDiscTerm();
// 1442 
// 1443       zdoDiscCounter = 1;
// 1444 
// 1445 //      ZDApp_NetworkInit( (uint16)
// 1446 //                         ((NWK_START_DELAY * (osal_rand() & 0x0F)) +
// 1447 //                          (NWK_START_DELAY * 5)) );
// 1448       ZDApp_NetworkInit( (uint16)(NWK_START_DELAY
// 1449            + ((uint16)(osal_rand()& EXTENDED_JOINING_RANDOM_MASK))) );
// 1450     }
// 1451   }
// 1452   else if ( devState == DEV_NWK_ORPHAN || devState == DEV_NWK_REJOIN )
// 1453   {
// 1454     // results of an orphaning attempt by this device
// 1455     if (nwkStatus == ZSuccess)
// 1456     {
// 1457       if ( ZG_SECURE_ENABLED )
// 1458       {
// 1459         ZDApp_RestoreNwkKey();
// 1460       }
// 1461 
// 1462       devState = DEV_END_DEVICE;
// 1463       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
// 1464       // setup Power Manager Device
// 1465 #if defined ( POWER_SAVING )
// 1466       osal_pwrmgr_device( PWRMGR_BATTERY );
// 1467 #endif
// 1468 
// 1469       if ( ZDO_Config_Node_Descriptor.CapabilityFlags & CAPINFO_RCVR_ON_IDLE )
// 1470       {
// 1471         // The receiver is on, turn network layer polling off.
// 1472         NLME_SetPollRate( 0 );
// 1473         NLME_SetQueuedPollRate( 0 );
// 1474         NLME_SetResponseRate( 0 );
// 1475       }
// 1476 
// 1477       if ( ZSTACK_ROUTER_BUILD )
// 1478       {
// 1479         // NOTE: first two parameters are not used, see NLMEDE.h for details
// 1480         if ( ZDO_Config_Node_Descriptor.LogicalType != NODETYPE_DEVICE )
// 1481         {
// 1482           NLME_StartRouterRequest( 0, 0, false );
// 1483         }
// 1484       }
// 1485 
// 1486       ZDApp_AnnounceNewAddress();
// 1487     }
// 1488     else
// 1489     {
// 1490       if ( devStartMode == MODE_RESUME )
// 1491       {
// 1492         if ( ++retryCnt <= MAX_RESUME_RETRY )
// 1493         {
// 1494           if ( _NIB.nwkPanId == 0xFFFF || _NIB.nwkPanId == INVALID_PAN_ID )
// 1495             devStartMode = MODE_JOIN;
// 1496           else
// 1497           {
// 1498             devStartMode = MODE_REJOIN;
// 1499             _tmpRejoinState = true;
// 1500           }
// 1501         }
// 1502         // Do a normal join to the network after certain times of rejoin retries
// 1503         else if( AIB_apsUseInsecureJoin == true )
// 1504         {
// 1505           devStartMode = MODE_JOIN;
// 1506         }
// 1507       }
// 1508 
// 1509       // Clear the neighbor Table and network discovery tables.
// 1510       nwkNeighborInitTable();
// 1511       NLME_NwkDiscTerm();
// 1512 
// 1513       // setup a retry for later...
// 1514       ZDApp_NetworkInit( (uint16)(NWK_START_DELAY
// 1515            + (osal_rand()& EXTENDED_JOINING_RANDOM_MASK)) );
// 1516     }
// 1517   }
// 1518 #if defined ( ZIGBEE_STOCHASTIC_ADDRESSING )
// 1519   else
// 1520   {
// 1521     // Assume from address conflict
// 1522     if ( _NIB.nwkAddrAlloc == NWK_ADDRESSING_STOCHASTIC )
// 1523     {
// 1524       // Notify the network
// 1525       ZDApp_AnnounceNewAddress();
// 1526 
// 1527       // Notify apps
// 1528       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
// 1529     }
// 1530   }
// 1531 #endif
// 1532 }
// 1533 
// 1534 /*********************************************************************
// 1535  * @fn      ZDApp_SaveNwkKey()
// 1536  *
// 1537  * @brief   Save off the Network key information.
// 1538  *
// 1539  * @param   none
// 1540  *
// 1541  * @return  none
// 1542  */
// 1543 void ZDApp_SaveNwkKey( void )
// 1544 {
// 1545   nwkActiveKeyItems keyItems;
// 1546 
// 1547   SSP_ReadNwkActiveKey( &keyItems );
// 1548   keyItems.frameCounter++;
// 1549 
// 1550   osal_nv_write( ZCD_NV_NWKKEY, 0, sizeof( nwkActiveKeyItems ),
// 1551                 (void *)&keyItems );
// 1552 
// 1553   nwkFrameCounterChanges = 0;
// 1554 
// 1555   // Clear copy in RAM before return.
// 1556   osal_memset( &keyItems, 0x00, sizeof(keyItems) );
// 1557 
// 1558 }
// 1559 
// 1560 /*********************************************************************
// 1561  * @fn      ZDApp_ResetNwkKey()
// 1562  *
// 1563  * @brief   Reset the Network key information in NV.
// 1564  *
// 1565  * @param   none
// 1566  *
// 1567  * @return  none
// 1568  */
// 1569 void ZDApp_ResetNwkKey( void )
// 1570 {
// 1571   nwkActiveKeyItems keyItems;
// 1572 
// 1573   osal_memset( &keyItems, 0, sizeof( nwkActiveKeyItems ) );
// 1574   osal_nv_write( ZCD_NV_NWKKEY, 0, sizeof( nwkActiveKeyItems ),
// 1575                 (void *)&keyItems );
// 1576 }
// 1577 
// 1578 /*********************************************************************
// 1579  * @fn      ZDApp_RestoreNwkKey()
// 1580  *
// 1581  * @brief
// 1582  *
// 1583  *   Save off the Network key information.
// 1584  *
// 1585  * @param   none
// 1586  *
// 1587  * @return  true if restored from NV, false if not
// 1588  */
// 1589 uint8 ZDApp_RestoreNwkKey( void )
// 1590 {
// 1591   nwkActiveKeyItems keyItems;
// 1592   uint8 ret = false;
// 1593 
// 1594   if ( osal_nv_read( ZCD_NV_NWKKEY, 0, sizeof(nwkActiveKeyItems), (void*)&keyItems )
// 1595       == ZSUCCESS )
// 1596   {
// 1597     if ( keyItems.frameCounter > 0 )
// 1598     {
// 1599       // Restore the key information
// 1600       keyItems.frameCounter += MAX_NWK_FRAMECOUNTER_CHANGES;
// 1601       nwkFrameCounter = keyItems.frameCounter;
// 1602       ret = true;
// 1603     }
// 1604 
// 1605     // Force a save for the first frame counter increment
// 1606     nwkFrameCounterChanges = MAX_NWK_FRAMECOUNTER_CHANGES + 1;
// 1607   }
// 1608   // Clear copy in RAM before return.
// 1609   osal_memset( &keyItems, 0x00, sizeof(keyItems) );
// 1610 
// 1611   return ( ret );
// 1612 }
// 1613 
// 1614 /*********************************************************************
// 1615  * @fn      ZDApp_ResetTimerStart
// 1616  *
// 1617  * @brief   Start the reset timer.
// 1618  *
// 1619  * @param   delay - delay time(ms) before reset
// 1620  *
// 1621  * @return  none
// 1622  */
// 1623 void ZDApp_ResetTimerStart( uint16 delay )
// 1624 {
// 1625   // Start the rest timer
// 1626   osal_start_timerEx( ZDAppTaskID, ZDO_DEVICE_RESET, delay );
// 1627 }
// 1628 
// 1629 /*********************************************************************
// 1630  * @fn      ZDApp_ResetTimerCancel
// 1631  *
// 1632  * @brief   Cancel the reset timer.
// 1633  *
// 1634  * @param   none
// 1635  *
// 1636  * @return  none
// 1637  */
// 1638 void ZDApp_ResetTimerCancel( void )
// 1639 {
// 1640   // Cancel the reset timer
// 1641   osal_stop_timerEx( ZDAppTaskID, ZDO_DEVICE_RESET );
// 1642 }
// 1643 
// 1644 /*********************************************************************
// 1645  * @fn      ZDApp_LeaveCtrlInit
// 1646  *
// 1647  * @brief   Initialize the leave control logic.
// 1648  *
// 1649  * @param   none
// 1650  *
// 1651  * @return  none
// 1652  */
// 1653 void ZDApp_LeaveCtrlInit( void )
// 1654 {
// 1655   uint8 status;
// 1656 
// 1657 
// 1658   // Initialize control state
// 1659   ZDApp_LeaveCtrl = ZDAPP_LEAVE_CTRL_INIT;
// 1660 
// 1661   status = osal_nv_item_init( ZCD_NV_LEAVE_CTRL,
// 1662                               sizeof(ZDApp_LeaveCtrl),
// 1663                               &ZDApp_LeaveCtrl );
// 1664 
// 1665   if ( status == ZSUCCESS )
// 1666   {
// 1667     // Read saved control
// 1668     osal_nv_read( ZCD_NV_LEAVE_CTRL,
// 1669                   0,
// 1670                   sizeof( uint8 ),
// 1671                   &ZDApp_LeaveCtrl);
// 1672   }
// 1673 }
// 1674 
// 1675 /*********************************************************************
// 1676  * @fn      ZDApp_LeaveCtrlSet
// 1677  *
// 1678  * @brief   Set the leave control logic.
// 1679  *
// 1680  * @param   ra - reassociate flag
// 1681  *
// 1682  * @return  none
// 1683  */
// 1684 void ZDApp_LeaveCtrlSet( uint8 ra )
// 1685 {
// 1686   ZDApp_LeaveCtrl = ZDAPP_LEAVE_CTRL_SET;
// 1687 
// 1688   if ( ra == TRUE )
// 1689   {
// 1690     ZDApp_LeaveCtrl |= ZDAPP_LEAVE_CTRL_RA;
// 1691   }
// 1692 
// 1693   // Write the leave control
// 1694   osal_nv_write( ZCD_NV_LEAVE_CTRL,
// 1695                  0,
// 1696                  sizeof( uint8 ),
// 1697                  &ZDApp_LeaveCtrl);
// 1698 }
// 1699 
// 1700 /*********************************************************************
// 1701  * @fn      ZDApp_LeaveCtrlReset
// 1702  *
// 1703  * @brief   Re-initialize the leave control logic.
// 1704  *
// 1705  * @param   none
// 1706  *
// 1707  * @return  none
// 1708  */
// 1709 void ZDApp_LeaveCtrlReset( void )
// 1710 {
// 1711   // Set leave control to initialized state
// 1712   ZDApp_LeaveCtrl = ZDAPP_LEAVE_CTRL_INIT;
// 1713 
// 1714   // Write initialized control
// 1715   osal_nv_write( ZCD_NV_LEAVE_CTRL,
// 1716                 0,
// 1717                 sizeof( uint8 ),
// 1718                 &ZDApp_LeaveCtrl);
// 1719 }
// 1720 
// 1721 /*********************************************************************
// 1722  * @fn      ZDApp_LeaveCtrlBypass
// 1723  *
// 1724  * @brief   Check if NV restore should be skipped during a leave reset.
// 1725  *
// 1726  * @param   none
// 1727  *
// 1728  * @return  uint8 - (TRUE bypass:FALSE do not bypass)
// 1729  */
// 1730 uint8 ZDApp_LeaveCtrlBypass( void )
// 1731 {
// 1732   uint8 bypass;
// 1733 
// 1734   if ( ZDApp_LeaveCtrl & ZDAPP_LEAVE_CTRL_SET )
// 1735   {
// 1736     bypass = TRUE;
// 1737   }
// 1738   else
// 1739   {
// 1740     bypass = FALSE;
// 1741   }
// 1742 
// 1743   return bypass;
// 1744 }
// 1745 
// 1746 /*********************************************************************
// 1747  * @fn      ZDApp_LeaveCtrlStartup
// 1748  *
// 1749  * @brief   Check for startup conditions during a leave reset.
// 1750  *
// 1751  * @param   state      - devState_t determined by leave control logic
// 1752  * @param   startDelay - startup delay
// 1753  *
// 1754  * @return  none
// 1755  */
// 1756 void ZDApp_LeaveCtrlStartup( devStates_t* state, uint16* startDelay )
// 1757 {
// 1758   *startDelay = 0;
// 1759 
// 1760   if ( ZDApp_LeaveCtrl & ZDAPP_LEAVE_CTRL_SET )
// 1761   {
// 1762     if ( ZDApp_LeaveCtrl & ZDAPP_LEAVE_CTRL_RA )
// 1763     {
// 1764       *startDelay = LEAVE_RESET_DELAY;
// 1765     }
// 1766     else
// 1767     {
// 1768       *state = DEV_HOLD;
// 1769     }
// 1770 
// 1771     // Reset leave control logic
// 1772     ZDApp_LeaveCtrlReset();
// 1773   }
// 1774 }
// 1775 
// 1776 /*********************************************************************
// 1777  * @fn      ZDApp_LeaveReset
// 1778  *
// 1779  * @brief   Setup a device reset due to a leave indication/confirm.
// 1780  *
// 1781  * @param   ra - reassociate flag
// 1782  *
// 1783  * @return  none
// 1784  */
// 1785 void ZDApp_LeaveReset( uint8 ra )
// 1786 {
// 1787   ZDApp_LeaveCtrlSet( ra );
// 1788 
// 1789   ZDApp_ResetTimerStart( LEAVE_RESET_DELAY );
// 1790 }
// 1791 
// 1792 /*********************************************************************
// 1793  * @fn      ZDApp_LeaveUpdate
// 1794  *
// 1795  * @brief   Update local device data related to leaving device.
// 1796  *
// 1797  * @param   nwkAddr        - NWK address of leaving device
// 1798  * @param   extAddr        - EXT address of leaving device
// 1799  * @param   removeChildren - remove children of leaving device
// 1800  *
// 1801  * @return  none
// 1802  */
// 1803 void ZDApp_LeaveUpdate( uint16 nwkAddr, uint8* extAddr,
// 1804                         uint8 removeChildren )
// 1805 {
// 1806   // Remove Apps Key for leaving device
// 1807   ZDSecMgrDeviceRemoveByExtAddr(extAddr);
// 1808 
// 1809   // Clear SECURITY bit from Address Manager
// 1810   ZDSecMgrAddrClear( extAddr );
// 1811 
// 1812   if ( pbindRemoveDev )
// 1813   {
// 1814     zAddrType_t devAddr;
// 1815 
// 1816     // Remove bind entry and all related data
// 1817     devAddr.addrMode = Addr64Bit;
// 1818     osal_memcpy(devAddr.addr.extAddr, extAddr, Z_EXTADDR_LEN);
// 1819 
// 1820     pbindRemoveDev(&devAddr);
// 1821   }
// 1822 
// 1823   // Remove if child
// 1824   if ( ZSTACK_ROUTER_BUILD )
// 1825   {
// 1826     NLME_RemoveChild( extAddr, removeChildren );
// 1827   }
// 1828 
// 1829   // Remove Routing table related entry
// 1830   RTG_RemoveRtgEntry( nwkAddr, 0 );
// 1831 
// 1832   // Remove entry from neighborTable
// 1833   nwkNeighborRemove( nwkAddr, _NIB.nwkPanId );
// 1834 
// 1835   // Schedule to save data to NV
// 1836   ZDApp_NwkWriteNVRequest();
// 1837 }
// 1838 
// 1839 /*********************************************************************
// 1840  * @fn      ZDApp_NetworkDiscoveryReq
// 1841  *
// 1842  * @brief   Request a network discovery.
// 1843  *
// 1844  * @param  scanChannels -
// 1845  * @param  scanDuration -
// 1846  *
// 1847  * @return  ZStatus_t
// 1848  */
// 1849 ZStatus_t ZDApp_NetworkDiscoveryReq( uint32 scanChannels, uint8 scanDuration)
// 1850 {
// 1851   // Setup optional filters - tbd
// 1852 
// 1853   // Request NLME network discovery
// 1854   return NLME_NetworkDiscoveryRequest(scanChannels, scanDuration);
// 1855 }
// 1856 
// 1857 /*********************************************************************
// 1858  * @fn      ZDApp_JoinReq
// 1859  *
// 1860  * @brief   Request the device to join a parent in a network.
// 1861  *
// 1862  * @param   channel -
// 1863  * @param   panID -
// 1864  *
// 1865  * @return  ZStatus_t
// 1866  */
// 1867 ZStatus_t ZDApp_JoinReq( uint8 channel, uint16 panID, uint8 *extendedPanID,
// 1868                          uint16 chosenParent, uint8 parentDepth, uint8 stackProfile )
// 1869 {
// 1870   // Sync up the node with the stack profile (In the case where a pro device
// 1871   // joins a non-pro network, or verse versa)
// 1872   ZDApp_NodeProfileSync( stackProfile);
// 1873 
// 1874   // Request NLME Join Request
// 1875   return NLME_JoinRequest(extendedPanID, panID,channel,
// 1876                           ZDO_Config_Node_Descriptor.CapabilityFlags,
// 1877                           chosenParent, parentDepth);
// 1878 
// 1879 }
// 1880 
// 1881 /*********************************************************************
// 1882  * @fn      ZDApp_DeviceConfigured
// 1883  *
// 1884  * @brief   Check to see if the local device is configured (i.e., part
// 1885  *          of a network).
// 1886  *
// 1887  * @param   none
// 1888  *
// 1889  * @return  TRUE if configured. FALSE, otherwise.
// 1890  */
// 1891 uint8 ZDApp_DeviceConfigured( void )
// 1892 {
// 1893   uint16 nwkAddr = INVALID_NODE_ADDR;
// 1894 
// 1895   osal_nv_read( ZCD_NV_NIB, osal_offsetof( nwkIB_t, nwkDevAddress ),
// 1896                 sizeof( uint16), &nwkAddr );
// 1897 
// 1898   // Does the NIB have anything more than default?
// 1899   return ( nwkAddr == INVALID_NODE_ADDR ? FALSE : TRUE );
// 1900 }
// 1901 
// 1902 /*********************************************************************
// 1903  * CALLBACK FUNCTIONS
// 1904  */
// 1905 
// 1906 
// 1907 /*********************************************************************
// 1908  * @fn      ZDApp_SendEventMsg()
// 1909  *
// 1910  * @brief
// 1911  *
// 1912  *   Sends a Network Join message
// 1913  *
// 1914  * @param  cmd - command ID
// 1915  * @param  len - length (in bytes) of the buf field
// 1916  * @param  buf - buffer for the rest of the message.
// 1917  *
// 1918  * @return  none
// 1919  */
// 1920 void ZDApp_SendEventMsg( uint8 cmd, uint8 len, uint8 *buf )
// 1921 {
// 1922   ZDApp_SendMsg( ZDAppTaskID, cmd, len, buf );
// 1923 }
// 1924 
// 1925 /*********************************************************************
// 1926  * @fn      ZDApp_SendMsg()
// 1927  *
// 1928  * @brief   Sends a OSAL message
// 1929  *
// 1930  * @param  taskID - Where to send the message
// 1931  * @param  cmd - command ID
// 1932  * @param  len - length (in bytes) of the buf field
// 1933  * @param  buf - buffer for the rest of the message.
// 1934  *
// 1935  * @return  none
// 1936  */
// 1937 void ZDApp_SendMsg( uint8 taskID, uint8 cmd, uint8 len, uint8 *buf )
// 1938 {
// 1939   osal_event_hdr_t *msgPtr;
// 1940 
// 1941   // Send the address to the task
// 1942   msgPtr = (osal_event_hdr_t *)osal_msg_allocate( len );
// 1943   if ( msgPtr )
// 1944   {
// 1945     if ( (len > 0) && (buf != NULL) )
// 1946       osal_memcpy( msgPtr, buf, len );
// 1947 
// 1948     msgPtr->event = cmd;
// 1949     osal_msg_send( taskID, (uint8 *)msgPtr );
// 1950   }
// 1951 }
// 1952 
// 1953 /*********************************************************************
// 1954  * Call Back Functions from NWK  - API
// 1955  */
// 1956 
// 1957 /*********************************************************************
// 1958  * @fn          ZDO_NetworkDiscoveryConfirmCB
// 1959  *
// 1960  * @brief       This function returns a choice of PAN to join.
// 1961  *
// 1962  * @param       status - return status of the nwk discovery confirm
// 1963  *
// 1964  * @return      ZStatus_t
// 1965  */
// 1966 ZStatus_t ZDO_NetworkDiscoveryConfirmCB(uint8 status)
// 1967 {
// 1968   osal_event_hdr_t msg;
// 1969 
// 1970   // If Scan is initiated by ZDO_MGMT_NWK_DISC_REQ
// 1971   // Send ZDO_MGMT_NWK_DISC_RSP back
// 1972 #if defined ( ZDO_MGMT_NWKDISC_RESPONSE )
// 1973   if ( zdappMgmtNwkDiscReqInProgress )
// 1974   {
// 1975     zdappMgmtNwkDiscReqInProgress = false;
// 1976     ZDO_FinishProcessingMgmtNwkDiscReq();
// 1977   }
// 1978   else
// 1979 #endif
// 1980   {
// 1981     // Pass the confirm to another task if it registers the callback
// 1982     // Otherwise, pass the confirm to ZDApp.
// 1983     if (zdoCBFunc[ZDO_NWK_DISCOVERY_CNF_CBID] != NULL )
// 1984     {
// 1985       zdoCBFunc[ZDO_NWK_DISCOVERY_CNF_CBID]( (void*)&status );
// 1986     }
// 1987     else
// 1988     {
// 1989       // Otherwise, send scan confirm to ZDApp task to proceed
// 1990       msg.status = ZDO_SUCCESS;
// 1991       ZDApp_SendMsg( ZDAppTaskID, ZDO_NWK_DISC_CNF, sizeof(osal_event_hdr_t), (uint8 *)&msg );
// 1992     }
// 1993   }
// 1994   return (ZSuccess);
// 1995 }  // ZDO_NetworkDiscoveryConfirmCB
// 1996 
// 1997 /*********************************************************************
// 1998  * @fn          ZDApp_NwkDescListProcessing
// 1999  *
// 2000  * @brief       This function process the network discovery result and select
// 2001  *              a parent device to join itself.
// 2002  *
// 2003  * @param       none
// 2004  *
// 2005  * @return      ZStatus_t
// 2006  */
// 2007 #define STACK_PROFILE_MAX 2
// 2008 networkDesc_t* ZDApp_NwkDescListProcessing(void)
// 2009 {
// 2010   networkDesc_t *pNwkDesc;
// 2011   uint8 i, ResultCount = 0;
// 2012   uint8 stackProfile;
// 2013   uint8 stackProfilePro;
// 2014   uint8 selected;
// 2015 
// 2016   // Count the number of nwk descriptors in the list
// 2017   pNwkDesc = nwk_getNwkDescList();
// 2018   while (pNwkDesc)
// 2019   {
// 2020     ResultCount++;
// 2021     pNwkDesc = pNwkDesc->nextDesc;
// 2022   }
// 2023 
// 2024   // process discovery results
// 2025   stackProfilePro = FALSE;
// 2026   selected = FALSE;
// 2027 
// 2028 
// 2029   for ( stackProfile = 0; stackProfile < STACK_PROFILE_MAX; stackProfile++ )
// 2030   {
// 2031     pNwkDesc = nwk_getNwkDescList();
// 2032     for ( i = 0; i < ResultCount; i++, pNwkDesc = pNwkDesc->nextDesc )
// 2033     {
// 2034       if ( zgConfigPANID != 0xFFFF )
// 2035       {
// 2036         // PAN Id is preconfigured. check if it matches
// 2037         if ( pNwkDesc->panId != zgConfigPANID )
// 2038           continue;
// 2039       }
// 2040 
// 2041       if ( nwk_ExtPANIDValid( ZDO_UseExtendedPANID) == true )
// 2042       {
// 2043         // If the extended Pan ID is commissioned to a non zero value
// 2044         // Only join the Pan that has match EPID
// 2045         if ( osal_ExtAddrEqual( ZDO_UseExtendedPANID, pNwkDesc->extendedPANID) == false )
// 2046           continue;
// 2047 
// 2048       }
// 2049 
// 2050       // check that network is allowing joining
// 2051       if ( ZSTACK_ROUTER_BUILD )
// 2052       {
// 2053         if ( stackProfilePro == FALSE )
// 2054         {
// 2055           if ( !pNwkDesc->routerCapacity )
// 2056           {
// 2057             continue;
// 2058           }
// 2059         }
// 2060         else
// 2061         {
// 2062           if ( !pNwkDesc->deviceCapacity )
// 2063           {
// 2064             continue;
// 2065           }
// 2066         }
// 2067       }
// 2068       else if ( ZSTACK_END_DEVICE_BUILD )
// 2069       {
// 2070         if ( !pNwkDesc->deviceCapacity )
// 2071         {
// 2072           continue;
// 2073         }
// 2074       }
// 2075 
// 2076       // check version of zigbee protocol
// 2077       if ( pNwkDesc->version != _NIB.nwkProtocolVersion )
// 2078         continue;
// 2079 
// 2080       // check version of stack profile
// 2081       if ( pNwkDesc->stackProfile != zgStackProfile  )
// 2082       {
// 2083         if ( ((zgStackProfile == HOME_CONTROLS) && (pNwkDesc->stackProfile == ZIGBEEPRO_PROFILE))
// 2084             || ((zgStackProfile == ZIGBEEPRO_PROFILE) && (pNwkDesc->stackProfile == HOME_CONTROLS))  )
// 2085         {
// 2086           stackProfilePro = TRUE;
// 2087         }
// 2088 
// 2089         if ( stackProfile == 0 )
// 2090         {
// 2091           continue;
// 2092         }
// 2093       }
// 2094 
// 2095       break;
// 2096     }
// 2097 
// 2098     if (i < ResultCount)
// 2099     {
// 2100      selected = TRUE;
// 2101       break;
// 2102     }
// 2103 
// 2104     // break if selected or stack profile pro wasn't found
// 2105     if ( (selected == TRUE) || (stackProfilePro == FALSE) )
// 2106     {
// 2107       break;
// 2108     }
// 2109   }
// 2110 
// 2111   if ( i == ResultCount )
// 2112   {
// 2113     return (NULL);   // couldn't find appropriate PAN to join !
// 2114   }
// 2115   else
// 2116   {
// 2117     return (pNwkDesc);
// 2118   }
// 2119 }// ZDApp_NwkDescListProcessing()
// 2120 
// 2121 /*********************************************************************
// 2122  * @fn          ZDO_NetworkFormationConfirmCB
// 2123  *
// 2124  * @brief       This function reports the results of the request to
// 2125  *              initialize a coordinator in a network.
// 2126  *
// 2127  * @param       Status - Result of NLME_NetworkFormationRequest()
// 2128  *
// 2129  * @return      none
// 2130  */
// 2131 void ZDO_NetworkFormationConfirmCB( ZStatus_t Status )
// 2132 {
// 2133   nwkStatus = (byte)Status;
// 2134 
// 2135   if ( Status == ZSUCCESS )
// 2136   {
// 2137     // LED on shows Coordinator started
// 2138     HalLedSet ( HAL_LED_3, HAL_LED_MODE_ON );
// 2139 
// 2140     // LED off forgets HOLD_AUTO_START
// 2141     HalLedSet (HAL_LED_4, HAL_LED_MODE_OFF);
// 2142 
// 2143 #if defined ( ZBIT )
// 2144     SIM_SetColor(0xd0ffd0);
// 2145 #endif
// 2146 
// 2147     if ( devState == DEV_HOLD )
// 2148     {
// 2149       // Began with HOLD_AUTO_START
// 2150       devState = DEV_COORD_STARTING;
// 2151     }
// 2152   }
// 2153 #if defined(BLINK_LEDS)
// 2154   else
// 2155   {
// 2156     HalLedSet ( HAL_LED_3, HAL_LED_MODE_FLASH );  // Flash LED to show failure
// 2157   }
// 2158 #endif
// 2159 
// 2160   osal_set_event( ZDAppTaskID, ZDO_NETWORK_START );
// 2161 }
// 2162 
// 2163 /****************************************************************************
// 2164  * @fn          ZDApp_beaconIndProcessing
// 2165  *
// 2166  * @brief       This function processes the incoming beacon indication.
// 2167  *
// 2168  *              When another task (MT or App) is registered to process
// 2169  *              beacon indication themselves, this function will parse the
// 2170  *              beacon payload and pass the beacon descriptor to that task
// 2171  *              If no other tasks registered, this function will process
// 2172  *              the beacon payload and generate the network descriptor link
// 2173  *              list.
// 2174  *
// 2175  * @param
// 2176  *
// 2177  * @return      none
// 2178  *
// 2179  */
// 2180 void ZDO_beaconNotifyIndCB( NLME_beaconInd_t *pBeacon )
// 2181 {
// 2182   // Pass the beacon Indication to another task if it registers the callback
// 2183   // Otherwise, process the beacon notification here.
// 2184   if (zdoCBFunc[ZDO_BEACON_NOTIFY_IND_CBID] != NULL )
// 2185   {
// 2186     zdoCBFunc[ZDO_BEACON_NOTIFY_IND_CBID]( (void*)pBeacon );
// 2187   }
// 2188   else
// 2189   {
// 2190     networkDesc_t *pNwkDesc;
// 2191     networkDesc_t *pLastNwkDesc;
// 2192     uint8 found = false;
// 2193 
// 2194     // Add the network to the Network Descriptor List
// 2195     pNwkDesc = NwkDescList;
// 2196     pLastNwkDesc = NwkDescList;
// 2197     while (pNwkDesc)
// 2198     {
// 2199       if ((pNwkDesc->panId == pBeacon->panID) &&
// 2200           (pNwkDesc->logicalChannel == pBeacon->logicalChannel))
// 2201       {
// 2202         found = true;
// 2203         break;
// 2204       }
// 2205       pLastNwkDesc = pNwkDesc;
// 2206       pNwkDesc = pNwkDesc->nextDesc;
// 2207     }
// 2208 
// 2209     // If no existing descriptor found, make a new one and add to the list
// 2210     if (found == false)
// 2211     {
// 2212       pNwkDesc = osal_mem_alloc( sizeof(networkDesc_t)  );
// 2213       if ( !pNwkDesc )
// 2214       {
// 2215         // Memory alloc failed, discard this beacon
// 2216         return;
// 2217       }
// 2218 
// 2219       // Clear the network descriptor
// 2220       osal_memset( pNwkDesc, 0, sizeof(networkDesc_t)  );
// 2221 
// 2222       // Initialize the descriptor
// 2223       pNwkDesc->chosenRouter = INVALID_NODE_ADDR;
// 2224       pNwkDesc->chosenRouterDepth = 0xFF;
// 2225 
// 2226       // Save new entry into the descriptor list
// 2227       if ( !NwkDescList )
// 2228       {
// 2229         NwkDescList = pNwkDesc;
// 2230       }
// 2231       else
// 2232       {
// 2233         pLastNwkDesc->nextDesc = pNwkDesc;
// 2234       }
// 2235     }
// 2236 
// 2237     // Update the descriptor with the incoming beacon
// 2238     pNwkDesc->stackProfile   = pBeacon->stackProfile;
// 2239     pNwkDesc->version        = pBeacon->protocolVersion;
// 2240     pNwkDesc->logicalChannel = pBeacon->logicalChannel;
// 2241     pNwkDesc->panId          = pBeacon->panID;
// 2242     pNwkDesc->updateId       = pBeacon->updateID;
// 2243 
// 2244     // Save the extended PAN ID from the beacon payload only if 1.1 version network
// 2245     if ( pBeacon->protocolVersion != ZB_PROT_V1_0 )
// 2246     {
// 2247       osal_cpyExtAddr( pNwkDesc->extendedPANID, pBeacon->extendedPanID );
// 2248     }
// 2249     else
// 2250     {
// 2251       osal_memset( pNwkDesc->extendedPANID, 0xFF, Z_EXTADDR_LEN );
// 2252     }
// 2253 
// 2254     // check if this device is a better choice to join...
// 2255     // ...dont bother checking assocPermit flag is doing a rejoin
// 2256     if ( ( pBeacon->LQI > gMIN_TREE_LINK_COST ) &&
// 2257         ( ( pBeacon->permitJoining == TRUE ) || ( _tmpRejoinState ) ) )
// 2258     {
// 2259       uint8 selected = FALSE;
// 2260       uint8 capacity = FALSE;
// 2261 
// 2262       if ( _NIB.nwkAddrAlloc == NWK_ADDRESSING_STOCHASTIC )
// 2263       {
// 2264         if ( ((pBeacon->LQI   > pNwkDesc->chosenRouterLinkQuality) &&
// 2265               (pBeacon->depth < MAX_NODE_DEPTH)) ||
// 2266             ((pBeacon->LQI   == pNwkDesc->chosenRouterLinkQuality) &&
// 2267              (pBeacon->depth < pNwkDesc->chosenRouterDepth)) )
// 2268         {
// 2269           selected = TRUE;
// 2270         }
// 2271       }
// 2272       else
// 2273       {
// 2274         if ( pBeacon->depth < pNwkDesc->chosenRouterDepth )
// 2275         {
// 2276           selected = TRUE;
// 2277         }
// 2278       }
// 2279 
// 2280       if ( ZSTACK_ROUTER_BUILD )
// 2281       {
// 2282         capacity = pBeacon->routerCapacity;
// 2283       }
// 2284       else if ( ZSTACK_END_DEVICE_BUILD )
// 2285       {
// 2286         capacity = pBeacon->deviceCapacity;
// 2287       }
// 2288 
// 2289       if ( (capacity) && (selected) )
// 2290       {
// 2291         // this is the new chosen router for joining...
// 2292         pNwkDesc->chosenRouter            = pBeacon->sourceAddr;
// 2293         pNwkDesc->chosenRouterLinkQuality = pBeacon->LQI;
// 2294         pNwkDesc->chosenRouterDepth       = pBeacon->depth;
// 2295       }
// 2296 
// 2297       if ( pBeacon->deviceCapacity )
// 2298         pNwkDesc->deviceCapacity = 1;
// 2299 
// 2300       if ( pBeacon->routerCapacity )
// 2301         pNwkDesc->routerCapacity = 1;
// 2302     }
// 2303   }
// 2304 }
// 2305 
// 2306 /*********************************************************************
// 2307  * @fn          ZDO_StartRouterConfirmCB
// 2308  *
// 2309  * @brief       This function reports the results of the request to
// 2310  *              start functioning as a router in a network.
// 2311  *
// 2312  * @param       Status - Result of NLME_StartRouterRequest()
// 2313  *
// 2314  * @return      none
// 2315  */
// 2316 void ZDO_StartRouterConfirmCB( ZStatus_t Status )
// 2317 {
// 2318   nwkStatus = (byte)Status;
// 2319 
// 2320   if ( Status == ZSUCCESS )
// 2321   {
// 2322     // LED on shows Router started
// 2323     HalLedSet ( HAL_LED_3, HAL_LED_MODE_ON );
// 2324     // LED off forgets HOLD_AUTO_START
// 2325     HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF);
// 2326     if ( devState == DEV_HOLD )
// 2327     {
// 2328       // Began with HOLD_AUTO_START
// 2329       devState = DEV_END_DEVICE;
// 2330     }
// 2331   }
// 2332 #if defined(BLINK_LEDS)
// 2333   else
// 2334   {
// 2335     HalLedSet( HAL_LED_3, HAL_LED_MODE_FLASH );  // Flash LED to show failure
// 2336   }
// 2337 #endif
// 2338 
// 2339   osal_set_event( ZDAppTaskID, ZDO_ROUTER_START );
// 2340 }
// 2341 
// 2342 /*********************************************************************
// 2343  * @fn          ZDO_JoinConfirmCB
// 2344  *
// 2345  * @brief       This function allows the next hight layer to be notified
// 2346  *              of the results of its request to join itself or another
// 2347  *              device to a network.
// 2348  *
// 2349  * @param       Status - Result of NLME_JoinRequest()
// 2350  *
// 2351  * @return      none
// 2352  */
// 2353 void ZDO_JoinConfirmCB( uint16 PanId, ZStatus_t Status )
// 2354 {
// 2355   (void)PanId;  // remove if this parameter is used.
// 2356 
// 2357   nwkStatus = (byte)Status;
// 2358 
// 2359   if ( Status == ZSUCCESS )
// 2360   {
// 2361     // LED on shows device joined
// 2362     HalLedSet ( HAL_LED_3, HAL_LED_MODE_ON );
// 2363     // LED off forgets HOLD_AUTO_START
// 2364     HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF);
// 2365     if ( (devState == DEV_HOLD) )
// 2366     {
// 2367       // Began with HOLD_AUTO_START
// 2368       devState = DEV_NWK_JOINING;
// 2369     }
// 2370 
// 2371     if ( !ZG_SECURE_ENABLED )
// 2372     {
// 2373       // Notify to save info into NV
// 2374       ZDApp_NVUpdate();
// 2375     }
// 2376   }
// 2377   else
// 2378   {
// 2379 #if defined(BLINK_LEDS)
// 2380     HalLedSet ( HAL_LED_3, HAL_LED_MODE_FLASH );  // Flash LED to show failure
// 2381 #endif
// 2382   }
// 2383 
// 2384   // Pass the join confirm to higher layer if callback registered
// 2385   if (zdoCBFunc[ZDO_JOIN_CNF_CBID] != NULL )
// 2386   {
// 2387     zdoJoinCnf_t joinCnf;
// 2388 
// 2389     joinCnf.status = Status;
// 2390     joinCnf.deviceAddr = _NIB.nwkDevAddress;
// 2391     joinCnf.parentAddr = _NIB.nwkCoordAddress;
// 2392 
// 2393     zdoCBFunc[ZDO_JOIN_CNF_CBID]( (void*)&joinCnf );
// 2394   }
// 2395 
// 2396   // Notify ZDApp
// 2397   ZDApp_SendMsg( ZDAppTaskID, ZDO_NWK_JOIN_IND, sizeof(osal_event_hdr_t), (byte*)NULL );
// 2398 
// 2399 }
// 2400 
// 2401 /*********************************************************************
// 2402  * @fn          ZDO_AddrChangeIndicationCB
// 2403  *
// 2404  * @brief       This function notifies the application that this
// 2405  *              device's address has changed.  Could happen in
// 2406  *              a network with stochastic addressing (PRO).
// 2407  *
// 2408  * @param       newAddr - the new address
// 2409  *
// 2410  * @return      none
// 2411  */
// 2412 void ZDO_AddrChangeIndicationCB( uint16 newAddr )
// 2413 {
// 2414   ZDO_AddrChangeInd_t *pZDOAddrChangeMsg;
// 2415   epList_t *pItem = epList;
// 2416 
// 2417   // Notify to save info into NV
// 2418   ZDApp_NVUpdate();
// 2419 
// 2420   // Notify the applications
// 2421   osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
// 2422 
// 2423   while (pItem != NULL)
// 2424   {
// 2425     if (pItem->epDesc->endPoint != ZDO_EP)
// 2426     {
// 2427       pZDOAddrChangeMsg = (ZDO_AddrChangeInd_t *)osal_msg_allocate( sizeof( ZDO_AddrChangeInd_t ) );
// 2428       if (pZDOAddrChangeMsg != NULL)
// 2429       {
// 2430         pZDOAddrChangeMsg->hdr.event = ZDO_ADDR_CHANGE_IND;
// 2431         pZDOAddrChangeMsg->shortAddr = newAddr;
// 2432         osal_msg_send( *(pItem->epDesc->task_id), (uint8 *)pZDOAddrChangeMsg );
// 2433       }
// 2434     }
// 2435     pItem = pItem->nextDesc;
// 2436   }
// 2437 
// 2438   // Send out a device announce
// 2439   ZDApp_AnnounceNewAddress();
// 2440 }
// 2441 
// 2442 /*********************************************************************
// 2443  * @fn          ZDO_JoinIndicationCB
// 2444  *
// 2445  * @brief       This function allows the next higher layer of a
// 2446  *              coordinator to be notified of a remote join request.
// 2447  *
// 2448  * @param       ShortAddress - 16-bit address
// 2449  * @param       ExtendedAddress - IEEE (64-bit) address
// 2450  * @param       CapabilityFlags - Association Capability Flags
// 2451  * @param       type - of joining -
// 2452  *                          NWK_ASSOC_JOIN
// 2453  *                          NWK_ASSOC_REJOIN_UNSECURE
// 2454  *                          NWK_ASSOC_REJOIN_SECURE
// 2455  *
// 2456  * @return      ZStatus_t
// 2457  */
// 2458 ZStatus_t ZDO_JoinIndicationCB(uint16 ShortAddress, uint8 *ExtendedAddress,
// 2459                                 uint8 CapabilityFlags, uint8 type)
// 2460 {
// 2461   (void)ShortAddress;
// 2462   (void)ExtendedAddress;
// 2463 #if ZDO_NV_SAVE_RFDs
// 2464   (void)CapabilityFlags;
// 2465 
// 2466 #else  // if !ZDO_NV_SAVE_RFDs
// 2467   if (CapabilityFlags & CAPINFO_DEVICETYPE_FFD)
// 2468 #endif
// 2469   {
// 2470     ZDApp_NVUpdate();  // Notify to save info into NV.
// 2471   }
// 2472 
// 2473   if (ZG_SECURE_ENABLED)  // Send notification to TC of new device.
// 2474   {
// 2475     if (type == NWK_ASSOC_JOIN || type == NWK_ASSOC_REJOIN_UNSECURE)
// 2476     {
// 2477       osal_start_timerEx( ZDAppTaskID, ZDO_NEW_DEVICE, 600 );
// 2478     }
// 2479   }
// 2480 
// 2481   return ZSuccess;
// 2482 }
// 2483 
// 2484 /*********************************************************************
// 2485  * @fn          ZDO_ConcentratorIndicationCB
// 2486  *
// 2487  * @brief       This function allows the next higher layer of a
// 2488  *              device to be notified of existence of the concentrator.
// 2489  *
// 2490  * @param       nwkAddr - 16-bit NWK address of the concentrator
// 2491  * @param       extAddr - pointer to extended Address
// 2492  *                        NULL if not available
// 2493  * @param       pktCost - PktCost from RREQ
// 2494  *
// 2495  * @return      void
// 2496  */

        RSEG CODE:CODE:NOROOT(1)
?Subroutine2:
          CFI Block cfiBlock17 Using cfiCommon0
          CFI NoFunction
          CFI CFA SP+10
// 2497 void ZDO_ConcentratorIndicationCB( uint16 nwkAddr, uint8 *extAddr, uint8 pktCost )
// 2498 {
// 2499   zdoConcentratorInd_t conInd;
// 2500 
// 2501   conInd.nwkAddr = nwkAddr;
// 2502   conInd.extAddr = extAddr;
// 2503   conInd.pktCost = pktCost;
// 2504 
// 2505   if( zdoCBFunc[ZDO_CONCENTRATOR_IND_CBID] != NULL )
// 2506   {
// 2507     zdoCBFunc[ZDO_CONCENTRATOR_IND_CBID]( (void*)&conInd );
// 2508   }
// 2509 }
        ADD.W   #0x6, SP
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock17

        RSEG CODE:CODE:NOROOT(1)
ZDApp_CoordStartPANIDConflictCB:
          CFI Block cfiBlock18 Using cfiCommon0
          CFI Function ZDApp_CoordStartPANIDConflictCB
        ADD.W   #0x1, R12
        RETA
          CFI EndBlock cfiBlock18

        RSEG CODE:CODE:NOROOT(1)
ZDApp_NVUpdate:
          CFI Block cfiBlock19 Using cfiCommon0
          CFI Function ZDApp_NVUpdate
        RETA
          CFI EndBlock cfiBlock19

        RSEG CODE:CODE:NOROOT(1)
ZDApp_AnnounceNewAddress:
          CFI Block cfiBlock20 Using cfiCommon0
          CFI Function ZDApp_AnnounceNewAddress
        FUNCALL ZDApp_AnnounceNewAddress, APSME_HoldDataRequests
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_AnnounceNewAddress, NLME_GetExtAddr
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_AnnounceNewAddress, NLME_GetShortAddr
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_AnnounceNewAddress, ZDP_DeviceAnnce
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_AnnounceNewAddress, APSME_HoldDataRequests
        LOCFRAME CSTACK, 6, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        MOV.W   #0x0, R12
        CALLA   #APSME_HoldDataRequests
        CALLA   #NLME_GetExtAddr
        MOV.W   R12, R10
        CALLA   #NLME_GetShortAddr
        MOV.B   #0x0, R15
        MOV.B   &ZDO_Config_Node_Descriptor + 2, R14
        MOV.W   R10, R13
        CALLA   #ZDP_DeviceAnnce
        MOV.W   #0x0, R12
        CALLA   #APSME_HoldDataRequests
        POP.W   R10
          CFI R10L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock20

        RSEG CODE:CODE:NOROOT(1)
ZDApp_StopJoiningCycle:
          CFI Block cfiBlock21 Using cfiCommon0
          CFI Function ZDApp_StopJoiningCycle
        CMP.B   #0x1, &devState
        JEQ     ??ZDApp_StopJoiningCycle_0
        CMP.B   #0x2, &devState
        JNE     ??ZDApp_StopJoiningCycle_1
??ZDApp_StopJoiningCycle_0:
        MOV.B   #0x0, &continueJoining
        MOV.B   #0x1, R12
        RETA
??ZDApp_StopJoiningCycle_1:
        MOV.B   #0x0, R12
        RETA
          CFI EndBlock cfiBlock21

        RSEG CODE:CODE:NOROOT(1)
ZDApp_StartJoiningCycle:
          CFI Block cfiBlock22 Using cfiCommon0
          CFI Function ZDApp_StartJoiningCycle
        FUNCALL ZDApp_StartJoiningCycle, ZDApp_NetworkInit
        LOCFRAME CSTACK, 4, STACK
        CMP.B   #0x1, &devState
        JEQ     ??ZDApp_StartJoiningCycle_0
        CMP.B   #0x2, &devState
        JNE     ??ZDApp_StartJoiningCycle_1
??ZDApp_StartJoiningCycle_0:
        MOV.B   #0x1, &continueJoining
        MOV.W   #0x0, R12
        CALLA   #ZDApp_NetworkInit
        MOV.B   #0x1, R12
        RETA
??ZDApp_StartJoiningCycle_1:
        MOV.B   #0x0, R12
        RETA
          CFI EndBlock cfiBlock22

        RSEG CODE:CODE:NOROOT(1)
ZDApp_NodeProfileSync:
          CFI Block cfiBlock23 Using cfiCommon0
          CFI Function ZDApp_NodeProfileSync
        FUNCALL ZDApp_NodeProfileSync, NLME_SetBroadcastFilter
        LOCFRAME CSTACK, 4, STACK
        BIT.B   #0x2, &ZDO_Config_Node_Descriptor + 2
        JNC     ??ZDApp_NodeProfileSync_0
        CMP.B   &zgStackProfile, R12
        JEQ     ??ZDApp_NodeProfileSync_0
        MOV.B   &ZDO_Config_Node_Descriptor, R14
        AND.B   #0xf8, R14
        BIS.B   #0x2, R14
        MOV.B   R14, &ZDO_Config_Node_Descriptor
        MOV.B   #0xc, &ZDO_Config_Node_Descriptor + 2
        MOV.B   #0xc, R12
        CALLA   #NLME_SetBroadcastFilter
??ZDApp_NodeProfileSync_0:
        RETA
          CFI EndBlock cfiBlock23

        RSEG CODE:CODE:NOROOT(1)
ZDApp_NwkStateUpdateCB:
          CFI Block cfiBlock24 Using cfiCommon0
          CFI Function ZDApp_NwkStateUpdateCB
        FUNCALL ZDApp_NwkStateUpdateCB, osal_get_timeoutEx
        LOCFRAME CSTACK, 4, STACK
        MOV.W   #0x200, R13
        MOV.B   &ZDAppTaskID, R12
        BRA     #osal_get_timeoutEx
          CFI EndBlock cfiBlock24

        RSEG CODE:CODE:NOROOT(1)
ZDApp_NetworkInit:
          CFI Block cfiBlock25 Using cfiCommon0
          CFI Function ZDApp_NetworkInit
        FUNCALL ZDApp_NetworkInit, osal_start_timerEx
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_NetworkInit, osal_set_event
        LOCFRAME CSTACK, 4, STACK
        CMP.W   #0x0, R12
        JEQ     ??ZDApp_NetworkInit_0
        MOV.W   R12, R14
        MOV.W   #0x1, R13
        BRA     #?Subroutine4
??ZDApp_NetworkInit_0:
        MOV.W   #0x1, R13
        JMP     ?Subroutine3
          CFI EndBlock cfiBlock25

        RSEG CODE:CODE:NOROOT(1)
ZDApp_ChangeMatchDescRespPermission:
          CFI Block cfiBlock26 Using cfiCommon0
          CFI Function ZDApp_ChangeMatchDescRespPermission
        FUNCALL ZDApp_ChangeMatchDescRespPermission, afSetMatch
        LOCFRAME CSTACK, 4, STACK
        BRA     #afSetMatch
          CFI EndBlock cfiBlock26

        RSEG CODE:CODE:NOROOT(1)
ZDApp_InMsgCB:
          CFI Block cfiBlock27 Using cfiCommon0
          CFI Function ZDApp_InMsgCB
        FUNCALL ZDApp_InMsgCB, ZDP_GenericRsp
        LOCFRAME CSTACK, 8, STACK
        CMP.W   #0x0, 0xe(R12)
        JL      ??ZDApp_InMsgCB_0
        CMP.B   #0x0, 0xc(R12)
        JNE     ??ZDApp_InMsgCB_0
        MOV.W   0xe(R12), R15
        CMP.W   #0x13, R15
        JEQ     ??ZDApp_InMsgCB_0
        PUSH.B  0x10(R12)
          CFI CFA SP+6
        BIS.W   #0x8000, R15
        PUSH.W  R15
          CFI CFA SP+8
        MOV.W   #0x0, R15
        MOV.B   #0x84, R14
        MOV.W   R12, R13
        ADD.W   #0x2, R13
        MOV.B   0x11(R12), R12
        CALLA   #ZDP_GenericRsp
        ADD.W   #0x4, SP
          CFI CFA SP+4
??ZDApp_InMsgCB_0:
        RETA
          CFI EndBlock cfiBlock27

        RSEG CODE:CODE:NOROOT(1)
ZDO_UpdateDeviceIndication:
          CFI Block cfiBlock28 Using cfiCommon0
          CFI Function ZDO_UpdateDeviceIndication
        MOV.B   #0x0, R12
        RETA
          CFI EndBlock cfiBlock28

        RSEG CODE:CODE:NOROOT(1)
AddrMgrWriteNVRequest:
          CFI Block cfiBlock29 Using cfiCommon0
          CFI Function AddrMgrWriteNVRequest
        RETA
          CFI EndBlock cfiBlock29

        RSEG CODE:CODE:NOROOT(1)
ZDO_PollConfirmCB:
          CFI Block cfiBlock30 Using cfiCommon0
          CFI Function ZDO_PollConfirmCB
        RETA
          CFI EndBlock cfiBlock30

        RSEG CODE:CODE:NOROOT(1)
ZDO_ManytoOneFailureIndicationCB:
          CFI Block cfiBlock31 Using cfiCommon0
          CFI Function ZDO_ManytoOneFailureIndicationCB
        FUNCALL ZDO_ManytoOneFailureIndicationCB, RTG_MTORouteReq
        LOCFRAME CSTACK, 4, STACK
        BRA     #RTG_MTORouteReq
          CFI EndBlock cfiBlock31

        RSEG CODE:CODE:NOROOT(1)
ZDO_SyncIndicationCB:
          CFI Block cfiBlock32 Using cfiCommon0
          CFI Function ZDO_SyncIndicationCB
        FUNCALL ZDO_SyncIndicationCB, nwkNeighborInitTable
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDO_SyncIndicationCB, ZDApp_SendMsg
        LOCFRAME CSTACK, 4, STACK
        BIT.B   #0x2, &_NIB + 14
        JC      ??ZDO_SyncIndicationCB_0
        CMP.B   #0x1, R12
        JNE     ??ZDO_SyncIndicationCB_0
        CALLA   #nwkNeighborInitTable
        MOV.W   #0x0, R15
        MOV.B   #0x2, R14
        MOV.B   #0x3, R13
        CALLA   #?Subroutine10
??ZDO_SyncIndicationCB_0:
        RETA
          CFI EndBlock cfiBlock32

        RSEG CODE:CODE:NOROOT(1)
ZDO_LeaveInd:
          CFI Block cfiBlock33 Using cfiCommon0
          CFI Function ZDO_LeaveInd
        FUNCALL ZDO_LeaveInd, NLME_LeaveRsp
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDO_LeaveInd, ZDApp_LeaveReset
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDO_LeaveInd, NLME_GetCoordShortAddr
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDO_LeaveInd, ZDApp_LeaveReset
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDO_LeaveInd, ZDApp_LeaveUpdate
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDO_LeaveInd
        LOCFRAME CSTACK, 8, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        SUB.W   #0x2, SP
          CFI CFA SP+8
        MOV.W   R12, R10
        CMP.B   #0x1, 0xa(R12)
        JNE     ??ZDO_LeaveInd_1
        MOV.B   0xc(R12), 0x1(SP)
        MOV.B   0xb(R12), 0(SP)
        MOV.W   SP, R12
        ADD.W   #0x0, R12
        CALLA   #NLME_LeaveRsp
        JMP     ??ZDO_LeaveInd_0
??ZDO_LeaveInd_1:
        CALLA   #NLME_GetCoordShortAddr
        MOV.B   0xb(R10), R14
        MOV.W   @R10, R15
        CMP.W   R12, R15
        JNE     ??ZDO_LeaveInd_2
        CMP.B   #0x1, R14
        JEQ     ??ZDO_LeaveInd_0
        MOV.B   &ZDO_Config_Node_Descriptor, R13
        AND.B   #0x7, R13
        CMP.B   #0x2, R13
        JNE     ??ZDO_LeaveInd_2
??ZDO_LeaveInd_0:
        MOV.B   0xc(R10), R12
        CALLA   #ZDApp_LeaveReset
        JMP     ??ZDO_LeaveInd_3
??ZDO_LeaveInd_2:
        MOV.W   R10, R13
        ADD.W   #0x2, R13
        MOV.W   R15, R12
        CALLA   #ZDApp_LeaveUpdate
??ZDO_LeaveInd_3:
        MOV.W   &zdoCBFunc + 24, R15
        BIS.W   &zdoCBFunc + 26, R15
        CMP.W   #0x0, R15
        JEQ     ??ZDO_LeaveInd_4
        MOV.W   R10, R12
        CALLA   &zdoCBFunc + 24
          CFI EndBlock cfiBlock33
??ZDO_LeaveInd_4:
        REQUIRE ?Subroutine1
        // Fall through to label ?Subroutine1

        RSEG CODE:CODE:NOROOT(1)
?Subroutine1:
          CFI Block cfiBlock34 Using cfiCommon0
          CFI NoFunction
          CFI CFA SP+8
          CFI R10L Frame(CFA, -6)
        ADD.W   #0x2, SP
          CFI CFA SP+6
        POP.W   R10
          CFI CFA SP+4
          CFI R10L SameValue
        RETA
          CFI EndBlock cfiBlock34

        RSEG CODE:CODE:NOROOT(1)
ZDO_LeaveCnf:
          CFI Block cfiBlock35 Using cfiCommon0
          CFI Function ZDO_LeaveCnf
        FUNCALL ZDO_LeaveCnf, NLME_GetExtAddr
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDO_LeaveCnf, sAddrExtCmp
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDO_LeaveCnf
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDO_LeaveCnf, ZDApp_LeaveReset
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDO_LeaveCnf, ZDApp_LeaveUpdate
        LOCFRAME CSTACK, 6, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        MOV.W   R12, R10
        CALLA   #NLME_GetExtAddr
        MOV.W   R12, R13
        MOV.W   R10, R12
        ADD.W   #0x2, R12
        CALLA   #sAddrExtCmp
        CMP.B   #0x1, R12
        JNE     ??ZDO_LeaveCnf_0
        MOV.W   &zdoCBFunc + 20, R15
        BIS.W   &zdoCBFunc + 22, R15
        CMP.W   #0x0, R15
        JEQ     ??ZDO_LeaveCnf_1
        MOV.W   R10, R12
        CALLA   &zdoCBFunc + 20
        CMP.W   #0x0, R12
        JNE     ??ZDO_LeaveCnf_2
??ZDO_LeaveCnf_1:
        MOV.B   0xb(R10), R12
        CALLA   #ZDApp_LeaveReset
        JMP     ??ZDO_LeaveCnf_2
??ZDO_LeaveCnf_0:
        MOV.B   0xa(R10), R14
        MOV.W   R10, R13
        ADD.W   #0x2, R13
        MOV.W   @R10, R12
        CALLA   #ZDApp_LeaveUpdate
??ZDO_LeaveCnf_2:
        POP.W   R10
          CFI R10L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock35

        RSEG CODE:CODE:NOROOT(1)
ZDO_ConcentratorIndicationCB:
          CFI Block cfiBlock36 Using cfiCommon0
          CFI Function ZDO_ConcentratorIndicationCB
        FUNCALL ZDO_ConcentratorIndicationCB
        LOCFRAME CSTACK, 10, STACK
        SUB.W   #0x6, SP
          CFI CFA SP+10
        MOV.W   R12, 0(SP)
        MOV.W   R13, 0x2(SP)
        MOV.B   R14, 0x4(SP)
        MOV.W   &zdoCBFunc + 4, R15
        BIS.W   &zdoCBFunc + 6, R15
        CMP.W   #0x0, R15
        JEQ     ??ZDO_ConcentratorIndicationCB_0
        MOV.W   SP, R12
        ADD.W   #0x0, R12
        CALLA   &zdoCBFunc + 4
??ZDO_ConcentratorIndicationCB_0:
        JMP     ?Subroutine2
          CFI EndBlock cfiBlock36

        RSEG CODE:CODE:NOROOT(1)
ZDO_JoinIndicationCB:
          CFI Block cfiBlock37 Using cfiCommon0
          CFI Function ZDO_JoinIndicationCB
        MOV.B   #0x0, R12
        RETA
          CFI EndBlock cfiBlock37

        RSEG CODE:CODE:NOROOT(1)
ZDO_AddrChangeIndicationCB:
          CFI Block cfiBlock38 Using cfiCommon0
          CFI Function ZDO_AddrChangeIndicationCB
        FUNCALL ZDO_AddrChangeIndicationCB, osal_set_event
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDO_AddrChangeIndicationCB, osal_msg_allocate
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDO_AddrChangeIndicationCB, osal_msg_send
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDO_AddrChangeIndicationCB, ZDApp_AnnounceNewAddress
        LOCFRAME CSTACK, 8, STACK
        PUSHM.W #0x2, R11
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+8
        MOV.W   R12, R10
        MOV.W   &epList, R11
        CALLA   #??Subroutine9_0
??CrossCallReturnLabel_23:
        JMP     ??ZDO_AddrChangeIndicationCB_1
??ZDO_AddrChangeIndicationCB_0:
        MOV.W   0x2(R11), R15
        CMP.B   #0x0, 0(R15)
        JEQ     ??ZDO_AddrChangeIndicationCB_2
        MOV.W   #0x4, R12
        CALLA   #osal_msg_allocate
        CMP.W   #0x0, R12
        JEQ     ??ZDO_AddrChangeIndicationCB_2
        MOV.B   #0xd6, 0(R12)
        MOV.W   R10, 0x2(R12)
        MOV.W   R12, R13
        MOV.W   0x2(R11), R15
        MOV.W   0x2(R15), R15
        MOV.B   @R15, R12
        CALLA   #osal_msg_send
??ZDO_AddrChangeIndicationCB_2:
        MOV.W   @R11, R11
??ZDO_AddrChangeIndicationCB_1:
        CMP.W   #0x0, R11
        JNE     ??ZDO_AddrChangeIndicationCB_0
        CALLA   #ZDApp_AnnounceNewAddress
        POPM.W  #0x2, R11
          CFI R10L SameValue
          CFI R11L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock38

        RSEG CODE:CODE:NOROOT(1)
ZDO_JoinConfirmCB:
          CFI Block cfiBlock39 Using cfiCommon0
          CFI Function ZDO_JoinConfirmCB
        FUNCALL ZDO_JoinConfirmCB, HalLedSet
        LOCFRAME CSTACK, 12, STACK
        FUNCALL ZDO_JoinConfirmCB, HalLedSet
        LOCFRAME CSTACK, 12, STACK
        FUNCALL ZDO_JoinConfirmCB, HalLedSet
        LOCFRAME CSTACK, 12, STACK
        FUNCALL ZDO_JoinConfirmCB
        LOCFRAME CSTACK, 12, STACK
        FUNCALL ZDO_JoinConfirmCB, ZDApp_SendMsg
        LOCFRAME CSTACK, 12, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        SUB.W   #0x6, SP
          CFI CFA SP+12
        MOV.B   R13, R10
        MOV.B   R13, &nwkStatus
        CMP.B   #0x0, R13
        JNE     ??ZDO_JoinConfirmCB_0
        CALLA   #?Subroutine11
??CrossCallReturnLabel_4:
        JNE     ??ZDO_JoinConfirmCB_1
        MOV.B   #0x3, &devState
        JMP     ??ZDO_JoinConfirmCB_1
??ZDO_JoinConfirmCB_0:
        CALLA   #?Subroutine12
??ZDO_JoinConfirmCB_1:
        MOV.W   &zdoCBFunc + 16, R15
        BIS.W   &zdoCBFunc + 18, R15
        CMP.W   #0x0, R15
        JEQ     ??ZDO_JoinConfirmCB_2
        MOV.B   R10, 0(SP)
        MOV.W   &_NIB + 22, 0x2(SP)
        MOV.W   &_NIB + 26, 0x4(SP)
        MOV.W   SP, R12
        ADD.W   #0x0, R12
        CALLA   &zdoCBFunc + 16
??ZDO_JoinConfirmCB_2:
        MOV.W   #0x0, R15
        MOV.B   #0x2, R14
        MOV.B   #0x2, R13
        CALLA   #?Subroutine10
??CrossCallReturnLabel_3:
        ADD.W   #0x6, SP
          CFI CFA SP+6
        POP.W   R10
          CFI R10L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock39

        RSEG CODE:CODE:NOROOT(1)
?Subroutine10:
          CFI Block cfiCond40 Using cfiCommon0
          CFI Function ZDO_SyncIndicationCB
          CFI Conditional ??ZDO_SyncIndicationCB_0
          CFI CFA SP+8
          CFI Block cfiCond41 Using cfiCommon0
          CFI (cfiCond41) Function ZDO_JoinConfirmCB
          CFI (cfiCond41) Conditional ??CrossCallReturnLabel_3
          CFI (cfiCond41) R10L Frame(CFA, -6)
          CFI (cfiCond41) CFA SP+16
          CFI Block cfiCond42 Using cfiCommon0
          CFI (cfiCond42) Function ZDO_NetworkDiscoveryConfirmCB
          CFI (cfiCond42) Conditional ??ZDO_NetworkDiscoveryConfirmCB_1
          CFI (cfiCond42) CFA SP+12
          CFI Block cfiPicker43 Using cfiCommon1
          CFI (cfiPicker43) NoFunction
          CFI (cfiPicker43) Picker
        MOV.B   &ZDAppTaskID, R12
        BRA     #ZDApp_SendMsg
          CFI EndBlock cfiCond40
          CFI EndBlock cfiCond41
          CFI EndBlock cfiCond42
          CFI EndBlock cfiPicker43

        RSEG CODE:CODE:NOROOT(1)
ZDO_StartRouterConfirmCB:
          CFI Block cfiBlock44 Using cfiCommon0
          CFI Function ZDO_StartRouterConfirmCB
        FUNCALL ZDO_StartRouterConfirmCB, HalLedSet
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDO_StartRouterConfirmCB, HalLedSet
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDO_StartRouterConfirmCB, HalLedSet
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDO_StartRouterConfirmCB, osal_set_event
        LOCFRAME CSTACK, 4, STACK
        MOV.B   R12, &nwkStatus
        CMP.B   #0x0, R12
        JNE     ??ZDO_StartRouterConfirmCB_0
        CALLA   #?Subroutine11
??CrossCallReturnLabel_5:
        JNE     ??ZDO_StartRouterConfirmCB_1
        MOV.B   #0x6, &devState
        JMP     ??ZDO_StartRouterConfirmCB_1
??ZDO_StartRouterConfirmCB_0:
        CALLA   #?Subroutine12
??ZDO_StartRouterConfirmCB_1:
        MOV.W   #0x20, R13
        JMP     ?Subroutine3
          CFI EndBlock cfiBlock44

        RSEG CODE:CODE:NOROOT(1)
?Subroutine12:
          CFI Block cfiCond45 Using cfiCommon0
          CFI Function ZDO_JoinConfirmCB
          CFI Conditional ??ZDO_JoinConfirmCB_1
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+16
          CFI Block cfiCond46 Using cfiCommon0
          CFI (cfiCond46) Function ZDO_StartRouterConfirmCB
          CFI (cfiCond46) Conditional ??ZDO_StartRouterConfirmCB_1
          CFI (cfiCond46) CFA SP+8
          CFI Block cfiCond47 Using cfiCommon0
          CFI (cfiCond47) Function ZDO_NetworkFormationConfirmCB
          CFI (cfiCond47) Conditional ??ZDO_NetworkFormationConfirmCB_1
          CFI (cfiCond47) CFA SP+8
          CFI Block cfiPicker48 Using cfiCommon1
          CFI (cfiPicker48) NoFunction
          CFI (cfiPicker48) Picker
        MOV.B   #0x4, R13
        MOV.B   #0x4, R12
        BRA     #HalLedSet
          CFI EndBlock cfiCond45
          CFI EndBlock cfiCond46
          CFI EndBlock cfiCond47
          CFI EndBlock cfiPicker48

        RSEG CODE:CODE:NOROOT(1)
?Subroutine11:
          CFI Block cfiCond49 Using cfiCommon0
          CFI Function ZDO_JoinConfirmCB
          CFI Conditional ??CrossCallReturnLabel_4
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+16
          CFI Block cfiCond50 Using cfiCommon0
          CFI (cfiCond50) Function ZDO_StartRouterConfirmCB
          CFI (cfiCond50) Conditional ??CrossCallReturnLabel_5
          CFI (cfiCond50) CFA SP+8
          CFI Block cfiCond51 Using cfiCommon0
          CFI (cfiCond51) Function ZDO_NetworkFormationConfirmCB
          CFI (cfiCond51) Conditional ??CrossCallReturnLabel_6
          CFI (cfiCond51) CFA SP+8
          CFI Block cfiPicker52 Using cfiCommon1
          CFI (cfiPicker52) NoFunction
          CFI (cfiPicker52) Picker
        MOV.B   #0x1, R13
        MOV.B   #0x4, R12
        CALLA   #HalLedSet
        MOV.B   #0x0, R13
        MOV.B   #0x8, R12
        CALLA   #HalLedSet
        CMP.B   #0x0, &devState
        RETA
          CFI EndBlock cfiCond49
          CFI EndBlock cfiCond50
          CFI EndBlock cfiCond51
          CFI EndBlock cfiPicker52

        RSEG CODE:CODE:NOROOT(1)
ZDO_beaconNotifyIndCB:
          CFI Block cfiBlock53 Using cfiCommon0
          CFI Function ZDO_beaconNotifyIndCB
        FUNCALL ZDO_beaconNotifyIndCB
        LOCFRAME CSTACK, 12, STACK
        FUNCALL ZDO_beaconNotifyIndCB, osal_mem_alloc
        LOCFRAME CSTACK, 12, STACK
        FUNCALL ZDO_beaconNotifyIndCB, osal_memset
        LOCFRAME CSTACK, 12, STACK
        FUNCALL ZDO_beaconNotifyIndCB, sAddrExtCpy
        LOCFRAME CSTACK, 12, STACK
        FUNCALL ZDO_beaconNotifyIndCB, osal_memset
        LOCFRAME CSTACK, 12, STACK
        PUSHM.W #0x4, R11
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+12
        MOV.W   R12, R10
        MOV.W   &zdoCBFunc + 12, R15
        BIS.W   &zdoCBFunc + 14, R15
        CMP.W   #0x0, R15
        JEQ     ??ZDO_beaconNotifyIndCB_3
        CALLA   &zdoCBFunc + 12
        JMP     ??ZDO_beaconNotifyIndCB_1
??ZDO_beaconNotifyIndCB_3:
        MOV.W   &NwkDescList, R11
        MOV.W   R11, R8
        JMP     ??ZDO_beaconNotifyIndCB_4
??ZDO_beaconNotifyIndCB_0:
        CMP.W   0x2(R12), 0(R8)
        JNE     ??ZDO_beaconNotifyIndCB_5
        CMP.B   0x4(R12), 0x2(R8)
        JEQ     ??ZDO_beaconNotifyIndCB_6
??ZDO_beaconNotifyIndCB_5:
        MOV.W   R8, R11
        MOV.W   0x16(R8), R8
??ZDO_beaconNotifyIndCB_4:
        CMP.W   #0x0, R8
        JNE     ??ZDO_beaconNotifyIndCB_0
        MOV.W   #0x18, R12
        CALLA   #osal_mem_alloc
        MOV.W   R12, R8
        CMP.W   #0x0, R12
        JEQ     ??ZDO_beaconNotifyIndCB_1
        MOV.W   #0x18, R14
        MOV.B   #0x0, R13
        CALLA   #osal_memset
        MOV.W   #0xfffe, 0x8(R8)
        MOV.B   #0xff, 0xb(R8)
        CMP.W   #0x0, &NwkDescList
        JNE     ??ZDO_beaconNotifyIndCB_7
        MOV.W   R8, &NwkDescList
        JMP     ??ZDO_beaconNotifyIndCB_6
??ZDO_beaconNotifyIndCB_7:
        MOV.W   R8, 0x16(R11)
??ZDO_beaconNotifyIndCB_6:
        MOV.B   0x9(R10), 0x6(R8)
        MOV.B   0x8(R10), 0x5(R8)
        MOV.B   0x4(R10), 0x2(R8)
        MOV.W   0x2(R10), 0(R8)
        MOV.B   0xc(R10), 0x14(R8)
        CMP.B   #0x1, 0x8(R10)
        JEQ     ??ZDO_beaconNotifyIndCB_8
        MOV.W   R10, R13
        ADD.W   #0xd, R13
        MOV.W   R8, R12
        ADD.W   #0xc, R12
        CALLA   #sAddrExtCpy
        JMP     ??ZDO_beaconNotifyIndCB_9
??ZDO_beaconNotifyIndCB_8:
        MOV.W   #0x8, R14
        MOV.B   #0xff, R13
        MOV.W   R8, R12
        ADD.W   #0xc, R12
        CALLA   #osal_memset
??ZDO_beaconNotifyIndCB_9:
        MOV.B   0xa(R10), R14
        CMP.B   R14, &gMIN_TREE_LINK_COST
        JC      ??ZDO_beaconNotifyIndCB_1
        CMP.B   #0x1, 0x5(R10)
        JEQ     ??ZDO_beaconNotifyIndCB_10
        CMP.B   #0x0, &_tmpRejoinState
        JEQ     ??ZDO_beaconNotifyIndCB_1
??ZDO_beaconNotifyIndCB_10:
        CMP.B   #0x2, &_NIB + 100
        JNE     ??ZDO_beaconNotifyIndCB_11
        MOV.B   0xa(R8), R15
        CMP.B   R14, R15
        JC      ??ZDO_beaconNotifyIndCB_12
        CMP.B   #0x14, 0xb(R10)
        JNC     ??ZDO_beaconNotifyIndCB_13
        JMP     ??ZDO_beaconNotifyIndCB_14
??ZDO_beaconNotifyIndCB_12:
        CMP.B   R15, R14
        JNE     ??ZDO_beaconNotifyIndCB_14
??ZDO_beaconNotifyIndCB_11:
        CMP.B   0xb(R8), 0xb(R10)
        JC      ??ZDO_beaconNotifyIndCB_14
??ZDO_beaconNotifyIndCB_13:
        CMP.B   #0x0, 0x6(R10)
        JEQ     ??ZDO_beaconNotifyIndCB_14
        MOV.W   @R10, 0x8(R8)
        MOV.B   0xa(R10), 0xa(R8)
        MOV.B   0xb(R10), 0xb(R8)
??ZDO_beaconNotifyIndCB_14:
        CMP.B   #0x0, 0x7(R10)
        JEQ     ??ZDO_beaconNotifyIndCB_15
        MOV.B   #0x1, 0x4(R8)
??ZDO_beaconNotifyIndCB_15:
        CMP.B   #0x0, 0x6(R10)
        JEQ     ??ZDO_beaconNotifyIndCB_1
        MOV.B   #0x1, 0x3(R8)
??ZDO_beaconNotifyIndCB_1:
        POPM.W  #0x4, R11
          CFI R10L SameValue
          CFI R11L SameValue
          CFI R8L SameValue
          CFI R9L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock53

        RSEG CODE:CODE:NOROOT(1)
ZDO_NetworkFormationConfirmCB:
          CFI Block cfiBlock54 Using cfiCommon0
          CFI Function ZDO_NetworkFormationConfirmCB
        FUNCALL ZDO_NetworkFormationConfirmCB, HalLedSet
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDO_NetworkFormationConfirmCB, HalLedSet
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDO_NetworkFormationConfirmCB, HalLedSet
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDO_NetworkFormationConfirmCB, osal_set_event
        LOCFRAME CSTACK, 4, STACK
        MOV.B   R12, &nwkStatus
        CMP.B   #0x0, R12
        JNE     ??ZDO_NetworkFormationConfirmCB_0
        CALLA   #?Subroutine11
??CrossCallReturnLabel_6:
        JNE     ??ZDO_NetworkFormationConfirmCB_1
        MOV.B   #0x8, &devState
        JMP     ??ZDO_NetworkFormationConfirmCB_1
??ZDO_NetworkFormationConfirmCB_0:
        CALLA   #?Subroutine12
??ZDO_NetworkFormationConfirmCB_1:
        MOV.W   #0x2, R13
          CFI EndBlock cfiBlock54
        REQUIRE ?Subroutine3
        // Fall through to label ?Subroutine3

        RSEG CODE:CODE:NOROOT(1)
?Subroutine3:
          CFI Block cfiBlock55 Using cfiCommon0
          CFI NoFunction
        MOV.B   &ZDAppTaskID, R12
        BRA     #osal_set_event
          CFI EndBlock cfiBlock55

        RSEG CODE:CODE:NOROOT(1)
ZDApp_NwkDescListProcessing:
          CFI Block cfiBlock56 Using cfiCommon0
          CFI Function ZDApp_NwkDescListProcessing
        FUNCALL ZDApp_NwkDescListProcessing, nwk_getNwkDescList
        LOCFRAME CSTACK, 16, STACK
        FUNCALL ZDApp_NwkDescListProcessing, nwk_getNwkDescList
        LOCFRAME CSTACK, 16, STACK
        FUNCALL ZDApp_NwkDescListProcessing, nwk_ExtPANIDValid
        LOCFRAME CSTACK, 16, STACK
        FUNCALL ZDApp_NwkDescListProcessing, sAddrExtCmp
        LOCFRAME CSTACK, 16, STACK
        PUSHM.W #0x6, R11
          CFI R6L Frame(CFA, -16)
          CFI R7L Frame(CFA, -14)
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+16
        MOV.B   #0x0, R10
        CALLA   #nwk_getNwkDescList
        MOV.W   R12, R11
        JMP     ??ZDApp_NwkDescListProcessing_6
??ZDApp_NwkDescListProcessing_0:
        ADD.B   #0x1, R10
        MOV.W   0x16(R11), R11
??ZDApp_NwkDescListProcessing_6:
        CMP.W   #0x0, R11
        JNE     ??ZDApp_NwkDescListProcessing_0
        MOV.B   #0x0, R8
        MOV.B   #0x0, R9
??ZDApp_NwkDescListProcessing_5:
        CALLA   #nwk_getNwkDescList
        MOV.W   R12, R11
        MOV.B   #0x0, R6
        JMP     ??ZDApp_NwkDescListProcessing_7
??ZDApp_NwkDescListProcessing_2:
        CMP.B   #0x2, R14
        JNE     ??ZDApp_NwkDescListProcessing_3
        CMP.B   #0x1, R15
        JNE     ??ZDApp_NwkDescListProcessing_3
??ZDApp_NwkDescListProcessing_4:
        MOV.B   #0x1, R8
??ZDApp_NwkDescListProcessing_3:
        CMP.B   #0x0, R9
        JNE     ??ZDApp_NwkDescListProcessing_8
??ZDApp_NwkDescListProcessing_1:
        ADD.B   #0x1, R6
        MOV.W   0x16(R11), R11
??ZDApp_NwkDescListProcessing_7:
        CMP.B   R10, R6
        JC      ??ZDApp_NwkDescListProcessing_9
        CMP.W   #0xffff, &zgConfigPANID
        JEQ     ??ZDApp_NwkDescListProcessing_10
        CMP.W   &zgConfigPANID, 0(R11)
        JNE     ??ZDApp_NwkDescListProcessing_1
??ZDApp_NwkDescListProcessing_10:
        MOV.W   #ZDO_UseExtendedPANID, R12
        CALLA   #nwk_ExtPANIDValid
        CMP.B   #0x1, R12
        JNE     ??ZDApp_NwkDescListProcessing_11
        MOV.W   R11, R13
        ADD.W   #0xc, R13
        MOV.W   #ZDO_UseExtendedPANID, R12
        CALLA   #sAddrExtCmp
        CMP.B   #0x0, R12
        JEQ     ??ZDApp_NwkDescListProcessing_1
??ZDApp_NwkDescListProcessing_11:
        CMP.B   #0x0, R8
        JNE     ??ZDApp_NwkDescListProcessing_12
        CMP.B   #0x0, 0x3(R11)
        JNE     ??ZDApp_NwkDescListProcessing_13
        JMP     ??ZDApp_NwkDescListProcessing_1
??ZDApp_NwkDescListProcessing_12:
        CMP.B   #0x0, 0x4(R11)
        JEQ     ??ZDApp_NwkDescListProcessing_1
??ZDApp_NwkDescListProcessing_13:
        CMP.B   &_NIB + 18, 0x5(R11)
        JNE     ??ZDApp_NwkDescListProcessing_1
        MOV.B   0x6(R11), R15
        MOV.B   &zgStackProfile, R14
        CMP.B   R14, R15
        JEQ     ??ZDApp_NwkDescListProcessing_8
        CMP.B   #0x1, R14
        JNE     ??ZDApp_NwkDescListProcessing_2
        CMP.B   #0x2, R15
        JNE     ??ZDApp_NwkDescListProcessing_3
        JMP     ??ZDApp_NwkDescListProcessing_4
??ZDApp_NwkDescListProcessing_9:
        CMP.B   #0x0, R8
        JEQ     ??ZDApp_NwkDescListProcessing_14
        ADD.B   #0x1, R9
        CMP.B   #0x2, R9
        JNC     ??ZDApp_NwkDescListProcessing_5
??ZDApp_NwkDescListProcessing_14:
        CMP.B   R10, R6
        JNE     ??ZDApp_NwkDescListProcessing_8
        MOV.W   #0x0, R12
        JMP     ??ZDApp_NwkDescListProcessing_15
??ZDApp_NwkDescListProcessing_8:
        MOV.W   R11, R12
??ZDApp_NwkDescListProcessing_15:
        POPM.W  #0x6, R11
          CFI R10L SameValue
          CFI R11L SameValue
          CFI R6L SameValue
          CFI R7L SameValue
          CFI R8L SameValue
          CFI R9L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock56

        RSEG CODE:CODE:NOROOT(1)
ZDO_NetworkDiscoveryConfirmCB:
          CFI Block cfiBlock57 Using cfiCommon0
          CFI Function ZDO_NetworkDiscoveryConfirmCB
        FUNCALL ZDO_NetworkDiscoveryConfirmCB
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDO_NetworkDiscoveryConfirmCB, ZDApp_SendMsg
        LOCFRAME CSTACK, 8, STACK
        PUSH.B  R12
          CFI CFA SP+6
        SUB.W   #0x2, SP
          CFI CFA SP+8
        MOV.W   &zdoCBFunc + 8, R15
        BIS.W   &zdoCBFunc + 10, R15
        CMP.W   #0x0, R15
        JEQ     ??ZDO_NetworkDiscoveryConfirmCB_0
        MOV.W   SP, R12
        ADD.W   #0x2, R12
        CALLA   &zdoCBFunc + 8
        JMP     ??ZDO_NetworkDiscoveryConfirmCB_1
??ZDO_NetworkDiscoveryConfirmCB_0:
        MOV.B   #0x0, 0x1(SP)
        MOV.W   SP, R15
        ADD.W   #0x0, R15
        MOV.B   #0x2, R14
        MOV.B   #0x1, R13
        CALLA   #?Subroutine10
??ZDO_NetworkDiscoveryConfirmCB_1:
        MOV.B   #0x0, R12
        ADD.W   #0x4, SP
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock57

        RSEG CODE:CODE:NOROOT(1)
ZDApp_SendMsg:
          CFI Block cfiBlock58 Using cfiCommon0
          CFI Function ZDApp_SendMsg
        FUNCALL ZDApp_SendMsg, osal_msg_allocate
        LOCFRAME CSTACK, 16, STACK
        FUNCALL ZDApp_SendMsg, osal_memcpy
        LOCFRAME CSTACK, 16, STACK
        FUNCALL ZDApp_SendMsg, osal_msg_send
        LOCFRAME CSTACK, 16, STACK
        PUSHM.W #0x6, R11
          CFI R6L Frame(CFA, -16)
          CFI R7L Frame(CFA, -14)
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+16
        MOV.B   R12, R11
        MOV.B   R13, R8
        MOV.B   R14, R10
        MOV.W   R15, R9
        MOV.B   R14, R6
        MOV.W   R6, R12
        CALLA   #osal_msg_allocate
        MOV.W   R12, R7
        CMP.W   #0x0, R12
        JEQ     ??ZDApp_SendMsg_0
        CMP.B   #0x0, R10
        JEQ     ??ZDApp_SendMsg_1
        CMP.W   #0x0, R9
        JEQ     ??ZDApp_SendMsg_1
        MOV.W   R6, R14
        MOV.W   R9, R13
        CALLA   #osal_memcpy
??ZDApp_SendMsg_1:
        MOV.B   R8, 0(R7)
        MOV.W   R7, R13
        MOV.B   R11, R12
        CALLA   #osal_msg_send
??ZDApp_SendMsg_0:
        POPM.W  #0x6, R11
          CFI R10L SameValue
          CFI R11L SameValue
          CFI R6L SameValue
          CFI R7L SameValue
          CFI R8L SameValue
          CFI R9L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock58

        RSEG CODE:CODE:NOROOT(1)
ZDApp_SendEventMsg:
          CFI Block cfiBlock59 Using cfiCommon0
          CFI Function ZDApp_SendEventMsg
        FUNCALL ZDApp_SendEventMsg, ZDApp_SendMsg
        LOCFRAME CSTACK, 4, STACK
        MOV.W   R14, R15
        MOV.B   R13, R14
        MOV.B   R12, R13
        MOV.B   &ZDAppTaskID, R12
        BRA     #ZDApp_SendMsg
          CFI EndBlock cfiBlock59

        RSEG CODE:CODE:NOROOT(1)
ZDApp_DeviceConfigured:
          CFI Block cfiBlock60 Using cfiCommon0
          CFI Function ZDApp_DeviceConfigured
        FUNCALL ZDApp_DeviceConfigured, osal_nv_read
        LOCFRAME CSTACK, 6, STACK
        SUB.W   #0x2, SP
          CFI CFA SP+6
        MOV.W   #0xfffe, 0(SP)
        MOV.W   SP, R15
        ADD.W   #0x0, R15
        MOV.W   #0x2, R14
        MOV.W   #0x16, R13
        MOV.W   #0x21, R12
        CALLA   #osal_nv_read
        CMP.W   #0xfffe, 0(SP)
        JEQ     ??ZDApp_DeviceConfigured_0
        MOV.B   #0x1, R12
        JMP     ??ZDApp_DeviceConfigured_1
??ZDApp_DeviceConfigured_0:
        MOV.B   #0x0, R12
??ZDApp_DeviceConfigured_1:
        ADD.W   #0x2, SP
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock60

        RSEG CODE:CODE:NOROOT(1)
ZDApp_JoinReq:
          CFI Block cfiBlock61 Using cfiCommon0
          CFI Function ZDApp_JoinReq
        FUNCALL ZDApp_JoinReq, ZDApp_NodeProfileSync
        LOCFRAME CSTACK, 16, STACK
        FUNCALL ZDApp_JoinReq, NLME_JoinRequest
        LOCFRAME CSTACK, 20, STACK
        PUSHM.W #0x6, R11
          CFI R6L Frame(CFA, -16)
          CFI R7L Frame(CFA, -14)
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+16
        MOV.B   R12, R10
        MOV.W   R13, R11
        MOV.W   R14, R8
        MOV.W   R15, R9
        MOV.B   0x10(SP), R6
        MOV.B   0x12(SP), R12
        CALLA   #ZDApp_NodeProfileSync
        PUSH.B  R6
          CFI CFA SP+18
        PUSH.W  R9
          CFI CFA SP+20
        MOV.B   &ZDO_Config_Node_Descriptor + 2, R15
        MOV.B   R10, R14
        MOV.W   R11, R13
        MOV.W   R8, R12
        CALLA   #NLME_JoinRequest
        ADD.W   #0x4, SP
          CFI CFA SP+16
        POPM.W  #0x6, R11
          CFI R10L SameValue
          CFI R11L SameValue
          CFI R6L SameValue
          CFI R7L SameValue
          CFI R8L SameValue
          CFI R9L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock61

        RSEG CODE:CODE:NOROOT(1)
ZDApp_NetworkDiscoveryReq:
          CFI Block cfiBlock62 Using cfiCommon0
          CFI Function ZDApp_NetworkDiscoveryReq
        FUNCALL ZDApp_NetworkDiscoveryReq, NLME_NetworkDiscoveryRequest
        LOCFRAME CSTACK, 4, STACK
        BRA     #NLME_NetworkDiscoveryRequest
          CFI EndBlock cfiBlock62

        RSEG CODE:CODE:NOROOT(1)
ZDApp_LeaveUpdate:
          CFI Block cfiBlock63 Using cfiCommon0
          CFI Function ZDApp_LeaveUpdate
        FUNCALL ZDApp_LeaveUpdate, ZDSecMgrDeviceRemoveByExtAddr
        LOCFRAME CSTACK, 22, STACK
        FUNCALL ZDApp_LeaveUpdate, ZDSecMgrAddrClear
        LOCFRAME CSTACK, 22, STACK
        FUNCALL ZDApp_LeaveUpdate, osal_memcpy
        LOCFRAME CSTACK, 22, STACK
        FUNCALL ZDApp_LeaveUpdate
        LOCFRAME CSTACK, 22, STACK
        FUNCALL ZDApp_LeaveUpdate, NLME_RemoveChild
        LOCFRAME CSTACK, 22, STACK
        FUNCALL ZDApp_LeaveUpdate, RTG_RemoveRtgEntry
        LOCFRAME CSTACK, 22, STACK
        FUNCALL ZDApp_LeaveUpdate, nwkNeighborRemove
        LOCFRAME CSTACK, 22, STACK
        PUSHM.W #0x4, R11
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+12
        SUB.W   #0xa, SP
          CFI CFA SP+22
        MOV.W   R12, R11
        MOV.W   R13, R8
        MOV.B   R14, R10
        MOV.W   R13, R12
        CALLA   #ZDSecMgrDeviceRemoveByExtAddr
        MOV.W   R8, R12
        CALLA   #ZDSecMgrAddrClear
        MOV.W   &pbindRemoveDev, R15
        BIS.W   &pbindRemoveDev + 2, R15
        CMP.W   #0x0, R15
        JEQ     ??ZDApp_LeaveUpdate_0
        MOV.B   #0x3, 0x8(SP)
        MOV.W   #0x8, R14
        MOV.W   R8, R13
        MOV.W   SP, R12
        ADD.W   #0x0, R12
        CALLA   #osal_memcpy
        MOV.W   SP, R12
        ADD.W   #0x0, R12
        CALLA   &pbindRemoveDev
??ZDApp_LeaveUpdate_0:
        MOV.B   R10, R13
        MOV.W   R8, R12
        CALLA   #NLME_RemoveChild
        MOV.B   #0x0, R13
        MOV.W   R11, R12
        CALLA   #RTG_RemoveRtgEntry
        MOV.W   &_NIB + 36, R13
        MOV.W   R11, R12
        CALLA   #nwkNeighborRemove
        ADD.W   #0xa, SP
          CFI CFA SP+12
        POPM.W  #0x4, R11
          CFI R10L SameValue
          CFI R11L SameValue
          CFI R8L SameValue
          CFI R9L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock63

        RSEG CODE:CODE:NOROOT(1)
ZDApp_LeaveReset:
          CFI Block cfiBlock64 Using cfiCommon0
          CFI Function ZDApp_LeaveReset
        FUNCALL ZDApp_LeaveReset, ZDApp_LeaveCtrlSet
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_LeaveReset, ZDApp_ResetTimerStart
        LOCFRAME CSTACK, 4, STACK
        CALLA   #ZDApp_LeaveCtrlSet
        MOV.W   #0x1388, R12
        BRA     #ZDApp_ResetTimerStart
          CFI EndBlock cfiBlock64

        RSEG CODE:CODE:NOROOT(1)
ZDApp_LeaveCtrlStartup:
          CFI Block cfiBlock65 Using cfiCommon0
          CFI Function ZDApp_LeaveCtrlStartup
        FUNCALL ZDApp_LeaveCtrlStartup, ZDApp_LeaveCtrlReset
        LOCFRAME CSTACK, 4, STACK
        MOV.W   #0x0, 0(R13)
        BIT.B   #0x1, &ZDApp_LeaveCtrl
        JNC     ??ZDApp_LeaveCtrlStartup_0
        BIT.B   #0x2, &ZDApp_LeaveCtrl
        JNC     ??ZDApp_LeaveCtrlStartup_1
        MOV.W   #0x1388, 0(R13)
        JMP     ??ZDApp_LeaveCtrlStartup_2
??ZDApp_LeaveCtrlStartup_1:
        MOV.B   #0x0, 0(R12)
??ZDApp_LeaveCtrlStartup_2:
        CALLA   #ZDApp_LeaveCtrlReset
??ZDApp_LeaveCtrlStartup_0:
        RETA
          CFI EndBlock cfiBlock65

        RSEG CODE:CODE:NOROOT(1)
ZDApp_LeaveCtrlBypass:
          CFI Block cfiBlock66 Using cfiCommon0
          CFI Function ZDApp_LeaveCtrlBypass
        MOV.B   &ZDApp_LeaveCtrl, R12
        AND.B   #0x1, R12
        RETA
          CFI EndBlock cfiBlock66

        RSEG CODE:CODE:NOROOT(1)
ZDApp_LeaveCtrlReset:
          CFI Block cfiBlock67 Using cfiCommon0
          CFI Function ZDApp_LeaveCtrlReset
        FUNCALL ZDApp_LeaveCtrlReset, osal_nv_write
        LOCFRAME CSTACK, 4, STACK
        MOV.B   #0x0, &ZDApp_LeaveCtrl
          CFI EndBlock cfiBlock67
        REQUIRE ?Subroutine5
        // Fall through to label ?Subroutine5

        RSEG CODE:CODE:NOROOT(1)
?Subroutine5:
          CFI Block cfiBlock68 Using cfiCommon0
          CFI NoFunction
        CALLA   #?Subroutine15
??CrossCallReturnLabel_12:
        BRA     #osal_nv_write
          CFI EndBlock cfiBlock68

        RSEG CODE:CODE:NOROOT(1)
?Subroutine15:
          CFI Block cfiCond69 Using cfiCommon0
          CFI Function ZDApp_LeaveCtrlReset
          CFI Conditional ??CrossCallReturnLabel_12
          CFI CFA SP+8
          CFI Block cfiCond70 Using cfiCommon0
          CFI (cfiCond70) Function ZDApp_LeaveCtrlSet
          CFI (cfiCond70) Conditional ??CrossCallReturnLabel_12
          CFI (cfiCond70) CFA SP+8
          CFI Block cfiCond71 Using cfiCommon0
          CFI (cfiCond71) Function ZDApp_LeaveCtrlInit
          CFI (cfiCond71) Conditional ??CrossCallReturnLabel_11
          CFI (cfiCond71) CFA SP+8
          CFI Block cfiPicker72 Using cfiCommon1
          CFI (cfiPicker72) NoFunction
          CFI (cfiPicker72) Picker
        MOV.W   #ZDApp_LeaveCtrl, R15
        MOV.W   #0x1, R14
        MOV.W   #0x0, R13
        MOV.W   #0x85, R12
        RETA
          CFI EndBlock cfiCond69
          CFI EndBlock cfiCond70
          CFI EndBlock cfiCond71
          CFI EndBlock cfiPicker72

        RSEG CODE:CODE:NOROOT(1)
ZDApp_LeaveCtrlSet:
          CFI Block cfiBlock73 Using cfiCommon0
          CFI Function ZDApp_LeaveCtrlSet
        FUNCALL ZDApp_LeaveCtrlSet, osal_nv_write
        LOCFRAME CSTACK, 4, STACK
        MOV.B   #0x1, R14
        CMP.B   #0x1, R12
        JNE     ??ZDApp_LeaveCtrlSet_0
        MOV.B   #0x3, R14
??ZDApp_LeaveCtrlSet_0:
        MOV.B   R14, &ZDApp_LeaveCtrl
        JMP     ?Subroutine5
          CFI EndBlock cfiBlock73

        RSEG CODE:CODE:NOROOT(1)
ZDApp_LeaveCtrlInit:
          CFI Block cfiBlock74 Using cfiCommon0
          CFI Function ZDApp_LeaveCtrlInit
        FUNCALL ZDApp_LeaveCtrlInit, osal_nv_item_init
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_LeaveCtrlInit, osal_nv_read
        LOCFRAME CSTACK, 4, STACK
        MOV.B   #0x0, &ZDApp_LeaveCtrl
        MOV.W   #ZDApp_LeaveCtrl, R14
        MOV.W   #0x1, R13
        MOV.W   #0x85, R12
        CALLA   #osal_nv_item_init
        CMP.B   #0x0, R12
        JNE     ??ZDApp_LeaveCtrlInit_0
        CALLA   #?Subroutine15
??CrossCallReturnLabel_11:
        CALLA   #osal_nv_read
??ZDApp_LeaveCtrlInit_0:
        RETA
          CFI EndBlock cfiBlock74

        RSEG CODE:CODE:NOROOT(1)
ZDApp_ResetTimerCancel:
          CFI Block cfiBlock75 Using cfiCommon0
          CFI Function ZDApp_ResetTimerCancel
        FUNCALL ZDApp_ResetTimerCancel, osal_stop_timerEx
        LOCFRAME CSTACK, 4, STACK
        MOV.W   #0x4, R13
        MOV.B   &ZDAppTaskID, R12
        BRA     #osal_stop_timerEx
          CFI EndBlock cfiBlock75

        RSEG CODE:CODE:NOROOT(1)
ZDApp_ResetTimerStart:
          CFI Block cfiBlock76 Using cfiCommon0
          CFI Function ZDApp_ResetTimerStart
        FUNCALL ZDApp_ResetTimerStart, osal_start_timerEx
        LOCFRAME CSTACK, 4, STACK
        MOV.W   R12, R14
        MOV.W   #0x4, R13
          CFI EndBlock cfiBlock76
        REQUIRE ?Subroutine4
        // Fall through to label ?Subroutine4

        RSEG CODE:CODE:NOROOT(1)
?Subroutine4:
          CFI Block cfiBlock77 Using cfiCommon0
          CFI NoFunction
        MOV.B   &ZDAppTaskID, R12
        BRA     #osal_start_timerEx
          CFI EndBlock cfiBlock77

        RSEG CODE:CODE:NOROOT(1)
ZDApp_RestoreNwkKey:
          CFI Block cfiBlock78 Using cfiCommon0
          CFI Function ZDApp_RestoreNwkKey
        FUNCALL ZDApp_RestoreNwkKey, osal_nv_read
        LOCFRAME CSTACK, 28, STACK
        FUNCALL ZDApp_RestoreNwkKey, osal_memset
        LOCFRAME CSTACK, 28, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        SUB.W   #0x16, SP
          CFI CFA SP+28
        MOV.B   #0x0, R10
        CALLA   #?Subroutine14
??CrossCallReturnLabel_9:
        CALLA   #osal_nv_read
        CMP.B   #0x0, R12
        JNE     ??ZDApp_RestoreNwkKey_0
        MOV.W   0x12(SP), R15
        BIS.W   0x14(SP), R15
        CMP.W   #0x0, R15
        JEQ     ??ZDApp_RestoreNwkKey_1
        ADD.W   #0x3e8, 0x12(SP)
        ADDC.W  #0x0, 0x14(SP)
        MOV.W   0x12(SP), &nwkFrameCounter
        MOV.W   0x14(SP), &nwkFrameCounter + 2
        MOV.B   #0x1, R10
??ZDApp_RestoreNwkKey_1:
        MOV.W   #0x3e9, &nwkFrameCounterChanges
??ZDApp_RestoreNwkKey_0:
        CALLA   #?Subroutine13
??CrossCallReturnLabel_8:
        MOV.B   R10, R12
          CFI EndBlock cfiBlock78
        REQUIRE ?Subroutine0
        // Fall through to label ?Subroutine0

        RSEG CODE:CODE:NOROOT(1)
?Subroutine0:
          CFI Block cfiBlock79 Using cfiCommon0
          CFI NoFunction
          CFI CFA SP+28
          CFI R10L Frame(CFA, -6)
        ADD.W   #0x16, SP
          CFI CFA SP+6
        POP.W   R10
          CFI CFA SP+4
          CFI R10L SameValue
        RETA
          CFI EndBlock cfiBlock79

        RSEG CODE:CODE:NOROOT(1)
ZDApp_ResetNwkKey:
          CFI Block cfiBlock80 Using cfiCommon0
          CFI Function ZDApp_ResetNwkKey
        FUNCALL ZDApp_ResetNwkKey, osal_memset
        LOCFRAME CSTACK, 26, STACK
        FUNCALL ZDApp_ResetNwkKey, osal_nv_write
        LOCFRAME CSTACK, 26, STACK
        SUB.W   #0x16, SP
          CFI CFA SP+26
        CALLA   #?Subroutine13
??CrossCallReturnLabel_7:
        CALLA   #?Subroutine14
??CrossCallReturnLabel_10:
        CALLA   #osal_nv_write
        ADD.W   #0x16, SP
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock80

        RSEG CODE:CODE:NOROOT(1)
?Subroutine14:
          CFI Block cfiCond81 Using cfiCommon0
          CFI Function ZDApp_RestoreNwkKey
          CFI Conditional ??CrossCallReturnLabel_9
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+32
          CFI Block cfiCond82 Using cfiCommon0
          CFI (cfiCond82) Function ZDApp_ResetNwkKey
          CFI (cfiCond82) Conditional ??CrossCallReturnLabel_10
          CFI (cfiCond82) CFA SP+30
          CFI Block cfiPicker83 Using cfiCommon1
          CFI (cfiPicker83) NoFunction
          CFI (cfiPicker83) Picker
        MOV.W   SP, R15
        ADD.W   #0x4, R15
        MOV.W   #0x16, R14
        MOV.W   #0x0, R13
        MOV.W   #0x82, R12
        RETA
          CFI EndBlock cfiCond81
          CFI EndBlock cfiCond82
          CFI EndBlock cfiPicker83

        RSEG CODE:CODE:NOROOT(1)
?Subroutine13:
          CFI Block cfiCond84 Using cfiCommon0
          CFI Function ZDApp_RestoreNwkKey
          CFI Conditional ??CrossCallReturnLabel_8
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+32
          CFI Block cfiCond85 Using cfiCommon0
          CFI (cfiCond85) Function ZDApp_ResetNwkKey
          CFI (cfiCond85) Conditional ??CrossCallReturnLabel_7
          CFI (cfiCond85) CFA SP+30
          CFI Block cfiPicker86 Using cfiCommon1
          CFI (cfiPicker86) NoFunction
          CFI (cfiPicker86) Picker
        MOV.W   #0x16, R14
        MOV.B   #0x0, R13
        MOV.W   SP, R12
        ADD.W   #0x4, R12
        BRA     #osal_memset
          CFI EndBlock cfiCond84
          CFI EndBlock cfiCond85
          CFI EndBlock cfiPicker86

        RSEG CODE:CODE:NOROOT(1)
ZDApp_SaveNwkKey:
          CFI Block cfiBlock87 Using cfiCommon0
          CFI Function ZDApp_SaveNwkKey
        FUNCALL ZDApp_SaveNwkKey, SSP_ReadNwkActiveKey
        LOCFRAME CSTACK, 28, STACK
        FUNCALL ZDApp_SaveNwkKey, osal_nv_write
        LOCFRAME CSTACK, 28, STACK
        FUNCALL ZDApp_SaveNwkKey, osal_memset
        LOCFRAME CSTACK, 28, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        SUB.W   #0x16, SP
          CFI CFA SP+28
        MOV.W   SP, R10
        ADD.W   #0x0, R10
        MOV.W   R10, R12
        CALLA   #SSP_ReadNwkActiveKey
        ADD.W   #0x1, 0x12(SP)
        ADDC.W  #0x0, 0x14(SP)
        MOV.W   R10, R15
        MOV.W   #0x16, R14
        MOV.W   #0x0, R13
        MOV.W   #0x82, R12
        CALLA   #osal_nv_write
        MOV.W   #0x0, &nwkFrameCounterChanges
        MOV.W   #0x16, R14
        MOV.B   #0x0, R13
        MOV.W   R10, R12
        CALLA   #osal_memset
        JMP     ?Subroutine0
          CFI EndBlock cfiBlock87

        RSEG CODE:CODE:NOROOT(1)
ZDApp_ProcessNetworkJoin:
          CFI Block cfiBlock88 Using cfiCommon0
          CFI Function ZDApp_ProcessNetworkJoin
        FUNCALL ZDApp_ProcessNetworkJoin, osal_set_event
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, ZDApp_AnnounceNewAddress
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_StartRouterRequest
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_GetShortAddr
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, ZMacSetReq
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, nwkNeighborInitTable
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_NwkDiscTerm
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, osal_rand
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, ZDApp_NetworkInit
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, osal_set_event
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_SetPollRate
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_SetQueuedPollRate
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_SetResponseRate
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_StartRouterRequest
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, ZDApp_AnnounceNewAddress
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, nwkNeighborInitTable
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_NwkDiscTerm
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, osal_rand
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, ZDApp_NetworkInit
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, ZDApp_AnnounceNewAddress
        LOCFRAME CSTACK, 14, STACK
        FUNCALL ZDApp_ProcessNetworkJoin, osal_set_event
        LOCFRAME CSTACK, 14, STACK
        PUSHM.W #0x4, R11
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+12
        SUB.W   #0x2, SP
          CFI CFA SP+14
        MOV.B   &devState, R14
        MOV.W   #0xfffe, R10
        MOV.B   #0x7, R11
        MOV.W   #ZDO_Config_Node_Descriptor, R8
        MOV.B   #0x3, R9
        CMP.B   R9, R14
        JEQ     ??ZDApp_ProcessNetworkJoin_0
        CMP.B   #0xa, R14
        JNE     ??ZDApp_ProcessNetworkJoin_1
        MOV.B   R11, R14
        AND.B   @R8, R14
        CMP.B   #0x1, R14
        JNE     ??ZDApp_ProcessNetworkJoin_2
??ZDApp_ProcessNetworkJoin_0:
        CMP.B   #0x0, &nwkStatus
        JNE     ??ZDApp_ProcessNetworkJoin_3
        CALLA   #??Subroutine9_0
??CrossCallReturnLabel_22:
        CMP.B   #0xa, &devState
        JNE     ??ZDApp_ProcessNetworkJoin_4
        MOV.B   R11, R14
        AND.B   @R8, R14
        CMP.B   #0x2, R14
        JNE     ??ZDApp_ProcessNetworkJoin_5
        MOV.B   #0x6, &devState
        JMP     ??ZDApp_ProcessNetworkJoin_6
??ZDApp_ProcessNetworkJoin_5:
        MOV.B   #0x8, &_NIB + 38
        JMP     ??ZDApp_ProcessNetworkJoin_7
??ZDApp_ProcessNetworkJoin_4:
        CMP.B   R9, &devState
        JNE     ??ZDApp_ProcessNetworkJoin_7
        CALLA   #ZDApp_AnnounceNewAddress
??ZDApp_ProcessNetworkJoin_7:
        MOV.B   #0x6, &devState
        AND.B   @R8, R11
        CMP.B   #0x2, R11
        JEQ     ??ZDApp_ProcessNetworkJoin_6
        CALLA   #?Subroutine6
??CrossCallReturnLabel_0:
        JMP     ??ZDApp_ProcessNetworkJoin_6
??ZDApp_ProcessNetworkJoin_3:
        CMP.B   #0x1, &devStartMode
        JNE     ??ZDApp_ProcessNetworkJoin_8
        ADD.B   #0x1, &retryCnt
        CMP.B   R9, &retryCnt
        JNC     ??ZDApp_ProcessNetworkJoin_8
        CMP.W   #0xffff, &_NIB + 36
        JEQ     ??ZDApp_ProcessNetworkJoin_9
        CMP.W   R10, &_NIB + 36
        JNE     ??ZDApp_ProcessNetworkJoin_10
??ZDApp_ProcessNetworkJoin_9:
        MOV.B   #0x0, &devStartMode
        JMP     ??ZDApp_ProcessNetworkJoin_8
??ZDApp_ProcessNetworkJoin_10:
        MOV.B   R9, &devStartMode
        MOV.B   #0x1, &_tmpRejoinState
??ZDApp_ProcessNetworkJoin_8:
        CALLA   #NLME_GetShortAddr
        CMP.W   R10, R12
        JNE     ??ZDApp_ProcessNetworkJoin_11
        CMP.W   R10, &_NIB + 22
        JEQ     ??ZDApp_ProcessNetworkJoin_12
??ZDApp_ProcessNetworkJoin_11:
        MOV.W   R10, 0(SP)
        MOV.W   R10, &_NIB + 22
        MOV.W   SP, R13
        ADD.W   #0x0, R13
        MOV.B   #0x53, R12
        CALLA   #ZMacSetReq
??ZDApp_ProcessNetworkJoin_12:
        CALLA   #nwkNeighborInitTable
        CALLA   #NLME_NwkDiscTerm
        MOV.B   #0x1, &zdoDiscCounter
        JMP     ??ZDApp_ProcessNetworkJoin_13
??ZDApp_ProcessNetworkJoin_1:
        CMP.B   #0x4, R14
        JNE     ??ZDApp_ProcessNetworkJoin_14
??ZDApp_ProcessNetworkJoin_2:
        CMP.B   #0x0, &nwkStatus
        JNE     ??ZDApp_ProcessNetworkJoin_15
        CALLA   #?Subroutine9
??CrossCallReturnLabel_25:
        BIT.B   #0x8, &ZDO_Config_Node_Descriptor + 2
        JNC     ??ZDApp_ProcessNetworkJoin_16
        CALLA   #?Subroutine7
??ZDApp_ProcessNetworkJoin_16:
        AND.B   @R8, R11
        CMP.B   #0x2, R11
        JEQ     ??ZDApp_ProcessNetworkJoin_17
        CALLA   #?Subroutine6
??ZDApp_ProcessNetworkJoin_17:
        CALLA   #ZDApp_AnnounceNewAddress
        JMP     ??ZDApp_ProcessNetworkJoin_6
??ZDApp_ProcessNetworkJoin_15:
        CMP.B   #0x1, &devStartMode
        JNE     ??ZDApp_ProcessNetworkJoin_18
        ADD.B   #0x1, &retryCnt
        CMP.B   #0x4, &retryCnt
        JC      ??ZDApp_ProcessNetworkJoin_19
        CMP.W   #0xffff, &_NIB + 36
        JEQ     ??ZDApp_ProcessNetworkJoin_20
        CMP.W   R10, &_NIB + 36
        JEQ     ??ZDApp_ProcessNetworkJoin_20
        MOV.B   R9, &devStartMode
        MOV.B   #0x1, &_tmpRejoinState
        JMP     ??ZDApp_ProcessNetworkJoin_18
??ZDApp_ProcessNetworkJoin_19:
        CMP.B   #0x1, &AIB_apsUseInsecureJoin
        JNE     ??ZDApp_ProcessNetworkJoin_18
??ZDApp_ProcessNetworkJoin_20:
        MOV.B   #0x0, &devStartMode
??ZDApp_ProcessNetworkJoin_18:
        CALLA   #nwkNeighborInitTable
        CALLA   #NLME_NwkDiscTerm
??ZDApp_ProcessNetworkJoin_13:
        CALLA   #?Subroutine8
??CrossCallReturnLabel_2:
        JMP     ??ZDApp_ProcessNetworkJoin_6
??ZDApp_ProcessNetworkJoin_14:
        CMP.B   #0x2, &_NIB + 100
        JNE     ??ZDApp_ProcessNetworkJoin_6
        CALLA   #ZDApp_AnnounceNewAddress
        CALLA   #??Subroutine9_0
??ZDApp_ProcessNetworkJoin_6:
        ADD.W   #0x2, SP
          CFI CFA SP+12
        POPM.W  #0x4, R11
          CFI R10L SameValue
          CFI R11L SameValue
          CFI R8L SameValue
          CFI R9L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock88

        RSEG CODE:CODE:NOROOT(1)
ZDApp_ProcessSecMsg:
          CFI Block cfiBlock89 Using cfiCommon0
          CFI Function ZDApp_ProcessSecMsg
        FUNCALL ZDApp_ProcessSecMsg, ZDSecMgrTransportKeyInd
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_ProcessSecMsg, ZDSecMgrRemoveDeviceInd
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_ProcessSecMsg, ZDSecMgrSwitchKeyInd
        LOCFRAME CSTACK, 4, STACK
        MOV.B   &zgDeviceLogicalType, R14
        MOV.B   @R12, R15
        SUB.B   #0x6, R15
        JEQ     ??ZDApp_ProcessSecMsg_0
        SUB.B   #0x2, R15
        JEQ     ??ZDApp_ProcessSecMsg_1
        SUB.B   #0x2, R15
        JEQ     ??ZDApp_ProcessSecMsg_2
        RETA
??ZDApp_ProcessSecMsg_0:
        CMP.B   #0x1, R14
        JEQ     ??ZDApp_ProcessSecMsg_3
        CMP.B   #0x2, R14
        JNE     ??ZDApp_ProcessSecMsg_4
??ZDApp_ProcessSecMsg_3:
        BRA     #ZDSecMgrTransportKeyInd
??ZDApp_ProcessSecMsg_1:
        CMP.B   #0x1, R14
        JNE     ??ZDApp_ProcessSecMsg_4
        BRA     #ZDSecMgrRemoveDeviceInd
??ZDApp_ProcessSecMsg_2:
        CMP.B   #0x1, R14
        JEQ     ??ZDApp_ProcessSecMsg_5
        CMP.B   #0x2, R14
        JNE     ??ZDApp_ProcessSecMsg_4
??ZDApp_ProcessSecMsg_5:
        CALLA   #ZDSecMgrSwitchKeyInd
??ZDApp_ProcessSecMsg_4:
        RETA
          CFI EndBlock cfiBlock89

        RSEG CODE:CODE:NOROOT(1)
ZDApp_RegisterCBs:
          CFI Block cfiBlock90 Using cfiCommon0
          CFI Function ZDApp_RegisterCBs
        FUNCALL ZDApp_RegisterCBs, ZDO_RegisterForZDOMsg
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_RegisterCBs, ZDO_RegisterForZDOMsg
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_RegisterCBs, ZDO_RegisterForZDOMsg
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_RegisterCBs, ZDO_RegisterForZDOMsg
        LOCFRAME CSTACK, 6, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        MOV.W   #ZDAppTaskID, R10
        MOV.W   #0x8001, R13
        CALLA   #?Subroutine17
??CrossCallReturnLabel_18:
        MOV.W   #0x8000, R13
        CALLA   #?Subroutine17
??CrossCallReturnLabel_17:
        MOV.W   #0x21, R13
        CALLA   #?Subroutine17
??CrossCallReturnLabel_16:
        MOV.W   #0x22, R13
        CALLA   #?Subroutine17
??CrossCallReturnLabel_15:
        POP.W   R10
          CFI R10L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock90

        RSEG CODE:CODE:NOROOT(1)
?Subroutine17:
          CFI Block cfiCond91 Using cfiCommon0
          CFI Function ZDApp_RegisterCBs
          CFI Conditional ??CrossCallReturnLabel_18
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+10
          CFI Block cfiCond92 Using cfiCommon0
          CFI (cfiCond92) Function ZDApp_RegisterCBs
          CFI (cfiCond92) Conditional ??CrossCallReturnLabel_17
          CFI (cfiCond92) R10L Frame(CFA, -6)
          CFI (cfiCond92) CFA SP+10
          CFI Block cfiCond93 Using cfiCommon0
          CFI (cfiCond93) Function ZDApp_RegisterCBs
          CFI (cfiCond93) Conditional ??CrossCallReturnLabel_16
          CFI (cfiCond93) R10L Frame(CFA, -6)
          CFI (cfiCond93) CFA SP+10
          CFI Block cfiCond94 Using cfiCommon0
          CFI (cfiCond94) Function ZDApp_RegisterCBs
          CFI (cfiCond94) Conditional ??CrossCallReturnLabel_15
          CFI (cfiCond94) R10L Frame(CFA, -6)
          CFI (cfiCond94) CFA SP+10
          CFI Block cfiPicker95 Using cfiCommon1
          CFI (cfiPicker95) NoFunction
          CFI (cfiPicker95) Picker
        MOV.B   @R10, R12
        BRA     #ZDO_RegisterForZDOMsg
          CFI EndBlock cfiCond91
          CFI EndBlock cfiCond92
          CFI EndBlock cfiCond93
          CFI EndBlock cfiCond94
          CFI EndBlock cfiPicker95

        RSEG CODE:CODE:NOROOT(1)
ZDApp_ProcessMsgCBs:
          CFI Block cfiBlock96 Using cfiCommon0
          CFI Function ZDApp_ProcessMsgCBs
        FUNCALL ZDApp_ProcessMsgCBs, ZDO_ParseAddrRsp
        LOCFRAME CSTACK, 30, STACK
        FUNCALL ZDApp_ProcessMsgCBs, ZDO_UpdateAddrManager
        LOCFRAME CSTACK, 30, STACK
        FUNCALL ZDApp_ProcessMsgCBs, osal_mem_free
        LOCFRAME CSTACK, 30, STACK
        FUNCALL ZDApp_ProcessMsgCBs, ZDO_ParseBindUnbindReq
        LOCFRAME CSTACK, 30, STACK
        FUNCALL ZDApp_ProcessMsgCBs, ZDO_ProcessBindUnbindReq
        LOCFRAME CSTACK, 30, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        SUB.W   #0x18, SP
          CFI CFA SP+30
        MOV.W   R12, R10
        MOV.W   0xe(R12), R15
        SUB.W   #0x21, R15
        JEQ     ??ZDApp_ProcessMsgCBs_2
        SUB.W   #0x1, R15
        JEQ     ??ZDApp_ProcessMsgCBs_2
        SUB.W   #0x7fde, R15
        JEQ     ??ZDApp_ProcessMsgCBs_0
        SUB.W   #0x1, R15
        JNE     ??ZDApp_ProcessMsgCBs_1
??ZDApp_ProcessMsgCBs_0:
        CALLA   #ZDO_ParseAddrRsp
        MOV.W   R12, R10
        CMP.W   #0x0, R12
        JEQ     ??ZDApp_ProcessMsgCBs_1
        CMP.B   #0x0, 0(R12)
        JNE     ??ZDApp_ProcessMsgCBs_3
        MOV.W   R12, R13
        ADD.W   #0x4, R13
        MOV.W   0x2(R10), R12
        CALLA   #ZDO_UpdateAddrManager
??ZDApp_ProcessMsgCBs_3:
        MOV.W   R10, R12
        CALLA   #osal_mem_free
        JMP     ??ZDApp_ProcessMsgCBs_1
??ZDApp_ProcessMsgCBs_2:
        MOV.W   SP, R13
        ADD.W   #0x0, R13
        CALLA   #ZDO_ParseBindUnbindReq
        MOV.W   SP, R13
        ADD.W   #0x0, R13
        MOV.W   R10, R12
        CALLA   #ZDO_ProcessBindUnbindReq
??ZDApp_ProcessMsgCBs_1:
        ADD.W   #0x18, SP
          CFI CFA SP+6
        POP.W   R10
          CFI R10L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock96

        RSEG CODE:CODE:NOROOT(1)
ZDApp_ProcessOSALMsg:
          CFI Block cfiBlock97 Using cfiCommon0
          CFI Function ZDApp_ProcessOSALMsg
        FUNCALL ZDApp_ProcessOSALMsg, ZDP_IncomingData
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_ProcessMsgCBs
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NwkDescListProcessing
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NodeProfileSync
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, NLME_JoinRequest
        LOCFRAME CSTACK, 12, STACK
        FUNCALL ZDApp_ProcessOSALMsg, osal_rand
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NetworkInit
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, osal_rand
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZMacSetReq
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZMacSetReq
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZMacSetReq
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, NLME_ReJoinRequest
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, osal_rand
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NetworkInit
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, NLME_SetPollRate
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, NLME_SetQueuedPollRate
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, NLME_SetResponseRate
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, osal_rand
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NetworkInit
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_ProcessNetworkJoin
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, sAddrExtCpy
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NetworkInit
        LOCFRAME CSTACK, 8, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        SUB.W   #0x2, SP
          CFI CFA SP+8
        MOV.B   &zgDeviceLogicalType, R14
        MOV.B   @R12, R15
        SUB.B   #0x1, R15
        JEQ     ??ZDApp_ProcessOSALMsg_0
        SUB.B   #0x1, R15
        JEQ     ??ZDApp_ProcessOSALMsg_1
        SUB.B   #0x1, R15
        JEQ     ??ZDApp_ProcessOSALMsg_2
        SUB.B   #0x17, R15
        JEQ     ??ZDApp_ProcessOSALMsg_3
        SUB.B   #0xb9, R15
        JEQ     ??ZDApp_ProcessOSALMsg_4
        SUB.B   #0x2a, R15
        JEQ     ??ZDApp_ProcessOSALMsg_5
        JMP     ??ZDApp_ProcessOSALMsg_6
??ZDApp_ProcessOSALMsg_3:
        CALLA   #ZDP_IncomingData
        JMP     ??ZDApp_ProcessOSALMsg_6
??ZDApp_ProcessOSALMsg_4:
        CALLA   #ZDApp_ProcessMsgCBs
        JMP     ??ZDApp_ProcessOSALMsg_6
??ZDApp_ProcessOSALMsg_5:
        MOV.W   &pZDNwkMgr_ProcessDataConfirm, R15
        BIS.W   &pZDNwkMgr_ProcessDataConfirm + 2, R15
        CMP.W   #0x0, R15
        JEQ     ??ZDApp_ProcessOSALMsg_6
        CALLA   &pZDNwkMgr_ProcessDataConfirm
        JMP     ??ZDApp_ProcessOSALMsg_6
??ZDApp_ProcessOSALMsg_0:
        CMP.B   #0x2, &devState
        JNE     ??ZDApp_ProcessOSALMsg_6
        CMP.B   #0x1, R14
        JEQ     ??ZDApp_ProcessOSALMsg_7
        CMP.B   #0x2, R14
        JNE     ??ZDApp_ProcessOSALMsg_6
??ZDApp_ProcessOSALMsg_7:
        CALLA   #ZDApp_NwkDescListProcessing
        MOV.W   R12, R10
        CMP.W   #0x0, R12
        JEQ     ??ZDApp_ProcessOSALMsg_8
        CMP.B   #0x3, &zdoDiscCounter
        JNC     ??ZDApp_ProcessOSALMsg_8
        CMP.B   #0x0, &devStartMode
        JNE     ??ZDApp_ProcessOSALMsg_9
        MOV.B   #0x3, &devState
        MOV.B   0x6(R10), R12
        CALLA   #ZDApp_NodeProfileSync
        PUSH.B  0xb(R10)
          CFI CFA SP+10
        PUSH.W  0x8(R10)
          CFI CFA SP+12
        MOV.B   &ZDO_Config_Node_Descriptor + 2, R15
        MOV.B   0x2(R10), R14
        MOV.W   @R10, R13
        ADD.W   #0xc, R10
        MOV.W   R10, R12
        CALLA   #NLME_JoinRequest
        ADD.W   #0x4, SP
          CFI CFA SP+8
        JMP     ??ZDApp_ProcessOSALMsg_10
??ZDApp_ProcessOSALMsg_9:
        CMP.B   #0x3, &devStartMode
        JNE     ??ZDApp_ProcessOSALMsg_11
        MOV.B   #0x4, &devState
        CMP.W   #0xfffe, &_NIB + 22
        JNE     ??ZDApp_ProcessOSALMsg_12
        CALLA   #osal_rand
        MOV.W   R12, &_NIB + 22
        MOV.W   #_NIB + 22, R13
        MOV.B   #0x53, R12
        CALLA   #ZMacSetReq
??ZDApp_ProcessOSALMsg_12:
        CMP.W   #0xfffe, &_NIB + 36
        JNE     ??ZDApp_ProcessOSALMsg_13
        MOV.W   @R10, &_NIB + 36
        MOV.W   #_NIB + 36, R13
        MOV.B   #0x50, R12
        CALLA   #ZMacSetReq
??ZDApp_ProcessOSALMsg_13:
        MOV.B   #0x1, 0(SP)
        MOV.W   SP, R13
        ADD.W   #0x0, R13
        MOV.B   #0x52, R12
        CALLA   #ZMacSetReq
        MOV.B   0x2(R10), R13
        MOV.W   #ZDO_UseExtendedPANID, R12
        CALLA   #NLME_ReJoinRequest
??ZDApp_ProcessOSALMsg_10:
        CMP.B   #0x0, R12
        JEQ     ??ZDApp_ProcessOSALMsg_11
        CALLA   #?Subroutine8
??ZDApp_ProcessOSALMsg_11:
        BIT.B   #0x8, &ZDO_Config_Node_Descriptor + 2
        JNC     ??ZDApp_ProcessOSALMsg_6
        CALLA   #?Subroutine7
??CrossCallReturnLabel_1:
        JMP     ??ZDApp_ProcessOSALMsg_6
??ZDApp_ProcessOSALMsg_8:
        CMP.B   #0x0, &continueJoining
        JEQ     ??ZDApp_ProcessOSALMsg_6
        ADD.B   #0x1, &zdoDiscCounter
        CALLA   #osal_rand
        AND.B   #0xff, R12
        ADD.W   #0x64, R12
        JMP     ??ZDApp_ProcessOSALMsg_14
??ZDApp_ProcessOSALMsg_1:
        CMP.B   #0x1, R14
        JEQ     ??ZDApp_ProcessOSALMsg_15
        CMP.B   #0x2, R14
        JNE     ??ZDApp_ProcessOSALMsg_6
??ZDApp_ProcessOSALMsg_15:
        CALLA   #ZDApp_ProcessNetworkJoin
        JMP     ??ZDApp_ProcessOSALMsg_6
??ZDApp_ProcessOSALMsg_2:
        CMP.B   #0x1, R14
        JEQ     ??ZDApp_ProcessOSALMsg_16
        CMP.B   #0x2, R14
        JNE     ??ZDApp_ProcessOSALMsg_6
??ZDApp_ProcessOSALMsg_16:
        MOV.B   #0x0, &retryCnt
        MOV.B   #0x1, &devStartMode
        MOV.B   #0x1, &_tmpRejoinState
        CALLA   #?Subroutine16
??CrossCallReturnLabel_14:
        MOV.B   #0x2, &zgDefaultStartingScanDuration
        MOV.W   #0x0, R12
??ZDApp_ProcessOSALMsg_14:
        CALLA   #ZDApp_NetworkInit
??ZDApp_ProcessOSALMsg_6:
        BRA     #?Subroutine1
          CFI EndBlock cfiBlock97

        RSEG CODE:CODE:NOROOT(1)
?Subroutine8:
          CFI Block cfiCond98 Using cfiCommon0
          CFI Function ZDApp_ProcessNetworkJoin
          CFI Conditional ??CrossCallReturnLabel_2
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+18
          CFI Block cfiCond99 Using cfiCommon0
          CFI (cfiCond99) Function ZDApp_ProcessOSALMsg
          CFI (cfiCond99) Conditional ??ZDApp_ProcessOSALMsg_11
          CFI (cfiCond99) R10L Frame(CFA, -6)
          CFI (cfiCond99) CFA SP+12
          CFI Block cfiPicker100 Using cfiCommon1
          CFI (cfiPicker100) NoFunction
          CFI (cfiPicker100) Picker
        CALLA   #osal_rand
        AND.W   #0x7f, R12
        ADD.W   #0x64, R12
        BRA     #ZDApp_NetworkInit
          CFI EndBlock cfiCond98
          CFI EndBlock cfiCond99
          CFI EndBlock cfiPicker100

        RSEG CODE:CODE:NOROOT(1)
?Subroutine7:
          CFI Block cfiCond101 Using cfiCommon0
          CFI Function ZDApp_ProcessNetworkJoin
          CFI Conditional ??ZDApp_ProcessNetworkJoin_16
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+18
          CFI Block cfiCond102 Using cfiCommon0
          CFI (cfiCond102) Function ZDApp_ProcessOSALMsg
          CFI (cfiCond102) Conditional ??CrossCallReturnLabel_1
          CFI (cfiCond102) R10L Frame(CFA, -6)
          CFI (cfiCond102) CFA SP+12
          CFI Block cfiPicker103 Using cfiCommon1
          CFI (cfiPicker103) NoFunction
          CFI (cfiPicker103) Picker
        MOV.W   #0x0, R12
        CALLA   #NLME_SetPollRate
        MOV.W   #0x0, R12
        CALLA   #NLME_SetQueuedPollRate
        MOV.W   #0x0, R12
        BRA     #NLME_SetResponseRate
          CFI EndBlock cfiCond101
          CFI EndBlock cfiCond102
          CFI EndBlock cfiPicker103

        RSEG CODE:CODE:NOROOT(1)
ZDAppCheckForHoldKey:
          CFI Block cfiBlock104 Using cfiCommon0
          CFI Function ZDAppCheckForHoldKey
        FUNCALL ZDAppCheckForHoldKey, HalKeyRead
        LOCFRAME CSTACK, 4, STACK
        CALLA   #HalKeyRead
        CMP.B   #0x1, R12
        JNE     ??ZDAppCheckForHoldKey_0
        MOV.B   #0x0, &devState
??ZDAppCheckForHoldKey_0:
        RETA
          CFI EndBlock cfiBlock104

        RSEG CODE:CODE:NOROOT(1)
ZDApp_InitUserDesc:
          CFI Block cfiBlock105 Using cfiCommon0
          CFI Function ZDApp_InitUserDesc
        FUNCALL ZDApp_InitUserDesc, osal_memset
        LOCFRAME CSTACK, 24, STACK
        FUNCALL ZDApp_InitUserDesc, osal_nv_item_init
        LOCFRAME CSTACK, 24, STACK
        FUNCALL ZDApp_InitUserDesc, osal_nv_read
        LOCFRAME CSTACK, 24, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        SUB.W   #0x12, SP
          CFI CFA SP+24
        MOV.W   SP, R10
        ADD.W   #0x0, R10
        MOV.W   #0x11, R14
        MOV.B   #0x0, R13
        MOV.W   R10, R12
        CALLA   #osal_memset
        MOV.W   R10, R14
        MOV.W   #0x11, R13
        MOV.W   #0x81, R12
        CALLA   #osal_nv_item_init
        CMP.B   #0x0, R12
        JNE     ??ZDApp_InitUserDesc_0
        MOV.W   R10, R15
        MOV.W   #0x11, R14
        MOV.W   #0x0, R13
        MOV.W   #0x81, R12
        CALLA   #osal_nv_read
        CMP.B   #0x0, R12
        JNE     ??ZDApp_InitUserDesc_0
        CMP.B   #0x0, 0(SP)
        JEQ     ??ZDApp_InitUserDesc_0
        BIS.B   #0x10, &ZDO_Config_Node_Descriptor
??ZDApp_InitUserDesc_0:
        ADD.W   #0x12, SP
          CFI CFA SP+6
        POP.W   R10
          CFI R10L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock105

        RSEG CODE:CODE:NOROOT(1)
ZDApp_RestoreNetworkState:
          CFI Block cfiBlock106 Using cfiCommon0
          CFI Function ZDApp_RestoreNetworkState
        FUNCALL ZDApp_RestoreNetworkState, NLME_InitNV
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_RestoreNetworkState, NLME_RestoreFromNV
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_RestoreNetworkState, NLME_GetShortAddr
        LOCFRAME CSTACK, 6, STACK
        FUNCALL ZDApp_RestoreNetworkState, sAddrExtCpy
        LOCFRAME CSTACK, 6, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        CALLA   #NLME_InitNV
        MOV.B   R12, R10
        CMP.B   #0xa, R12
        JEQ     ??ZDApp_RestoreNetworkState_0
        CALLA   #NLME_RestoreFromNV
        CMP.B   #0x0, R12
        JEQ     ??ZDApp_RestoreNetworkState_0
        CALLA   #NLME_GetShortAddr
        MOV.W   R12, &ZDAppNwkAddr
        CMP.W   #0x0, R12
        JNE     ??ZDApp_RestoreNetworkState_1
        AND.B   #0xf8, &ZDO_Config_Node_Descriptor
??ZDApp_RestoreNetworkState_1:
        MOV.B   #0x1, &devStartMode
        CALLA   #?Subroutine16
??CrossCallReturnLabel_13:
        CMP.B   #0x0, R10
        JNE     ??ZDApp_RestoreNetworkState_0
        MOV.B   #0x0, R12
        JMP     ??ZDApp_RestoreNetworkState_2
??ZDApp_RestoreNetworkState_0:
        MOV.B   #0x1, R12
??ZDApp_RestoreNetworkState_2:
        POP.W   R10
          CFI R10L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock106

        RSEG CODE:CODE:NOROOT(1)
?Subroutine16:
          CFI Block cfiCond107 Using cfiCommon0
          CFI Function ZDApp_ProcessOSALMsg
          CFI Conditional ??CrossCallReturnLabel_14
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+12
          CFI Block cfiCond108 Using cfiCommon0
          CFI (cfiCond108) Function ZDApp_RestoreNetworkState
          CFI (cfiCond108) Conditional ??CrossCallReturnLabel_13
          CFI (cfiCond108) R10L Frame(CFA, -6)
          CFI (cfiCond108) CFA SP+10
          CFI Block cfiPicker109 Using cfiCommon1
          CFI (cfiPicker109) NoFunction
          CFI (cfiPicker109) Picker
        MOV.W   #_NIB + 57, R13
        MOV.W   #ZDO_UseExtendedPANID, R12
        BRA     #sAddrExtCpy
          CFI EndBlock cfiCond107
          CFI EndBlock cfiCond108
          CFI EndBlock cfiPicker109

        RSEG CODE:CODE:NOROOT(1)
ZDApp_SaveNetworkStateEvt:
          CFI Block cfiBlock110 Using cfiCommon0
          CFI Function ZDApp_SaveNetworkStateEvt
        RETA
          CFI EndBlock cfiBlock110

        RSEG CODE:CODE:NOROOT(1)
ZDApp_DeviceAuthEvt:
          CFI Block cfiBlock111 Using cfiCommon0
          CFI Function ZDApp_DeviceAuthEvt
        FUNCALL ZDApp_DeviceAuthEvt, ZDApp_ResetTimerCancel
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_DeviceAuthEvt, osal_set_event
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_DeviceAuthEvt, NLME_StartRouterRequest
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_DeviceAuthEvt, ZDApp_SaveNwkKey
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_DeviceAuthEvt, ZDApp_AnnounceNewAddress
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_DeviceAuthEvt, NLME_SetPollRate
        LOCFRAME CSTACK, 4, STACK
        CMP.B   #0x5, &devState
        JNE     ??ZDApp_DeviceAuthEvt_0
        CALLA   #ZDApp_ResetTimerCancel
        CALLA   #?Subroutine9
??CrossCallReturnLabel_24:
        MOV.B   &ZDO_Config_Node_Descriptor, R14
        AND.B   #0x7, R14
        CMP.B   #0x2, R14
        JEQ     ??ZDApp_DeviceAuthEvt_1
        CALLA   #?Subroutine6
??ZDApp_DeviceAuthEvt_1:
        CALLA   #ZDApp_SaveNwkKey
        CALLA   #ZDApp_AnnounceNewAddress
        BIT.B   #0x8, &ZDO_Config_Node_Descriptor + 2
        JC      ??ZDApp_DeviceAuthEvt_0
        MOV.W   &ZDApp_SavedPollRate, R12
        CALLA   #NLME_SetPollRate
??ZDApp_DeviceAuthEvt_0:
        RETA
          CFI EndBlock cfiBlock111

        RSEG CODE:CODE:NOROOT(1)
?Subroutine6:
          CFI Block cfiCond112 Using cfiCommon0
          CFI Function ZDApp_ProcessNetworkJoin
          CFI Conditional ??CrossCallReturnLabel_0
          CFI R8L Frame(CFA, -12)
          CFI R9L Frame(CFA, -10)
          CFI R10L Frame(CFA, -8)
          CFI R11L Frame(CFA, -6)
          CFI CFA SP+18
          CFI Block cfiCond113 Using cfiCommon0
          CFI (cfiCond113) Function ZDApp_ProcessNetworkJoin
          CFI (cfiCond113) Conditional ??ZDApp_ProcessNetworkJoin_17
          CFI (cfiCond113) R8L Frame(CFA, -12)
          CFI (cfiCond113) R9L Frame(CFA, -10)
          CFI (cfiCond113) R10L Frame(CFA, -8)
          CFI (cfiCond113) R11L Frame(CFA, -6)
          CFI (cfiCond113) CFA SP+18
          CFI Block cfiCond114 Using cfiCommon0
          CFI (cfiCond114) Function ZDApp_DeviceAuthEvt
          CFI (cfiCond114) Conditional ??ZDApp_DeviceAuthEvt_1
          CFI (cfiCond114) CFA SP+8
          CFI Block cfiPicker115 Using cfiCommon1
          CFI (cfiPicker115) NoFunction
          CFI (cfiPicker115) Picker
        MOV.B   #0x0, R14
        MOV.B   #0x0, R13
        MOV.B   #0x0, R12
        BRA     #NLME_StartRouterRequest
          CFI EndBlock cfiCond112
          CFI EndBlock cfiCond113
          CFI EndBlock cfiCond114
          CFI EndBlock cfiPicker115

        RSEG CODE:CODE:NOROOT(1)
ZDApp_NetworkStartEvt:
          CFI Block cfiBlock116 Using cfiCommon0
          CFI Function ZDApp_NetworkStartEvt
        FUNCALL ZDApp_NetworkStartEvt, osal_pwrmgr_device
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_NetworkStartEvt, osal_set_event
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_NetworkStartEvt, NLME_GetEnergyThreshold
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_NetworkStartEvt, NLME_GetEnergyThreshold
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_NetworkStartEvt, NLME_SetEnergyThreshold
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_NetworkStartEvt, osal_set_event
        LOCFRAME CSTACK, 4, STACK
        FUNCALL ZDApp_NetworkStartEvt, osal_set_event
        LOCFRAME CSTACK, 4, STACK
        CMP.B   #0x0, &nwkStatus
        JNE     ??ZDApp_NetworkStartEvt_0
        CMP.B   #0x8, &devState
        JNE     ??ZDApp_NetworkStartEvt_1
        MOV.B   #0x9, &devState
??ZDApp_NetworkStartEvt_1:
        MOV.B   #0x0, R12
        CALLA   #osal_pwrmgr_device
        JMP     ??ZDApp_NetworkStartEvt_2
??ZDApp_NetworkStartEvt_0:
        CALLA   #NLME_GetEnergyThreshold
        MOV.B   R12, R12
        ADD.W   #0x10, R12
        CMP.W   #0xff, R12
        JGE     ??ZDApp_NetworkStartEvt_3
        CALLA   #NLME_GetEnergyThreshold
        ADD.B   #0x10, R12
        CALLA   #NLME_SetEnergyThreshold
        MOV.W   #0x1, R13
        JMP     ??ZDApp_NetworkStartEvt_4
??ZDApp_NetworkStartEvt_3:
        MOV.B   #0x1, &devState
??ZDApp_NetworkStartEvt_2:
        MOV.W   #0x10, R13
??ZDApp_NetworkStartEvt_4:
        BRA     #?Subroutine3
          CFI EndBlock cfiBlock116

        RSEG CODE:CODE:NOROOT(1)
ZDAppDetermineDeviceType:
          CFI Block cfiBlock117 Using cfiCommon0
          CFI Function ZDAppDetermineDeviceType
        FUNCALL ZDAppDetermineDeviceType, nwk_ExtPANIDValid
        LOCFRAME CSTACK, 4, STACK
        MOV.B   &zgDeviceLogicalType, R14
        CMP.B   #0x0, R14
        JNE     ??ZDAppDetermineDeviceType_1
        MOV.B   #0x2, R14
        AND.B   #0xf8, &ZDO_Config_Node_Descriptor
        JMP     ??ZDAppDetermineDeviceType_0
??ZDAppDetermineDeviceType_1:
        MOV.B   &ZDO_Config_Node_Descriptor, R15
        AND.B   #0xf8, R15
        CMP.B   #0x1, R14
        JNE     ??ZDAppDetermineDeviceType_2
        BIS.B   #0x1, R15
        JMP     ??ZDAppDetermineDeviceType_3
??ZDAppDetermineDeviceType_2:
        CMP.B   #0x2, R14
        JNE     ??ZDAppDetermineDeviceType_4
        BIS.B   #0x2, R15
??ZDAppDetermineDeviceType_3:
        MOV.B   R15, &ZDO_Config_Node_Descriptor
??ZDAppDetermineDeviceType_4:
        MOV.W   #AIB_apsUseExtendedPANID, R12
        CALLA   #nwk_ExtPANIDValid
        CMP.B   #0x0, R12
        JEQ     ??ZDAppDetermineDeviceType_5
        MOV.B   #0x3, R14
        JMP     ??ZDAppDetermineDeviceType_0
??ZDAppDetermineDeviceType_5:
        MOV.B   #0x0, R14
??ZDAppDetermineDeviceType_0:
        MOV.B   R14, &devStartMode
        RETA
          CFI EndBlock cfiBlock117

        RSEG CODE:CODE:NOROOT(1)
ZDApp_ReadNetworkRestoreState:
          CFI Block cfiBlock118 Using cfiCommon0
          CFI Function ZDApp_ReadNetworkRestoreState
        FUNCALL ZDApp_ReadNetworkRestoreState, zgReadStartupOptions
        LOCFRAME CSTACK, 6, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        MOV.B   #0x0, R10
        CALLA   #zgReadStartupOptions
        BIT.B   #0x2, R12
        JNC     ??ZDApp_ReadNetworkRestoreState_0
        MOV.B   #0x1, R10
??ZDApp_ReadNetworkRestoreState_0:
        MOV.B   R10, R12
        POP.W   R10
          CFI R10L SameValue
          CFI CFA SP+4
        RETA
          CFI EndBlock cfiBlock118

        RSEG CODE:CODE:REORDER:NOROOT(1)
ZDOInitDevice:
          CFI Block cfiBlock119 Using cfiCommon0
          CFI Function ZDOInitDevice
        FUNCALL ZDOInitDevice, zgInitItems
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, ZDConfig_InitDescriptors
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, ZDAppDetermineDeviceType
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, osal_rand
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, ZDSecMgrInit
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, ZDApp_LeaveCtrlInit
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, ZDApp_LeaveCtrlStartup
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, zgWriteStartupOptions
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, osal_set_event
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, ZDApp_NetworkInit
        LOCFRAME CSTACK, 8, STACK
        FUNCALL ZDOInitDevice, NLME_SetBroadcastFilter
        LOCFRAME CSTACK, 8, STACK
        PUSH.W  R10
          CFI R10L Frame(CFA, -6)
          CFI CFA SP+6
        PUSH.W  R12
          CFI CFA SP+8
        CMP.B   #0x0, &devState
        JNE     ??ZDOInitDevice_0
        MOV.B   #0x0, R12
        CALLA   #zgInitItems
??ZDOInitDevice_0:
        CALLA   #ZDConfig_InitDescriptors
        MOV.B   &ZDO_Config_Node_Descriptor + 2, &_NIB + 14
        CALLA   #ZDAppDetermineDeviceType
        CALLA   #osal_rand
        MOV.W   R12, R10
        AND.W   #0x7f, R10
        ADD.W   @SP, R10
        ADD.W   #0x64, R10
        MOV.B   #0x1, R12
        CALLA   #ZDSecMgrInit
        CMP.W   #0xffff, 0(SP)
        JEQ     ??ZDOInitDevice_1
        MOV.B   #0x1, &devState
        CALLA   #ZDApp_LeaveCtrlInit
        MOV.W   SP, R13
        ADD.W   #0x0, R13
        MOV.W   #devState, R12
        CALLA   #ZDApp_LeaveCtrlStartup
        CMP.B   #0x0, &devState
        JNE     ??ZDOInitDevice_2
        MOV.B   #0x2, R13
        MOV.B   #0xff, R12
        CALLA   #zgWriteStartupOptions
        CALLA   #??Subroutine9_0
??CrossCallReturnLabel_21:
        MOV.B   #0x2, R12
        JMP     ??ZDOInitDevice_3
??ZDOInitDevice_2:
        MOV.W   R10, R12
        CALLA   #ZDApp_NetworkInit
??ZDOInitDevice_1:
        MOV.B   &ZDO_Config_Node_Descriptor + 2, R12
        CALLA   #NLME_SetBroadcastFilter
        MOV.B   #0x1, R12
??ZDOInitDevice_3:
        BRA     #?Subroutine1
          CFI EndBlock cfiBlock119
// 2510 
// 2511 /*********************************************************************
// 2512  * @fn          ZDO_LeaveCnf
// 2513  *
// 2514  * @brief       This function allows the next higher layer to be
// 2515  *              notified of the results of its request for this or
// 2516  *              a child device to leave the network.
// 2517  *
// 2518  * @param       cnf - NLME_LeaveCnf_t
// 2519  *
// 2520  * @return      none
// 2521  */
// 2522 void ZDO_LeaveCnf( NLME_LeaveCnf_t* cnf )
// 2523 {
// 2524   // Check for this device
// 2525   if ( osal_ExtAddrEqual( cnf->extAddr,
// 2526                           NLME_GetExtAddr() ) == TRUE )
// 2527   {
// 2528     // Pass the leave confirm to higher layer if callback registered
// 2529     if ( ( zdoCBFunc[ZDO_LEAVE_CNF_CBID] == NULL ) ||
// 2530          ( (*zdoCBFunc[ZDO_LEAVE_CNF_CBID])( cnf ) == NULL ) )
// 2531     {
// 2532       // Prepare to leave with reset
// 2533       ZDApp_LeaveReset( cnf->rejoin );
// 2534     }
// 2535   }
// 2536   else if ( ZSTACK_ROUTER_BUILD )
// 2537   {
// 2538     // Remove device address(optionally descendents) from data
// 2539     ZDApp_LeaveUpdate( cnf->dstAddr,
// 2540                        cnf->extAddr,
// 2541                        cnf->removeChildren );
// 2542   }
// 2543 }
// 2544 
// 2545 /*********************************************************************
// 2546  * @fn          ZDO_LeaveInd
// 2547  *
// 2548  * @brief       This function allows the next higher layer of a
// 2549  *              device to be notified of a remote leave request or
// 2550  *              indication.
// 2551  *
// 2552  * @param       ind - NLME_LeaveInd_t
// 2553  *
// 2554  * @return      none
// 2555  */
// 2556 void ZDO_LeaveInd( NLME_LeaveInd_t* ind )
// 2557 {
// 2558   uint8 leave;
// 2559 
// 2560 
// 2561   // Parent is requesting the leave - NWK layer filters out illegal
// 2562   // requests
// 2563   if ( ind->request == TRUE )
// 2564   {
// 2565     // Notify network of leave
// 2566     if ( ZSTACK_ROUTER_BUILD )
// 2567     {
// 2568       NLME_LeaveRsp_t rsp;
// 2569       rsp.rejoin         = ind->rejoin;
// 2570       rsp.removeChildren = ind->removeChildren;
// 2571       NLME_LeaveRsp( &rsp );
// 2572     }
// 2573 
// 2574     // Prepare to leave with reset
// 2575     ZDApp_LeaveReset( ind->rejoin );
// 2576   }
// 2577   else
// 2578   {
// 2579     leave = FALSE;
// 2580 
// 2581     // Check if this device needs to leave as a child or descendent
// 2582     if ( ind->srcAddr == NLME_GetCoordShortAddr() )
// 2583     {
// 2584       if ( ( ind->removeChildren == TRUE               ) ||
// 2585            ( ZDO_Config_Node_Descriptor.LogicalType ==
// 2586              NODETYPE_DEVICE                           )    )
// 2587       {
// 2588         leave = TRUE;
// 2589       }
// 2590     }
// 2591     else if ( ind->removeChildren == TRUE )
// 2592     {
// 2593       // Check NWK address allocation algorithm
// 2594       //leave = RTG_ANCESTOR(nwkAddr,thisAddr);
// 2595     }
// 2596 
// 2597     if ( leave == TRUE )
// 2598     {
// 2599       // Prepare to leave with reset
// 2600       ZDApp_LeaveReset( ind->rejoin );
// 2601     }
// 2602     else
// 2603     {
// 2604       // Remove device address(optionally descendents) from data
// 2605       ZDApp_LeaveUpdate( ind->srcAddr,
// 2606                          ind->extAddr,
// 2607                          ind->removeChildren );
// 2608     }
// 2609   }
// 2610 
// 2611   // Pass the leave indication to higher layer if callback registered.
// 2612   if (zdoCBFunc[ZDO_LEAVE_IND_CBID] != NULL)
// 2613   {
// 2614     (void)zdoCBFunc[ZDO_LEAVE_IND_CBID](ind);
// 2615   }
// 2616 }
// 2617 
// 2618 /*********************************************************************
// 2619  * @fn          ZDO_SyncIndicationCB
// 2620  *
// 2621  * @brief       This function allows the next higher layer of a
// 2622  *              coordinator to be notified of a loss of synchronization
// 2623  *                          with the parent/child device.
// 2624  *
// 2625  * @param       type: 0 - child; 1 - parent
// 2626  *
// 2627  *
// 2628  * @return      none
// 2629  */
// 2630 void ZDO_SyncIndicationCB( uint8 type, uint16 shortAddr )
// 2631 {
// 2632   (void)shortAddr;  // Remove this line if this parameter is used.
// 2633 
// 2634   if ( ZSTACK_END_DEVICE_BUILD
// 2635     || (ZSTACK_ROUTER_BUILD && ((_NIB.CapabilityFlags & ZMAC_ASSOC_CAPINFO_FFD_TYPE) == 0)))
// 2636   {
// 2637     if ( type == 1 )
// 2638     {
// 2639       // We lost contact with our parent.  Clear the neighbor Table.
// 2640       nwkNeighborInitTable();
// 2641 
// 2642       // Start the rejoin process.
// 2643       ZDApp_SendMsg( ZDAppTaskID, ZDO_NWK_JOIN_REQ, sizeof(osal_event_hdr_t), NULL );
// 2644     }
// 2645   }
// 2646 }
// 2647 
// 2648 /*********************************************************************
// 2649  * @fn          ZDO_ManytoOneFailureIndicationCB
// 2650  *
// 2651  * @brief       This function allows the next higher layer of a
// 2652  *              concentrator to be notified of a many-to-one route
// 2653  *              failure.
// 2654  *
// 2655  * @param       none
// 2656  *
// 2657  *
// 2658  * @return      none
// 2659  */
// 2660 void ZDO_ManytoOneFailureIndicationCB()
// 2661 {
// 2662   // By default, the concentrator automatically redo many-to-one route
// 2663   // discovery to update all many-to-one routes in the network
// 2664   // If you want anything processing other than the default,
// 2665   // please replace the following code.
// 2666 
// 2667   RTG_MTORouteReq();
// 2668 }
// 2669 
// 2670 /*********************************************************************
// 2671  * @fn          ZDO_PollConfirmCB
// 2672  *
// 2673  * @brief       This function allows the next higher layer to be
// 2674  *              notified of a Poll Confirm.
// 2675  *
// 2676  * @param       none
// 2677  *
// 2678  * @return      none
// 2679  */
// 2680 void ZDO_PollConfirmCB( uint8 status )
// 2681 {
// 2682   (void)status;  // Remove this line if this parameter is used.
// 2683   return;
// 2684 }
// 2685 
// 2686 /******************************************************************************
// 2687  * @fn          ZDApp_NwkWriteNVRequest (stubs AddrMgrWriteNVRequest)
// 2688  *
// 2689  * @brief       Stub routine implemented by NHLE. NHLE should call
// 2690  *              <AddrMgrWriteNV> when appropriate.
// 2691  *
// 2692  * @param       none
// 2693  *
// 2694  * @return      none
// 2695  */
// 2696 void ZDApp_NwkWriteNVRequest( void )
// 2697 {
// 2698 #if defined ( NV_RESTORE )
// 2699   if ( !osal_get_timeoutEx( ZDAppTaskID, ZDO_NWK_UPDATE_NV ) )
// 2700   {
// 2701     // Trigger to save info into NV
// 2702     ZDApp_NVUpdate();
// 2703   }
// 2704 #endif
// 2705 }
// 2706 
// 2707 /*********************************************************************
// 2708  * Call Back Functions from Security  - API
// 2709  */
// 2710 
// 2711  /*********************************************************************
// 2712  * @fn          ZDO_UpdateDeviceIndication
// 2713  *
// 2714  * @brief       This function notifies the "Trust Center" of a
// 2715  *              network when a device joins or leaves the network.
// 2716  *
// 2717  * @param       extAddr - pointer to 64 bit address of new device
// 2718  * @param       status  - 0 if a new device joined securely
// 2719  *                      - 1 if a new device joined un-securely
// 2720  *                      - 2 if a device left the network
// 2721  *
// 2722  * @return      true if newly joined device should be allowed to
// 2723  *                                              remain on network
// 2724  */
// 2725 ZStatus_t ZDO_UpdateDeviceIndication( uint8 *extAddr, uint8 status )
// 2726 {
// 2727   // can implement a network access policy based on the
// 2728   // IEEE address of newly joining devices...
// 2729   (void)extAddr;
// 2730   (void)status;
// 2731 
// 2732   return ZSuccess;
// 2733 }
// 2734 
// 2735 /*********************************************************************
// 2736  * @fn          ZDApp_InMsgCB
// 2737  *
// 2738  * @brief       This function is called to pass up any message that is
// 2739  *              not yet supported.  This allows for the developer to
// 2740  *              support features themselves..
// 2741  *
// 2742  * @return      none
// 2743  */
// 2744 void ZDApp_InMsgCB( zdoIncomingMsg_t *inMsg )
// 2745 {
// 2746   if ( inMsg->clusterID & ZDO_RESPONSE_BIT )
// 2747   {
// 2748     // Handle the response message
// 2749   }
// 2750   else
// 2751   {
// 2752     // Handle the request message by sending a generic "not supported".
// 2753     // Device Announce doesn't have a response.
// 2754     if ( !(inMsg->wasBroadcast) && inMsg->clusterID != Device_annce )
// 2755     {
// 2756       ZDP_GenericRsp( inMsg->TransSeq, &(inMsg->srcAddr), ZDP_NOT_SUPPORTED, 0,
// 2757                       (uint16)(inMsg->clusterID | ZDO_RESPONSE_BIT), inMsg->SecurityUse );
// 2758     }
// 2759   }
// 2760 }
// 2761 
// 2762 
// 2763 /*********************************************************************
// 2764  * @fn      ZDApp_ChangeMatchDescRespPermission()
// 2765  *
// 2766  * @brief   Changes the Match Descriptor Response permission.
// 2767  *
// 2768  * @param   endpoint - endpoint to allow responses
// 2769  * @param   action - true to allow responses, false to not
// 2770  *
// 2771  * @return  none
// 2772  */
// 2773 void ZDApp_ChangeMatchDescRespPermission( uint8 endpoint, uint8 action )
// 2774 {
// 2775   // Store the action
// 2776   afSetMatch( endpoint, action );
// 2777 }
// 2778 
// 2779 /*********************************************************************
// 2780  * @fn      ZDApp_NetworkInit()
// 2781  *
// 2782  * @brief   Used to start the network joining process
// 2783  *
// 2784  * @param   delay - mSec delay to wait before starting
// 2785  *
// 2786  * @return  none
// 2787  */
// 2788 void ZDApp_NetworkInit( uint16 delay )
// 2789 {
// 2790   if ( delay )
// 2791   {
// 2792     // Wait awhile before starting the device
// 2793     osal_start_timerEx( ZDAppTaskID, ZDO_NETWORK_INIT, delay );
// 2794   }
// 2795   else
// 2796   {
// 2797     osal_set_event( ZDAppTaskID, ZDO_NETWORK_INIT );
// 2798   }
// 2799 }
// 2800 
// 2801 /*********************************************************************
// 2802  * @fn      ZDApp_NwkStateUpdateCB()
// 2803  *
// 2804  * @brief   This function notifies that this device's network
// 2805  *          state info has been changed.
// 2806  *
// 2807  * @param   none
// 2808  *
// 2809  * @return  none
// 2810  */
// 2811 void ZDApp_NwkStateUpdateCB( void )
// 2812 {
// 2813   // Notify to save info into NV
// 2814   if ( !osal_get_timeoutEx( ZDAppTaskID, ZDO_NWK_UPDATE_NV ) )
// 2815   {
// 2816     // Trigger to save info into NV
// 2817     ZDApp_NVUpdate();
// 2818   }
// 2819 }
// 2820 
// 2821 /*********************************************************************
// 2822  * @fn      ZDApp_NodeProfileSync()
// 2823  *
// 2824  * @brief   Sync node with stack profile.
// 2825  *
// 2826  * @param   stackProfile - stack profile of the network to join
// 2827  *
// 2828  * @return  none
// 2829  */
// 2830 void ZDApp_NodeProfileSync( uint8 stackProfile )
// 2831 {
// 2832   if ( ZDO_Config_Node_Descriptor.CapabilityFlags & CAPINFO_DEVICETYPE_FFD  )
// 2833   {
// 2834     if ( stackProfile != zgStackProfile )
// 2835     {
// 2836       ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_DEVICE;
// 2837       ZDO_Config_Node_Descriptor.CapabilityFlags = CAPINFO_DEVICETYPE_RFD | CAPINFO_POWER_AC | CAPINFO_RCVR_ON_IDLE;
// 2838       NLME_SetBroadcastFilter( ZDO_Config_Node_Descriptor.CapabilityFlags );
// 2839     }
// 2840   }
// 2841 }
// 2842 
// 2843 /*********************************************************************
// 2844  * @fn      ZDApp_StartJoiningCycle()
// 2845  *
// 2846  * @brief   Starts the joining cycle of a device.  This will only
// 2847  *          continue an already started (or stopped) joining cycle.
// 2848  *
// 2849  * @param   none
// 2850  *
// 2851  * @return  TRUE if joining stopped, FALSE if joining or rejoining
// 2852  */
// 2853 uint8 ZDApp_StartJoiningCycle( void )
// 2854 {
// 2855   if ( devState == DEV_INIT || devState == DEV_NWK_DISC )
// 2856   {
// 2857     continueJoining = TRUE;
// 2858     ZDApp_NetworkInit( 0 );
// 2859 
// 2860     return ( TRUE );
// 2861   }
// 2862   else
// 2863     return ( FALSE );
// 2864 }
// 2865 
// 2866 /*********************************************************************
// 2867  * @fn      ZDApp_StopJoiningCycle()
// 2868  *
// 2869  * @brief   Stops the joining or rejoining process of a device.
// 2870  *
// 2871  * @param   none
// 2872  *
// 2873  * @return  TRUE if joining stopped, FALSE if joining or rejoining
// 2874  */
// 2875 uint8 ZDApp_StopJoiningCycle( void )
// 2876 {
// 2877   if ( devState == DEV_INIT || devState == DEV_NWK_DISC )
// 2878   {
// 2879     continueJoining = FALSE;
// 2880     return ( TRUE );
// 2881   }
// 2882   else
// 2883     return ( FALSE );
// 2884 }
// 2885 
// 2886 /*********************************************************************
// 2887  * @fn      ZDApp_AnnounceNewAddress()
// 2888  *
// 2889  * @brief   Send Device Announce and hold all transmissions for
// 2890  *          new address timeout.
// 2891  *
// 2892  * @param   none
// 2893  *
// 2894  * @return  none
// 2895  */
// 2896 void ZDApp_AnnounceNewAddress( void )
// 2897 {
// 2898 #if defined ( ZIGBEE_NWK_UNIQUE_ADDR_CHECK )
// 2899   // Turn off data request hold
// 2900   APSME_HoldDataRequests( 0 );
// 2901 #endif
// 2902 
// 2903   ZDP_DeviceAnnce( NLME_GetShortAddr(), NLME_GetExtAddr(),
// 2904                      ZDO_Config_Node_Descriptor.CapabilityFlags, 0 );
// 2905 
// 2906 #if defined ( ZIGBEE_NWK_UNIQUE_ADDR_CHECK )
// 2907   // Setup the timeout
// 2908   APSME_HoldDataRequests( ZDAPP_HOLD_DATA_REQUESTS_TIMEOUT );
// 2909 #endif
// 2910 }
// 2911 
// 2912 /*********************************************************************
// 2913  * @fn          ZDApp_NVUpdate
// 2914  *
// 2915  * @brief       Set the NV Update Timer.
// 2916  *
// 2917  * @param       none
// 2918  *
// 2919  * @return      none
// 2920  */
// 2921 void ZDApp_NVUpdate( void )
// 2922 {
// 2923 #if defined ( NV_RESTORE )
// 2924   osal_start_timerEx( ZDAppTaskID, ZDO_NWK_UPDATE_NV, ZDAPP_UPDATE_NWK_NV_TIME );
// 2925 #endif
// 2926 }
// 2927 
// 2928 /*********************************************************************
// 2929  * @fn      ZDApp_CoordStartPANIDConflictCB()
// 2930  *
// 2931  * @brief   Returns a PAN ID for the network layer to use during
// 2932  *          a coordinator start and there is another network with
// 2933  *          the intended PANID.
// 2934  *
// 2935  * @param   panid - the intended PAN ID
// 2936  *
// 2937  * @return  PANID to try
// 2938  */
// 2939 uint16 ZDApp_CoordStartPANIDConflictCB( uint16 panid )
// 2940 {
// 2941   return ( panid + 1 );
// 2942 }
// 2943 
// 2944 /*********************************************************************
// 2945  * @fn          ZDO_SrcRtgIndCB
// 2946  *
// 2947  * @brief       This function notifies the ZDO available src route record received.
// 2948  *
// 2949  * @param       srcAddr - source address of the source route
// 2950  * @param       relayCnt - number of devices in the relay list
// 2951  * @param       relayList - relay list of the source route
// 2952  *
// 2953  * @return      none
// 2954  */
// 2955 void ZDO_SrcRtgIndCB (uint16 srcAddr, uint8 relayCnt, uint16* pRelayList )
// 2956 {
// 2957   zdoSrcRtg_t srcRtg;
// 2958 
// 2959   srcRtg.srcAddr = srcAddr;
// 2960   srcRtg.relayCnt = relayCnt;
// 2961   srcRtg.pRelayList = pRelayList;
// 2962 
// 2963   if( zdoCBFunc[ZDO_SRC_RTG_IND_CBID] != NULL )
// 2964   {
// 2965     zdoCBFunc[ZDO_SRC_RTG_IND_CBID]( (void*)&srcRtg );
// 2966   }
// 2967 }
// 2968 
// 2969 /*********************************************************************
// 2970  * @fn          ZDApp_InitZdoCBFunc
// 2971  *
// 2972  * @brief       Call this function to initialize zdoCBFunc[]
// 2973  *
// 2974  * @param       none
// 2975  *
// 2976  * @return      none
// 2977  */

        RSEG CODE:CODE:REORDER:NOROOT(1)
// 2978 void ZDApp_InitZdoCBFunc( void )
ZDApp_InitZdoCBFunc:
          CFI Block cfiBlock120 Using cfiCommon0
          CFI Function ZDApp_InitZdoCBFunc
// 2979 {
// 2980   uint8 i;
// 2981 
// 2982   for ( i=0; i< MAX_ZDO_CB_FUNC; i++ )
        MOV.B   #0x0, R14
// 2983   {
// 2984     zdoCBFunc[i] = NULL;
??ZDApp_InitZdoCBFunc_0:
        MOV.B   R14, R15
        RLAM.W  #0x2, R15
        MOV.W   #0x0, zdoCBFunc(R15)
        MOV.W   #0x0, zdoCBFunc + 2(R15)
// 2985   }
        ADD.B   #0x1, R14
        CMP.B   #0x7, R14
        JNC     ??ZDApp_InitZdoCBFunc_0
// 2986 }
        RETA
          CFI EndBlock cfiBlock120
// 2987 
// 2988 /*********************************************************************
// 2989  * @fn          ZDO_RegisterForZdoCB
// 2990  *
// 2991  * @brief       Call this function to register the higher layer (for
// 2992  *              example, the Application layer or MT layer) with ZDO
// 2993  *              callbacks to get notified of some ZDO indication like
// 2994  *              existence of a concentrator or receipt of a source
// 2995  *              route record.
// 2996  *
// 2997  * @param       indID - ZDO Indication ID
// 2998  * @param       pFn   - Callback function pointer
// 2999  *
// 3000  * @return      ZSuccess - successful, ZInvalidParameter if not
// 3001  */

        RSEG CODE:CODE:REORDER:NOROOT(1)
// 3002 ZStatus_t ZDO_RegisterForZdoCB( uint8 indID, pfnZdoCb pFn )
ZDO_RegisterForZdoCB:
          CFI Block cfiBlock121 Using cfiCommon0
          CFI Function ZDO_RegisterForZdoCB
// 3003 {
// 3004   // Check the range of the indication ID
// 3005   if ( indID < MAX_ZDO_CB_FUNC )
        CMP.B   #0x7, R12
        JC      ??ZDO_RegisterForZdoCB_0
// 3006   {
// 3007     zdoCBFunc[indID] = pFn;
        MOV.B   R12, R12
        RLAM.W  #0x2, R12
        MOV.W   R14, zdoCBFunc(R12)
        MOV.W   R15, zdoCBFunc + 2(R12)
// 3008     return ZSuccess;
        MOV.B   #0x0, R12
        RETA
// 3009   }
// 3010 
// 3011   return ZInvalidParameter;
??ZDO_RegisterForZdoCB_0:
        MOV.B   #0x2, R12
        RETA
          CFI EndBlock cfiBlock121
// 3012 }
// 3013 
// 3014 /*********************************************************************
// 3015  * @fn          ZDO_DeregisterForZdoCB
// 3016  *
// 3017  * @brief       Call this function to de-register the higher layer (for
// 3018  *              example, the Application layer or MT layer) with ZDO
// 3019  *              callbacks to get notified of some ZDO indication like
// 3020  *              existence of a concentrator or receipt of a source
// 3021  *              route record.
// 3022  *
// 3023  * @param       indID - ZDO Indication ID
// 3024  *
// 3025  * @return      ZSuccess - successful, ZInvalidParameter if not
// 3026  */

        RSEG CODE:CODE:REORDER:NOROOT(1)
// 3027 ZStatus_t ZDO_DeregisterForZdoCB( uint8 indID )
ZDO_DeregisterForZdoCB:
          CFI Block cfiBlock122 Using cfiCommon0
          CFI Function ZDO_DeregisterForZdoCB
// 3028 {
// 3029   // Check the range of the indication ID
// 3030   if ( indID < MAX_ZDO_CB_FUNC )
        CMP.B   #0x7, R12
        JC      ??ZDO_DeregisterForZdoCB_0
// 3031   {
// 3032     zdoCBFunc[indID] = NULL;
        MOV.B   R12, R12
        RLAM.W  #0x2, R12
        MOV.W   #0x0, zdoCBFunc(R12)
        MOV.W   #0x0, zdoCBFunc + 2(R12)
// 3033     return ZSuccess;
        MOV.B   #0x0, R12
        RETA
// 3034   }
// 3035 
// 3036   return ZInvalidParameter;
??ZDO_DeregisterForZdoCB_0:
        MOV.B   #0x2, R12
        RETA
          CFI EndBlock cfiBlock122
// 3037 }

        RSEG DATA16_ID:CONST:SORT:NOROOT(0)
`?<Initializer for zdoDiscCounter>`:
        DC8 1

        RSEG DATA16_ID:CONST:SORT:NOROOT(0)
`?<Initializer for continueJoining>`:
        DC8 1

        RSEG DATA16_ID:CONST:SORT:NOROOT(0)
`?<Initializer for devState>`:
        DC8 1

        RSEG DATA16_ID:CONST:SORT:NOROOT(1)
`?<Initializer for ZDApp_epDesc>`:
        DC8 0, 0
        DC16 ZDAppTaskID, 0H
        DC8 0, 0

        RSEG DATA16_ID:CONST:SORT:NOROOT(1)
`?<Initializer for ZDApp_SavedPollRate>`:
        DC16 1000

        RSEG CODE:CODE:REORDER:NOROOT(1)
?setjmp_save_r4:
        REQUIRE ?setjmp_r4
        REQUIRE ?longjmp_r4

        RSEG CODE:CODE:REORDER:NOROOT(1)
?setjmp_save_r5:
        REQUIRE ?setjmp_r5
        REQUIRE ?longjmp_r5

        END
// 3038 
// 3039 /*********************************************************************
// 3040 *********************************************************************/
// 
// 3 828 bytes in segment CODE
//    13 bytes in segment DATA16_I
//    13 bytes in segment DATA16_ID
//    71 bytes in segment DATA16_Z
// 
// 3 828 bytes of CODE  memory
//    13 bytes of CONST memory
//    84 bytes of DATA  memory
//
//Errors: none
//Warnings: none
