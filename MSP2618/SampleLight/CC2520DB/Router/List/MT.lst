###############################################################################
#                                                                             #
# IAR C/C++ Compiler V5.52.1.50724/W32 for MSP430       10/Jun/2013  16:27:21 #
# Copyright 1996-2013 IAR Systems AB.                                         #
#                                                                             #
#    __rt_version  =  3                                                       #
#    __double_size =  32                                                      #
#    __reg_r4      =  free                                                    #
#    __reg_r5      =  free                                                    #
#    __pic         =  no                                                      #
#    __core        =  430X                                                    #
#    __data_model  =  small                                                   #
#    Source file   =  C:\Texas Instruments\ZStack-MSP2618-2.5.1\Components\mt #
#                     \MT.c                                                   #
#    Command line  =  -f "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\ #
#                     zstack\HomeAutomation\SampleLight\CC2520DB\..\..\..\Too #
#                     ls\MSP2618\f8wConfig.cfg" (-DZIGBEEPRO -DSECURE=0       #
#                     -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                       #
#                     -DDEFAULT_CHANLIST=0x00000800                           #
#                     -DZDAPP_CONFIG_PAN_ID=0xFFFF -DNWK_START_DELAY=100      #
#                     -DEXTENDED_JOINING_RANDOM_MASK=0x007F                   #
#                     -DBEACON_REQUEST_DELAY=100                              #
#                     -DBEACON_REQ_DELAY_MASK=0x00FF                          #
#                     -DLINK_STATUS_JITTER_MASK=0x007F                        #
#                     -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_POLLED= #
#                     3000 -DNWK_INDIRECT_MSG_TIMEOUT=7 -DMAX_RREQ_ENTRIES=8  #
#                     -DAPSC_MAX_FRAME_RETRIES=3 -DNWK_MAX_DATA_RETRIES=2     #
#                     -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9              #
#                     -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40                #
#                     -DNWK_MAX_BINDING_ENTRIES=4                             #
#                     -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,       #
#                     0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00, 0x02,   #
#                     0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"                    #
#                     -DMAC_MAX_FRAME_SIZE=116 -DZDNWKMGR_MIN_TRANSMISSIONS=2 #
#                     0 -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000           #
#                     -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100         #
#                     -DREJOIN_POLL_RATE=440) -f "C:\Texas                    #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\Tools\MSP2618\f8 #
#                     wRouter.cfg" (-DCPU6MHZ -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                     E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8            #
#                     -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f "C:\Texas              #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\Tools\MSP2618\f8 #
#                     wZCL.cfg" (-DZCL_READ -DZCL_WRITE -DZCL_BASIC           #
#                     -DZCL_IDENTIFY -DZCL_ON_OFF -DZCL_KEY_ESTABLISH         #
#                     -DZCL_KEY_ESTABLISHMENT_KEY_GENERATE_TIMEOUT=4          #
#                     -DZCL_KEY_ESTABLISHMENT_MAC_GENERATE_TIMEOUT=10         #
#                     -DZCL_KEY_ESTABLISHMENT_EKEY_GENERATE_TIMEOUT=10        #
#                     -DZCL_LOAD_CONTROL -DZCL_SIMPLE_METERING -DZCL_PRICING  #
#                     -DZCL_MESSAGE -DZCL_TUNNELING -DZCL_TOU)                #
#                     -DZCL_DEVICE_MGMT "C:\Texas                             #
#                     Instruments\ZStack-MSP2618-2.5.1\Components\mt\MT.c"    #
#                     -D MSP430F2618 -D ZTOOL_P1 -D MT_TASK -D MT_SYS_FUNC    #
#                     -D MT_ZDO_FUNC -D LCD_SUPPORTED -lC "C:\Texas           #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\Router\List\" -lA         #
#                     "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\zst #
#                     ack\HomeAutomation\SampleLight\CC2520DB\Router\List\"   #
#                     --remarks --diag_suppress Pe001,Pe193,Pe236,Pe826 -o    #
#                     "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\zst #
#                     ack\HomeAutomation\SampleLight\CC2520DB\Router\Obj\"    #
#                     --debug -D__MSP430F2618__ -e --double=32 --clib -I      #
#                     "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\zst #
#                     ack\HomeAutomation\SampleLight\CC2520DB\" -I "C:\Texas  #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\Source\" -I "C:\Texas  #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\Source\" -I         #
#                     "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\zst #
#                     ack\HomeAutomation\SampleLight\CC2520DB\..\..\..\ZMain\ #
#                     MSP2618\" -I "C:\Texas Instruments\ZStack-MSP2618-2.5.1 #
#                     \Projects\zstack\HomeAutomation\SampleLight\CC2520DB\.. #
#                     \..\..\..\..\Components\hal\include\" -I "C:\Texas      #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \hal\target\MSP2618CC2520\" -I "C:\Texas                #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \mac\include\" -I "C:\Texas                             #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \mac\high_level\" -I "C:\Texas                          #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \mac\low_level\srf04\" -I "C:\Texas                     #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \mac\low_level\srf04\dual_chip\" -I "C:\Texas           #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \mt\" -I "C:\Texas Instruments\ZStack-MSP2618-2.5.1\Pro #
#                     jects\zstack\HomeAutomation\SampleLight\CC2520DB\..\..\ #
#                     ..\..\..\Components\osal\include\" -I "C:\Texas         #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \osal\mcu\msp430\" -I "C:\Texas                         #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \services\saddr\" -I "C:\Texas                          #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \services\sdata\" -I "C:\Texas                          #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \stack\af\" -I "C:\Texas Instruments\ZStack-MSP2618-2.5 #
#                     .1\Projects\zstack\HomeAutomation\SampleLight\CC2520DB\ #
#                     ..\..\..\..\..\Components\stack\nwk\" -I "C:\Texas      #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \stack\sec\" -I "C:\Texas Instruments\ZStack-MSP2618-2. #
#                     5.1\Projects\zstack\HomeAutomation\SampleLight\CC2520DB #
#                     \..\..\..\..\..\Components\stack\sapi\" -I "C:\Texas    #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \stack\sys\" -I "C:\Texas Instruments\ZStack-MSP2618-2. #
#                     5.1\Projects\zstack\HomeAutomation\SampleLight\CC2520DB #
#                     \..\..\..\..\..\Components\stack\zcl\" -I "C:\Texas     #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \stack\zdo\" -I "C:\Texas Instruments\ZStack-MSP2618-2. #
#                     5.1\Projects\zstack\HomeAutomation\SampleLight\CC2520DB #
#                     \..\..\..\..\..\Components\zmac\" -I "C:\Texas          #
#                     Instruments\ZStack-MSP2618-2.5.1\Projects\zstack\HomeAu #
#                     tomation\SampleLight\CC2520DB\..\..\..\..\..\Components #
#                     \zmac\f8w\" --core=430X --data_model=small -Ohz         #
#                     --multiplier=16s --require_prototypes                   #
#    List file     =  C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\zsta #
#                     ck\HomeAutomation\SampleLight\CC2520DB\Router\List\MT.l #
#                     st                                                      #
#    Object file   =  C:\Texas Instruments\ZStack-MSP2618-2.5.1\Projects\zsta #
#                     ck\HomeAutomation\SampleLight\CC2520DB\Router\Obj\MT.r4 #
#                     3                                                       #
#                                                                             #
#                                                                             #
###############################################################################

C:\Texas Instruments\ZStack-MSP2618-2.5.1\Components\mt\MT.c
      1          /***************************************************************************************************
      2            Filename:       MT.c
      3            Revised:        $Date: 2011-06-07 12:12:44 -0700 (Tue, 07 Jun 2011) $
      4            Revision:       $Revision: 26238 $
      5          
      6            Description:    MonitorTest Event Loop functions.
      7                            Everything in the MonitorTest Task (except the serial driver).
      8          
      9          
     10            Copyright 2007-2011 Texas Instruments Incorporated. All rights reserved.
     11          
     12            IMPORTANT: Your use of this Software is limited to those specific rights
     13            granted under the terms of a software license agreement between the user
     14            who downloaded the software, his/her employer (which must be your employer)
     15            and Texas Instruments Incorporated (the "License").  You may not use this
     16            Software unless you agree to abide by the terms of the License. The License
     17            limits your use, and you acknowledge, that the Software may not be modified,
     18            copied or distributed unless embedded on a Texas Instruments microcontroller
     19            or used solely and exclusively in conjunction with a Texas Instruments radio
     20            frequency transceiver, which is integrated into your product.  Other than for
     21            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     22            works of, modify, distribute, perform, display or sell this Software and/or
     23            its documentation for any purpose.
     24          
     25            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     26            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     27            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     28            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     29            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     30            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     31            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     32            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     33            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     34            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     35            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     36          
     37            Should you have any questions regarding your right to use this Software,
     38            contact Texas Instruments Incorporated at www.TI.com.
     39          
     40           **************************************************************************************************/
     41          
     42          /**************************************************************************************************
     43           * INCLUDES
     44           **************************************************************************************************/
     45          
     46          #include "ZComDef.h"
     47          #include "MT.h"
     48          #include "MT_APP.h"
     49          #include "MT_DEBUG.h"
     50          #include "MT_UTIL.h"
     51          #include "MT_SYS.h"
     52          
     53          #include "OnBoard.h"
     54          #include "OSAL.h"
     55          #include "OSAL_Memory.h"
     56          #include "OSAL_Nv.h"
     57          
     58          #include "DebugTrace.h"
     59          #include "ZMAC.h"
     60          
     61          #if !defined ( NONWK )
     62            #include "NLMEDE.h"
     63            #include "nwk_bufs.h"
     64            #include "ZDObject.h"
     65            #include "ssp.h"
     66            #include "nwk_util.h"
     67            #include "AF.h"
     68            #include "MT_SAPI.h"
     69          #endif
     70          
     71          #if defined( MT_MAC_FUNC ) || defined( MT_MAC_CB_FUNC )
     72            #include "MT_MAC.h"
     73          #endif
     74          #if defined( MT_NWK_FUNC ) || defined( MT_NWK_CB_FUNC )
     75            #include "MT_NWK.h"
     76            #include "nwk.h"
     77            #include "nwk_bufs.h"
     78          #endif
     79          #if defined( MT_AF_FUNC ) || defined( MT_AF_CB_FUNC )
     80            #include "MT_AF.h"
     81          #endif
     82          #if defined( MT_USER_TEST_FUNC )
     83            #include "AF.h"
     84          #endif
     85          #if defined( MT_ZDO_FUNC )
     86            #include "MT_ZDO.h"
     87          #endif
     88          #if defined (MT_SAPI_FUNC)
     89          	#include "MT_SAPI.h"
     90          #endif
     91          #if defined (MT_OTA_FUNC)
     92            #include "MT_OTA.h"
     93          #endif
     94          
     95          #if defined( APP_TP )
     96           #include "TestProfile.h"
     97          #endif
     98          #if defined( APP_TP2 )
     99           #include "TestProfile2.h"
    100          #endif
    101          
    102          #if defined(APP_TGEN)
    103            #include "TrafficGenApp.h"
    104          #endif
    105          #if defined(APP_DEBUG)
    106          	#include "DebugApp.h"
    107          #endif
    108          #if defined (NWK_TEST)
    109          	#include "HWTTApp.h"
    110          #endif
    111          
    112          /* HAL */
    113          #include "hal_uart.h"
    114          #include "hal_led.h"
    115          #include "hal_key.h"
    116          #include "MT_UART.h"
    117          
    118          /**************************************************************************************************
    119           * CONSTANTS
    120           **************************************************************************************************/
    121          

   \                                 In  segment DATA16_I, align 2, align-sorted
   \   000000                REQUIRE ?cstart_init_copy
    122          mtProcessMsg_t mtProcessIncoming[] =
   \                     mtProcessIncoming:
   \   000000                DS8 44
   \   00002C                REQUIRE `?<Initializer for mtProcessIncoming>`
    123          {
    124            NULL,
    125          
    126          #if defined (MT_SYS_FUNC)
    127            MT_SysCommandProcessing,
    128          #else
    129            NULL,
    130          #endif
    131          
    132          #if defined (MT_MAC_FUNC)
    133            MT_MacCommandProcessing,
    134          #else
    135            NULL,
    136          #endif
    137          
    138          #if defined (MT_NWK_FUNC)
    139            MT_NwkCommandProcessing,
    140          #else
    141            NULL,
    142          #endif
    143          
    144          #if defined (MT_AF_FUNC)
    145            MT_AfCommandProcessing,
    146          #else
    147            NULL,
    148          #endif
    149          
    150          #if defined (MT_ZDO_FUNC)
    151            MT_ZdoCommandProcessing,
    152          #else
    153            NULL,
    154          #endif
    155          
    156          #if defined (MT_SAPI_FUNC)
    157            MT_SapiCommandProcessing,
    158          #else
    159            NULL,
    160          #endif
    161          
    162          #if defined (MT_UTIL_FUNC)
    163            MT_UtilCommandProcessing,
    164          #else
    165            NULL,
    166          #endif
    167          
    168          #if defined (MT_DEBUG_FUNC)
    169            MT_DebugCommandProcessing,
    170          #else
    171            NULL,
    172          #endif
    173          
    174          #if defined (MT_APP_FUNC)
    175            MT_AppCommandProcessing,
    176          #else
    177            NULL,
    178          #endif
    179          
    180          #if defined (MT_OTA_FUNC)
    181            MT_OtaCommandProcessing,
    182          #else
    183            NULL,
    184          #endif
    185          };
    186          
    187          /**************************************************************************************************
    188           * GLOBAL VARIABLES
    189           **************************************************************************************************/
    190          

   \                                 In  segment DATA16_Z, align 1, align-sorted
   \   000000                REQUIRE ?cstart_init_zero
    191          byte debugThreshold;
   \                     debugThreshold:
   \   000000                DS8 1

   \                                 In  segment DATA16_Z, align 1, align-sorted
   \   000000                REQUIRE ?cstart_init_zero
    192          byte debugCompId;
   \                     debugCompId:
   \   000000                DS8 1
    193          
    194          /**************************************************************************************************
    195           * LOCAL FUNCTIONS
    196           **************************************************************************************************/
    197          
    198          void MT_MsgQueueInit( void );
    199          void MT_ResetMsgQueue( void );
    200          byte MT_QueueMsg( byte *msg , byte len );
    201          void MT_ProcessQueue( void );
    202          
    203          #if defined ( MT_USER_TEST_FUNC )
    204          void MT_ProcessAppUserCmd( byte *pData );
    205          #endif
    206          
    207          /**************************************************************************************************
    208           * @fn         MT_Init
    209           *
    210           * @brief      This function is the secondary initialization that resolves conflicts during
    211           *             osalInitTasks(). For example, since MT is the highest priority task, and
    212           *             specifically because the MT task is initialized before the ZDApp task, if MT_Init()
    213           *             registers anything with ZDO_RegisterForZdoCB(), it is wiped out when ZDApp task
    214           *             initialization invokes ZDApp_InitZdoCBFunc().
    215           *             There may be other existing or future such races, so try to do all possible
    216           *             MT initialization here vice in MT_TaskInit().
    217           *
    218           * input parameters
    219           *
    220           * None.
    221           *
    222           * output parameters
    223           *
    224           * None.
    225           *
    226           * @return      None.
    227           **************************************************************************************************
    228           */

   \                                 In  segment CODE, align 2
    229          void MT_Init(void)
   \                     MT_Init:
    230          {
    231          #if defined (MT_ZDO_FUNC)
    232            MT_ZdoInit();
   \   000000   ........     CALLA   #MT_ZdoInit
    233          #endif
    234            MT_SysResetInd();
   \   000004   ........     BRA     #MT_SysResetInd
    235          }
    236          
    237          /***************************************************************************************************
    238           * @fn      MT_BuildSPIMsg
    239           *
    240           * @brief
    241           *
    242           *   Format an SPI message.
    243           *
    244           * @param   UINT16 cmd - command id
    245           * @param   byte *msg - pointer to message buffer
    246           * @param   byte dataLen - length of data field
    247           * @param   byte *pData - pointer to data field
    248           *
    249           * @return  void
    250           ***************************************************************************************************/

   \                                 In  segment CODE, align 2
    251          void MT_BuildSPIMsg( uint8 cmdType, uint8 cmdId, byte *msg, byte dataLen, byte *pData )
   \                     MT_BuildSPIMsg:
    252          {
   \   000000   0A12         PUSH.W  R10
   \   000002   4A4C         MOV.B   R12, R10
   \   000004   0C4E         MOV.W   R14, R12
    253            /* Fill in the CMD and Data Length */
    254            *msg++ = dataLen;
   \   000006   CE4F0000     MOV.B   R15, 0(R14)
   \   00000A   1C53         ADD.W   #0x1, R12
    255            *msg++ = cmdType;
   \   00000C   CC4A0000     MOV.B   R10, 0(R12)
   \   000010   1C53         ADD.W   #0x1, R12
    256            *msg++ = cmdId;
   \   000012   CC4D0000     MOV.B   R13, 0(R12)
   \   000016   1C53         ADD.W   #0x1, R12
   \   000018   1D410600     MOV.W   0x6(SP), R13
    257          
    258            /* Fill in the data */
    259            if ( pData )
   \   00001C   0D93         CMP.W   #0x0, R13
   \   00001E   0324         JEQ     ??MT_BuildSPIMsg_0
    260            {
    261              osal_memcpy( msg, pData, dataLen );
   \   000020   4E4F         MOV.B   R15, R14
   \   000022   ........     CALLA   #osal_memcpy
    262            }
    263          }
   \                     ??MT_BuildSPIMsg_0:
   \   000026   3A41         POP.W   R10
   \   000028   1001         RETA
    264          
    265          /***************************************************************************************************
    266           * @fn      MT_BuildAndSendZToolResponse
    267           *
    268           * @brief   Build and send a ZTOOL msg
    269           * @param   uint8 cmdType - include type and subsystem
    270           *          uint8 cmdId - command ID
    271           *          byte dataLen
    272           *          byte *pData
    273           *
    274           * @return  void
    275           ***************************************************************************************************/

   \                                 In  segment CODE, align 2
    276          void MT_BuildAndSendZToolResponse(uint8 cmdType, uint8 cmdId, uint8 dataLen, uint8 *pData)
   \                     MT_BuildAndSendZToolResponse:
    277          {
   \   000000   5B15         PUSHM.W #0x6, R11
   \   000002   4B4C         MOV.B   R12, R11
   \   000004   484D         MOV.B   R13, R8
   \   000006   4A4E         MOV.B   R14, R10
   \   000008   094F         MOV.W   R15, R9
    278            uint8 *msg_ptr;
    279          
    280            /* Allocate memory including SOP and FCS */
    281            msg_ptr = MT_TransportAlloc((mtRpcCmdType_t)(cmdType & 0xE0), dataLen);
   \   00000A   4D4E         MOV.B   R14, R13
   \   00000C   7CF0E000     AND.B   #0xe0, R12
   \   000010   ........     CALLA   #MT_TransportAlloc
   \   000014   064C         MOV.W   R12, R6
    282          
    283            if (msg_ptr)
   \   000016   0C93         CMP.W   #0x0, R12
   \   000018   0B24         JEQ     ??MT_BuildAndSendZToolResponse_0
    284            {
    285              /* Build the message */
    286              MT_BuildSPIMsg(cmdType, cmdId, msg_ptr, dataLen, pData);
   \   00001A   0912         PUSH.W  R9
   \   00001C   4F4A         MOV.B   R10, R15
   \   00001E   0E4C         MOV.W   R12, R14
   \   000020   4D48         MOV.B   R8, R13
   \   000022   4C4B         MOV.B   R11, R12
   \   000024   ........     CALLA   #MT_BuildSPIMsg
    287              /* Send out the msg */
    288              MT_TransportSend(msg_ptr);
   \   000028   0C46         MOV.W   R6, R12
   \   00002A   ........     CALLA   #MT_TransportSend
   \   00002E   2153         ADD.W   #0x2, SP
    289            }
    290          }
   \                     ??MT_BuildAndSendZToolResponse_0:
   \   000030   5617         POPM.W  #0x6, R11
   \   000032   1001         RETA
    291          
    292          /***************************************************************************************************
    293           * @fn      MT_ProcessIncoming
    294           *
    295           * @brief  Process Incoming Message.
    296           *
    297           * @param   byte *pBuf - pointer to event message
    298           *
    299           * @return  void
    300           ***************************************************************************************************/

   \                                 In  segment CODE, align 2
    301          void MT_ProcessIncoming(uint8 *pBuf)
   \                     MT_ProcessIncoming:
    302          {
   \   000000   2182         SUB.W   #0x4, SP
    303            mtProcessMsg_t func;
    304            uint8 rsp[MT_RPC_FRAME_HDR_SZ];
    305          
    306            /* pre-build response message:  | status | cmd0 | cmd1 | */
    307            rsp[1] = pBuf[MT_RPC_POS_CMD0];
   \   000002   5F4C0100     MOV.B   0x1(R12), R15
   \   000006   C14F0100     MOV.B   R15, 0x1(SP)
    308            rsp[2] = pBuf[MT_RPC_POS_CMD1];
   \   00000A   D14C02000200 MOV.B   0x2(R12), 0x2(SP)
    309          
    310            /* check length */
    311            if (pBuf[MT_RPC_POS_LEN] > MT_RPC_DATA_MAX)
   \   000010   FC90FB000000 CMP.B   #0xfb, 0(R12)
   \   000016   0328         JNC     ??MT_ProcessIncoming_0
    312            {
    313              rsp[0] = MT_RPC_ERR_LENGTH;
   \   000018   E1420000     MOV.B   #0x4, 0(SP)
   \   00001C   1A3C         JMP     ??MT_ProcessIncoming_1
    314            }
    315            /* check subsystem range */
    316            else if ((rsp[1] & MT_RPC_SUBSYSTEM_MASK) < MT_RPC_SYS_MAX)
   \                     ??MT_ProcessIncoming_0:
   \   00001E   4E4F         MOV.B   R15, R14
   \   000020   7EF01F00     AND.B   #0x1f, R14
   \   000024   7E900B00     CMP.B   #0xb, R14
   \   000028   122C         JC      ??MT_ProcessIncoming_2
    317            {
    318              /* look up processing function */
    319              func = mtProcessIncoming[rsp[1] & MT_RPC_SUBSYSTEM_MASK];
   \   00002A   3FF01F00     AND.W   #0x1f, R15
   \   00002E   5F06         RLAM.W  #0x2, R15
   \   000030   1E4F....     MOV.W   mtProcessIncoming(R15), R14
   \   000034   1F4F....     MOV.W   mtProcessIncoming + 2(R15), R15
    320              if (func)
   \   000038   0D4E         MOV.W   R14, R13
   \   00003A   0DDF         BIS.W   R15, R13
   \   00003C   0D93         CMP.W   #0x0, R13
   \   00003E   0724         JEQ     ??MT_ProcessIncoming_2
    321              {
    322                /* execute processing function */
    323                rsp[0] = (*func)(pBuf);
   \   000040   ........     CALLA   #?IndCallR15
   \   000044   C14C0000     MOV.B   R12, 0(SP)
    324              }
    325              else
    326              {
    327                rsp[0] = MT_RPC_ERR_SUBSYSTEM;
    328              }
    329            }
    330            else
    331            {
    332              rsp[0] = MT_RPC_ERR_SUBSYSTEM;
    333            }
    334          
    335            /* if error and this was an SREQ, send error message */
    336            if ((rsp[0] != MT_RPC_SUCCESS) && ((rsp[1] & MT_RPC_CMD_TYPE_MASK) == MT_RPC_CMD_SREQ))
   \   000048   4C93         CMP.B   #0x0, R12
   \   00004A   0320         JNE     ??MT_ProcessIncoming_1
   \   00004C   123C         JMP     ??MT_ProcessIncoming_3
   \                     ??MT_ProcessIncoming_2:
   \   00004E   D1430000     MOV.B   #0x1, 0(SP)
   \                     ??MT_ProcessIncoming_1:
   \   000052   5E410100     MOV.B   0x1(SP), R14
   \   000056   7EF0E000     AND.B   #0xe0, R14
   \   00005A   7E902000     CMP.B   #0x20, R14
   \   00005E   0920         JNE     ??MT_ProcessIncoming_3
    337            {
    338              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_RES0), 0,
    339                                                                            MT_RPC_FRAME_HDR_SZ, rsp);
   \   000060   0F41         MOV.W   SP, R15
   \   000062   0F53         ADD.W   #0x0, R15
   \   000064   7E400300     MOV.B   #0x3, R14
   \   000068   4D43         MOV.B   #0x0, R13
   \   00006A   7C406000     MOV.B   #0x60, R12
   \   00006E   ........     CALLA   #MT_BuildAndSendZToolResponse
    340            }
    341          }
   \                     ??MT_ProcessIncoming_3:
   \   000072   2152         ADD.W   #0x4, SP
   \   000074   1001         RETA
    342          
    343          /***************************************************************************************************
    344           * @fn      MTProcessAppRspMsg
    345           *
    346           * @brief   Process the User App Response Message
    347           *
    348           * @param   data - output serial buffer.  The first byte must be the
    349           *          endpoint that send this message.
    350           * @param   len - data length
    351           *
    352           * @return  none
    353           ***************************************************************************************************/

   \                                 In  segment CODE, align 2
    354          void MTProcessAppRspMsg( byte *pData, byte len )
   \                     MTProcessAppRspMsg:
    355          {
    356            /* Send out Reset Response message */
    357            MT_BuildAndSendZToolResponse( ((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_APP), MT_APP_RSP, len, pData );
   \   000000   0F4C         MOV.W   R12, R15
   \   000002   4E4D         MOV.B   R13, R14
   \   000004   7D408000     MOV.B   #0x80, R13
   \   000008   7C406900     MOV.B   #0x69, R12
   \   00000C   ........     BRA     #MT_BuildAndSendZToolResponse
    358          }
    359          
    360          
    361          /***************************************************************************************************
    362           * @fn      MT_ReverseBytes
    363           *
    364           * @brief
    365           *
    366           *   Reverses bytes within an array
    367           *
    368           * @param   data - ptr to data buffer to reverse
    369           * @param    len - number of bytes in buffer
    370           *
    371           * @return  void
    372           ***************************************************************************************************/

   \                                 In  segment CODE, align 2
    373          void MT_ReverseBytes( byte *pData, byte len )
   \                     MT_ReverseBytes:
    374          {
   \   000000   3B15         PUSHM.W #0x4, R11
    375            byte i,j;
    376            byte temp;
    377          
    378            for ( i = 0, j = len-1; len > 1; len-=2 )
   \   000002   4E43         MOV.B   #0x0, R14
   \   000004   4F4D         MOV.B   R13, R15
   \   000006   7F53         ADD.B   #0xff, R15
   \   000008   0C3C         JMP     ??MT_ReverseBytes_1
    379            {
    380              temp = pData[i];
   \                     ??MT_ReverseBytes_0:
   \   00000A   0A4C         MOV.W   R12, R10
   \   00000C   0A5E         ADD.W   R14, R10
   \   00000E   6B4A         MOV.B   @R10, R11
    381              pData[i++] = pData[j];
   \   000010   084C         MOV.W   R12, R8
   \   000012   085F         ADD.W   R15, R8
   \   000014   EA480000     MOV.B   @R8, 0(R10)
   \   000018   5E53         ADD.B   #0x1, R14
    382              pData[j--] = temp;
   \   00001A   C84B0000     MOV.B   R11, 0(R8)
   \   00001E   7F53         ADD.B   #0xff, R15
    383            }
   \   000020   6D83         SUB.B   #0x2, R13
   \                     ??MT_ReverseBytes_1:
   \   000022   6D93         CMP.B   #0x2, R13
   \   000024   F22F         JC      ??MT_ReverseBytes_0
    384          }
   \   000026   3817         POPM.W  #0x4, R11
   \   000028   1001         RETA
    385          
    386          
    387          /***************************************************************************************************
    388           * @fn      MT_Word2Buf
    389           *
    390           * @brief   Copy a uint16 array to a byte array, little endian.
    391           *
    392           * @param   pBuf - byte array
    393           * @param   pWord - uint16 array
    394           * @param   len - length of uint16 array
    395           *
    396           * @return  pointer to end of byte array
    397           ***************************************************************************************************/

   \                                 In  segment CODE, align 2
    398          uint8 *MT_Word2Buf( uint8 *pBuf, uint16 *pWord, uint8 len )
   \                     MT_Word2Buf:
    399          {
   \   000000   093C         JMP     ??MT_Word2Buf_1
    400            while ( len-- > 0 )
    401            {
    402              *pBuf++ = LO_UINT16( *pWord );
   \                     ??MT_Word2Buf_0:
   \   000002   EC4D0000     MOV.B   @R13, 0(R12)
   \   000006   1C53         ADD.W   #0x1, R12
    403              *pBuf++ = HI_UINT16( *pWord );
   \   000008   3F4D         MOV.W   @R13+, R15
   \   00000A                RPT     #0x8
   \   00000A   47190F10     RRUX.W  R15
   \   00000E   CC4F0000     MOV.B   R15, 0(R12)
   \   000012   1C53         ADD.W   #0x1, R12
    404              pWord++;
    405            }
   \                     ??MT_Word2Buf_1:
   \   000014   4F4E         MOV.B   R14, R15
   \   000016   7E53         ADD.B   #0xff, R14
   \   000018   4F93         CMP.B   #0x0, R15
   \   00001A   F323         JNE     ??MT_Word2Buf_0
    406          
    407            return pBuf;
   \   00001C   1001         RETA
    408          }
    409          #if !defined(NONWK)
    410          /***************************************************************************************************
    411           * @fn      MT_BuildEndpointDesc
    412           *
    413           * @brief   Build endpoint descriptor and simple descriptor structure from incoming buffer
    414           *
    415           * @param   pBuf - byte array
    416           *
    417           * @return  epDesc - pointer to the endpoint descriptor
    418           ***************************************************************************************************/

   \                                 In  segment CODE, align 2
    419          uint8 MT_BuildEndpointDesc( uint8 *pBuf, void *param )
   \                     MT_BuildEndpointDesc:
    420          {
   \   000000   3B15         PUSHM.W #0x4, R11
   \   000002   0A4C         MOV.W   R12, R10
   \   000004   084D         MOV.W   R13, R8
    421            uint8 i;
    422            uint8 ret = ZSuccess;
   \   000006   4B43         MOV.B   #0x0, R11
    423            endPointDesc_t *epDesc;
    424          
    425            epDesc = (endPointDesc_t *)param;
    426            /* check if this endpoint is already registered */
    427            if ( afFindEndPointDesc( *pBuf ) != NULL )
   \   000008   6C4A         MOV.B   @R10, R12
   \   00000A   ........     CALLA   #afFindEndPointDesc
   \   00000E   0C93         CMP.W   #0x0, R12
   \   000010   0324         JEQ     ??MT_BuildEndpointDesc_2
    428            {
    429              ret = ZApsDuplicateEntry;
   \   000012   7B40B800     MOV.B   #0xb8, R11
   \   000016   7E3C         JMP     ??MT_BuildEndpointDesc_3
    430            }
    431            else if ( epDesc )
   \                     ??MT_BuildEndpointDesc_2:
   \   000018   0893         CMP.W   #0x0, R8
   \   00001A   7C24         JEQ     ??MT_BuildEndpointDesc_3
    432            {
    433              epDesc->endPoint = *pBuf;
   \   00001C   E84A0000     MOV.B   @R10, 0(R8)
    434          
    435              /* Ignore the latency reqs */
    436              epDesc->latencyReq = noLatencyReqs;
   \   000020   C8430600     MOV.B   #0x0, 0x6(R8)
    437          
    438              /* allocate memory for the simple descriptor */
    439              epDesc->simpleDesc = (SimpleDescriptionFormat_t *) osal_mem_alloc(sizeof(SimpleDescriptionFormat_t));
   \   000024   3C400E00     MOV.W   #0xe, R12
   \   000028   ........     CALLA   #osal_mem_alloc
   \   00002C   884C0400     MOV.W   R12, 0x4(R8)
    440              if (epDesc->simpleDesc)
   \   000030   79401000     MOV.B   #0x10, R9
   \   000034   0C93         CMP.W   #0x0, R12
   \   000036   6D24         JEQ     ??MT_BuildEndpointDesc_4
    441              {
    442                /* Endpoint */
    443                epDesc->simpleDesc->EndPoint = *pBuf++;
   \   000038   2852         ADD.W   #0x4, R8
   \   00003A   FC4A0000     MOV.B   @R10+, 0(R12)
    444          
    445                /* AppProfId */
    446                epDesc->simpleDesc->AppProfId = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   00003E   ........     CALLA   #?Subroutine0
   \                     ??CrossCallReturnLabel_0:
   \   000042   8F4E0200     MOV.W   R14, 0x2(R15)
    447                pBuf += sizeof(uint16);
   \   000046   2A53         ADD.W   #0x2, R10
    448          
    449                /* AppDeviceId */
    450                epDesc->simpleDesc->AppDeviceId = BUILD_UINT16(pBuf[0],pBuf[1]);
   \   000048   ........     CALLA   #?Subroutine0
   \                     ??CrossCallReturnLabel_1:
   \   00004C   8F4E0400     MOV.W   R14, 0x4(R15)
    451                pBuf += sizeof(uint16);
   \   000050   2A53         ADD.W   #0x2, R10
    452          
    453                /* AppDevVer */
    454                epDesc->simpleDesc->AppDevVer = (*pBuf++) & AF_APP_DEV_VER_MASK ;
   \   000052   7E4A         MOV.B   @R10+, R14
   \   000054   7EF00F00     AND.B   #0xf, R14
   \   000058   2F48         MOV.W   @R8, R15
   \   00005A   5D4F0600     MOV.B   0x6(R15), R13
   \   00005E   7DF0F000     AND.B   #0xf0, R13
   \   000062   4DDE         BIS.B   R14, R13
   \   000064   CF4D0600     MOV.B   R13, 0x6(R15)
    455          
    456                /* LatencyReq */
    457                pBuf++;
   \   000068   1A53         ADD.W   #0x1, R10
    458          
    459                /* AppNumInClusters */
    460                epDesc->simpleDesc->AppNumInClusters = *pBuf++;
   \   00006A   2F48         MOV.W   @R8, R15
   \   00006C   FF4A0700     MOV.B   @R10+, 0x7(R15)
   \   000070   2F48         MOV.W   @R8, R15
   \   000072   5C4F0700     MOV.B   0x7(R15), R12
   \   000076   4C93         CMP.B   #0x0, R12
   \   000078   1724         JEQ     ??MT_BuildEndpointDesc_5
    461                if (epDesc->simpleDesc->AppNumInClusters)
    462                {
    463                  epDesc->simpleDesc->pAppInClusterList = (uint16 *)
    464                            osal_mem_alloc((epDesc->simpleDesc->AppNumInClusters)*sizeof(uint16));
   \   00007A   0C5C         RLA.W   R12
   \   00007C   ........     CALLA   #osal_mem_alloc
   \   000080   2F48         MOV.W   @R8, R15
   \   000082   8F4C0800     MOV.W   R12, 0x8(R15)
    465                  if ( epDesc->simpleDesc->pAppInClusterList )
   \   000086   2F48         MOV.W   @R8, R15
   \   000088   8F930800     CMP.W   #0x0, 0x8(R15)
   \   00008C   0C24         JEQ     ??MT_BuildEndpointDesc_6
    466                  {
    467                    for (i=0; i<(epDesc->simpleDesc->AppNumInClusters); i++)
   \   00008E   4E43         MOV.B   #0x0, R14
   \                     ??MT_BuildEndpointDesc_0:
   \   000090   2C48         MOV.W   @R8, R12
   \   000092   5E9C0700     CMP.B   0x7(R12), R14
   \   000096   082C         JC      ??MT_BuildEndpointDesc_5
    468                    {
    469                      epDesc->simpleDesc->pAppInClusterList[i] = BUILD_UINT16(*pBuf, *(pBuf+1));
   \   000098   ........     CALLA   #?Subroutine2
    470                      pBuf += 2;
    471                    }
    472                  }
   \                     ??CrossCallReturnLabel_4:
   \   00009C   1F4C0800     MOV.W   0x8(R12), R15
   \   0000A0   ........     CALLA   #?Subroutine1
   \                     ??CrossCallReturnLabel_2:
   \   0000A4   F53F         JMP     ??MT_BuildEndpointDesc_0
    473                  else
    474                  {
    475                    ret = ZMemError;
   \                     ??MT_BuildEndpointDesc_6:
   \   0000A6   4B49         MOV.B   R9, R11
    476                  }
    477                }
    478          
    479                /* AppNumOutClusters */
    480                epDesc->simpleDesc->AppNumOutClusters = *pBuf++;
   \                     ??MT_BuildEndpointDesc_5:
   \   0000A8   2F48         MOV.W   @R8, R15
   \   0000AA   FF4A0A00     MOV.B   @R10+, 0xa(R15)
   \   0000AE   2F48         MOV.W   @R8, R15
   \   0000B0   5C4F0A00     MOV.B   0xa(R15), R12
   \   0000B4   4C93         CMP.B   #0x0, R12
   \   0000B6   1824         JEQ     ??MT_BuildEndpointDesc_7
    481                if (epDesc->simpleDesc->AppNumOutClusters)
    482                {
    483                  epDesc->simpleDesc->pAppOutClusterList = (uint16 *)
    484                                    osal_mem_alloc((epDesc->simpleDesc->AppNumOutClusters)*sizeof(uint16));
   \   0000B8   0C5C         RLA.W   R12
   \   0000BA   ........     CALLA   #osal_mem_alloc
   \   0000BE   2F48         MOV.W   @R8, R15
   \   0000C0   8F4C0C00     MOV.W   R12, 0xc(R15)
    485                  if (epDesc->simpleDesc->pAppOutClusterList)
   \   0000C4   2F48         MOV.W   @R8, R15
   \   0000C6   8F930C00     CMP.W   #0x0, 0xc(R15)
   \   0000CA   0C24         JEQ     ??MT_BuildEndpointDesc_8
    486                  {
    487                    for (i=0; i<(epDesc->simpleDesc->AppNumOutClusters); i++)
   \   0000CC   4E43         MOV.B   #0x0, R14
   \                     ??MT_BuildEndpointDesc_1:
   \   0000CE   2C48         MOV.W   @R8, R12
   \   0000D0   5E9C0A00     CMP.B   0xa(R12), R14
   \   0000D4   092C         JC      ??MT_BuildEndpointDesc_7
    488                    {
    489                      epDesc->simpleDesc->pAppOutClusterList[i] = BUILD_UINT16(*pBuf, *(pBuf+1));
   \   0000D6   ........     CALLA   #?Subroutine2
    490                      pBuf += 2;
    491                    }
    492                  }
   \                     ??CrossCallReturnLabel_5:
   \   0000DA   1F4C0C00     MOV.W   0xc(R12), R15
   \   0000DE   ........     CALLA   #?Subroutine1
   \                     ??CrossCallReturnLabel_3:
   \   0000E2   F53F         JMP     ??MT_BuildEndpointDesc_1
    493                  else
    494                  {
    495                    ret = ZMemError;
   \                     ??MT_BuildEndpointDesc_8:
   \   0000E4   4B49         MOV.B   R9, R11
   \   0000E6   023C         JMP     ??MT_BuildEndpointDesc_9
    496                  }
    497                }
    498          
    499                /* if any list cannot be allocated...free all */
    500                if ( ret == ZMemError )
   \                     ??MT_BuildEndpointDesc_7:
   \   0000E8   4B99         CMP.B   R9, R11
   \   0000EA   1420         JNE     ??MT_BuildEndpointDesc_3
   \                     ??MT_BuildEndpointDesc_9:
   \   0000EC   2F48         MOV.W   @R8, R15
   \   0000EE   1C4F0800     MOV.W   0x8(R15), R12
   \   0000F2   0C93         CMP.W   #0x0, R12
   \   0000F4   0224         JEQ     ??MT_BuildEndpointDesc_10
    501                {
    502                  if (epDesc->simpleDesc->pAppInClusterList)
    503                  {
    504                    osal_mem_free(epDesc->simpleDesc->pAppInClusterList);
   \   0000F6   ........     CALLA   #osal_mem_free
    505                  }
    506          
    507                  if (epDesc->simpleDesc->AppNumOutClusters)
   \                     ??MT_BuildEndpointDesc_10:
   \   0000FA   2F48         MOV.W   @R8, R15
   \   0000FC   CF930A00     CMP.B   #0x0, 0xa(R15)
   \   000100   0424         JEQ     ??MT_BuildEndpointDesc_11
    508                  {
    509                    osal_mem_free(epDesc->simpleDesc->pAppOutClusterList);
   \   000102   1C4F0C00     MOV.W   0xc(R15), R12
   \   000106   ........     CALLA   #osal_mem_free
    510                  }
    511          
    512                  osal_mem_free(epDesc->simpleDesc);
   \                     ??MT_BuildEndpointDesc_11:
   \   00010A   2C48         MOV.W   @R8, R12
   \   00010C   ........     CALLA   #osal_mem_free
   \   000110   013C         JMP     ??MT_BuildEndpointDesc_3
    513                }
    514              }
    515              else
    516              {
    517                ret = ZMemError;
   \                     ??MT_BuildEndpointDesc_4:
   \   000112   4B49         MOV.B   R9, R11
    518              }
    519            }
    520          
    521            return ret;
   \                     ??MT_BuildEndpointDesc_3:
   \   000114   4C4B         MOV.B   R11, R12
   \   000116   3817         POPM.W  #0x4, R11
   \   000118   1001         RETA
    522          }

   \                                 In  segment CODE, align 2
   \                     ?Subroutine2:
   \   000000   6D4A         MOV.B   @R10, R13
   \   000002   5F4A0100     MOV.B   0x1(R10), R15
   \   000006                RPT     #0x8
   \   000006   47180F5F     RLAX.W  R15
   \   00000A   0D5F         ADD.W   R15, R13
   \   00000C   1001         RETA

   \                                 In  segment CODE, align 2
   \                     ?Subroutine1:
   \   000000   4C4E         MOV.B   R14, R12
   \   000002   0C5C         RLA.W   R12
   \   000004   0F5C         ADD.W   R12, R15
   \   000006   8F4D0000     MOV.W   R13, 0(R15)
   \   00000A   2A53         ADD.W   #0x2, R10
   \   00000C   5E53         ADD.B   #0x1, R14
   \   00000E   1001         RETA

   \                                 In  segment CODE, align 2
   \                     ?Subroutine0:
   \   000000   6E4A         MOV.B   @R10, R14
   \   000002   5F4A0100     MOV.B   0x1(R10), R15
   \   000006                RPT     #0x8
   \   000006   47180F5F     RLAX.W  R15
   \   00000A   0E5F         ADD.W   R15, R14
   \   00000C   2F48         MOV.W   @R8, R15
   \   00000E   1001         RETA

   \                                 In  segment DATA16_ID, align 2, align-sorted
   \                     `?<Initializer for mtProcessIncoming>`:
   \   000000   00000000.... DC32 0H, MT_SysCommandProcessing, 0H, 0H, 0H, MT_ZdoCommandProcessing
   \            ....00000000
   \            000000000000
   \            0000........
   \   000018   000000000000 DC32 0H, 0H, 0H, 0H, 0H
   \            000000000000
   \            000000000000
   \            0000        
    523          #endif
    524          /***************************************************************************************************
    525          ***************************************************************************************************/

   Maximum stack usage in bytes:

   CSTACK Function
   ------ --------
      4   MTProcessAppRspMsg
        4   -> MT_BuildAndSendZToolResponse
     18   MT_BuildAndSendZToolResponse
       18   -> MT_BuildSPIMsg
       16   -> MT_TransportAlloc
       18   -> MT_TransportSend
     12   MT_BuildEndpointDesc
       12   -> afFindEndPointDesc
       12   -> osal_mem_alloc
       12   -> osal_mem_free
      6   MT_BuildSPIMsg
        6   -> osal_memcpy
      4   MT_Init
        4   -> MT_SysResetInd
        4   -> MT_ZdoInit
      8   MT_ProcessIncoming
        8   -- Indirect call
        8   -> MT_BuildAndSendZToolResponse
     12   MT_ReverseBytes
      4   MT_Word2Buf


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      44  ?<Initializer for mtProcessIncoming>
      16  ?Subroutine0
      16  ?Subroutine1
      14  ?Subroutine2
      16  MTProcessAppRspMsg
      52  MT_BuildAndSendZToolResponse
     282  MT_BuildEndpointDesc
      42  MT_BuildSPIMsg
       8  MT_Init
     118  MT_ProcessIncoming
      42  MT_ReverseBytes
      30  MT_Word2Buf
       1  debugCompId
       1  debugThreshold
      44  mtProcessIncoming

 
 636 bytes in segment CODE
  44 bytes in segment DATA16_I
  44 bytes in segment DATA16_ID
   2 bytes in segment DATA16_Z
 
 636 bytes of CODE  memory
  44 bytes of CONST memory
  46 bytes of DATA  memory

Errors: none
Warnings: none
